var wM=Object.defineProperty,TM=Object.defineProperties;var bM=Object.getOwnPropertyDescriptors;var nu=Object.getOwnPropertySymbols;var bE=Object.prototype.hasOwnProperty,CE=Object.prototype.propertyIsEnumerable;var TE=(t,e,n)=>e in t?wM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R=(t,e)=>{for(var n in e||={})bE.call(e,n)&&TE(t,n,e[n]);if(nu)for(var n of nu(e))CE.call(e,n)&&TE(t,n,e[n]);return t},H=(t,e)=>TM(t,bM(e));var ru=(t,e)=>{var n={};for(var r in t)bE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&nu)for(var r of nu(t))e.indexOf(r)<0&&CE.call(t,r)&&(n[r]=t[r]);return n};var Nf;function iu(){return Nf}function tn(t){let e=Nf;return Nf=t,e}var SE=Symbol("NotFound");function Bi(t){return t===SE||t?.name==="\u0275NotFound"}function uu(t,e){return Object.is(t,e)}var rt=null,ou=!1,Mf=1,CM=null,it=Symbol("SIGNAL");function Q(t){let e=rt;return rt=t,e}function lu(){return rt}var $r={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hi(t){if(ou)throw new Error("");if(rt===null)return;rt.consumerOnSignalRead(t);let e=rt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=rt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:rt.producers,n!==void 0&&n.producer===t)){rt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===rt&&(!r||DM(i,rt)))return;let o=qi(rt),s={producer:t,consumer:rt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};rt.producersTail=s,e!==void 0?e.nextProducer=s:rt.producers=s,o&&AE(t,s)}function DE(){Mf++}function du(t){if(!(qi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Mf)){if(!t.producerMustRecompute(t)&&!Us(t)){cu(t);return}t.producerRecomputeValue(t),cu(t)}}function Pf(t){if(t.consumers===void 0)return;let e=ou;ou=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||SM(r)}}finally{ou=e}}function xf(){return rt?.consumerAllowSignalWrites!==!1}function SM(t){t.dirty=!0,Pf(t),t.consumerMarkedDirty?.(t)}function cu(t){t.dirty=!1,t.lastCleanEpoch=Mf}function qr(t){return t&&(t.producersTail=void 0,t.recomputing=!0),Q(t)}function $i(t,e){if(Q(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(qi(t))do r=Of(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function Us(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(du(n),r!==n.version))return!0}return!1}function hu(t){if(qi(t)){let e=t.producers;for(;e!==void 0;)e=Of(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function AE(t,e){let n=t.consumersTail,r=qi(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)AE(i.producer,i)}function Of(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!qi(e)){let o=e.producers;for(;o!==void 0;)o=Of(o)}return n}function qi(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function fu(t){CM?.(t)}function DM(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function pu(t,e){let n=Object.create(AM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(du(n),Hi(n),n.value===js)throw n.error;return n.value};return r[it]=n,fu(n),r}var su=Symbol("UNSET"),au=Symbol("COMPUTING"),js=Symbol("ERRORED"),AM=H(R({},$r),{value:su,dirty:!0,error:null,equal:uu,kind:"computed",producerMustRecompute(t){return t.value===su||t.value===au},producerRecomputeValue(t){if(t.value===au)throw new Error("");let e=t.value;t.value=au;let n=qr(t),r,i=!1;try{r=t.computation(),Q(null),i=e!==su&&e!==js&&r!==js&&t.equal(e,r)}catch(o){r=js,t.error=o}finally{$i(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function RM(){throw new Error}var RE=RM;function NE(t){RE(t)}function kf(t){RE=t}var NM=null;function Lf(t,e){let n=Object.create(gu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>ME(n);return r[it]=n,fu(n),[r,s=>zi(n,s),s=>Vf(n,s)]}function ME(t){return Hi(t),t.value}function zi(t,e){xf()||NE(t),t.equal(t.value,e)||(t.value=e,MM(t))}function Vf(t,e){xf()||NE(t),zi(t,e(t.value))}var gu=H(R({},$r),{equal:uu,value:void 0,kind:"signal"});function MM(t){t.version++,DE(),Pf(t),NM?.(t)}function Y(t){return typeof t=="function"}function Gi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mu=Gi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Bs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof mu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{PE(o)}catch(s){e=e??[],s instanceof mu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new mu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)PE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Bs(n,e)}remove(e){let{_finalizers:n}=this;n&&Bs(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var Ff=Se.EMPTY;function yu(t){return t instanceof Se||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function PE(t){Y(t)?t():t.unsubscribe()}var Ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wi={setTimeout(t,e,...n){let{delegate:r}=Wi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Wi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vu(t){Wi.setTimeout(()=>{let{onUnhandledError:e}=Ut;if(e)e(t);else throw t})}function Hs(){}var xE=jf("C",void 0,void 0);function OE(t){return jf("E",void 0,t)}function kE(t){return jf("N",t,void 0)}function jf(t,e,n){return{kind:t,value:e,error:n}}var zr=null;function Ki(t){if(Ut.useDeprecatedSynchronousErrorHandling){let e=!zr;if(e&&(zr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zr;if(zr=null,n)throw r}}else t()}function LE(t){Ut.useDeprecatedSynchronousErrorHandling&&zr&&(zr.errorThrown=!0,zr.error=t)}var Gr=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yu(e)&&e.add(this)):this.destination=OM}static create(e,n,r){return new Qi(e,n,r)}next(e){this.isStopped?Bf(kE(e),this):this._next(e)}error(e){this.isStopped?Bf(OE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Bf(xE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},PM=Function.prototype.bind;function Uf(t,e){return PM.call(t,e)}var Hf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_u(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_u(r)}else _u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_u(n)}}},Qi=class extends Gr{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ut.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Uf(e.next,o),error:e.error&&Uf(e.error,o),complete:e.complete&&Uf(e.complete,o)}):i=e}this.destination=new Hf(i)}};function _u(t){Ut.useDeprecatedSynchronousErrorHandling?LE(t):vu(t)}function xM(t){throw t}function Bf(t,e){let{onStoppedNotification:n}=Ut;n&&Wi.setTimeout(()=>n(t,e))}var OM={closed:!0,next:Hs,error:xM,complete:Hs};var Yi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function vt(t){return t}function $f(...t){return qf(t)}function qf(t){return t.length===0?vt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=LM(n)?n:new Qi(n,r,i);return Ki(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=VE(r),new r((i,o)=>{let s=new Qi({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Yi](){return this}pipe(...n){return qf(n)(this)}toPromise(n){return n=VE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function VE(t){var e;return(e=t??Ut.Promise)!==null&&e!==void 0?e:Promise}function kM(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function LM(t){return t&&t instanceof Gr||kM(t)&&yu(t)}function zf(t){return Y(t?.lift)}function ce(t){return e=>{if(zf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function re(t,e,n,r,i){return new Gf(t,e,n,r,i)}var Gf=class extends Gr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ji(){return ce((t,e)=>{let n=null;t._refCount++;let r=re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Zi=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,zf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(re(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return Ji()(this)}};var FE=Gi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Iu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new FE}next(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ki(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ff:(this.currentObservers=null,o.push(n),new Se(()=>{this.currentObservers=null,Bs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Iu(e,n),t})(),Iu=class extends xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ff}};var We=class extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ft=new ae(t=>t.complete());function jE(t){return t&&Y(t.schedule)}function UE(t){return t[t.length-1]}function Eu(t){return Y(UE(t))?t.pop():void 0}function sr(t){return jE(UE(t))?t.pop():void 0}function HE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function BE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wr(t){return this instanceof Wr?(this.v=t,this):new Wr(t)}function $E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function c(y,C){r[y]&&(i[y]=function(N){return new Promise(function(A,k){o.push([y,N,A,k])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof Wr?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function qE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof BE=="function"?BE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var wu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Tu(t){return Y(t?.then)}function bu(t){return Y(t[Yi])}function Cu(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function Su(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Du=VM();function Au(t){return Y(t?.[Du])}function Ru(t){return $E(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Wr(n.read());if(i)return yield Wr(void 0);yield yield Wr(r)}}finally{n.releaseLock()}})}function Nu(t){return Y(t?.getReader)}function De(t){if(t instanceof ae)return t;if(t!=null){if(bu(t))return FM(t);if(wu(t))return jM(t);if(Tu(t))return UM(t);if(Cu(t))return zE(t);if(Au(t))return BM(t);if(Nu(t))return HM(t)}throw Su(t)}function FM(t){return new ae(e=>{let n=t[Yi]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jM(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function UM(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vu)})}function BM(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function zE(t){return new ae(e=>{$M(t,e).catch(n=>e.error(n))})}function HM(t){return zE(Ru(t))}function $M(t,e){var n,r,i,o;return HE(this,void 0,void 0,function*(){try{for(n=qE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function pt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Mu(t,e=0){return ce((n,r)=>{n.subscribe(re(r,i=>pt(r,t,()=>r.next(i),e),()=>pt(r,t,()=>r.complete(),e),i=>pt(r,t,()=>r.error(i),e)))})}function Pu(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function GE(t,e){return De(t).pipe(Pu(e),Mu(e))}function WE(t,e){return De(t).pipe(Pu(e),Mu(e))}function KE(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function QE(t,e){return new ae(n=>{let r;return pt(n,e,()=>{r=t[Du](),pt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function xu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{pt(n,e,()=>{let r=t[Symbol.asyncIterator]();pt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function YE(t,e){return xu(Ru(t),e)}function JE(t,e){if(t!=null){if(bu(t))return GE(t,e);if(wu(t))return KE(t,e);if(Tu(t))return WE(t,e);if(Cu(t))return xu(t,e);if(Au(t))return QE(t,e);if(Nu(t))return YE(t,e)}throw Su(t)}function we(t,e){return e?JE(t,e):De(t)}function G(...t){let e=sr(t);return we(t,e)}function Xi(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function Wf(t){return!!t&&(t instanceof ae||Y(t.lift)&&Y(t.subscribe))}var Dn=Gi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return ce((n,r)=>{let i=0;n.subscribe(re(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:qM}=Array;function zM(t,e){return qM(e)?t(...e):t(e)}function Ou(t){return ie(e=>zM(t,e))}var{isArray:GM}=Array,{getPrototypeOf:WM,prototype:KM,keys:QM}=Object;function ku(t){if(t.length===1){let e=t[0];if(GM(e))return{args:e,keys:null};if(YM(e)){let n=QM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function YM(t){return t&&typeof t=="object"&&WM(t)===KM}function Lu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Vu(...t){let e=sr(t),n=Eu(t),{args:r,keys:i}=ku(t);if(r.length===0)return we([],e);let o=new ae(JM(r,e,i?s=>Lu(i,s):vt));return n?o.pipe(Ou(n)):o}function JM(t,e,n=vt){return r=>{ZE(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)ZE(e,()=>{let l=we(t[u],e),f=!1;l.subscribe(re(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ZE(t,e,n){t?pt(n,t,e):e()}function XE(t,e,n,r,i,o,s,c){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{o&&e.next(N),l++;let A=!1;De(n(N,f++)).subscribe(re(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let k=u.shift();s?pt(e,s,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(re(e,y,()=>{p=!0,m()})),()=>{c?.()}}function Oe(t,e,n=1/0){return Y(e)?Oe((r,i)=>ie((o,s)=>e(r,o,i,s))(De(t(r,i))),n):(typeof e=="number"&&(n=e),ce((r,i)=>XE(r,i,t,n)))}function ew(t=1/0){return Oe(vt,t)}function tw(){return ew(1)}function eo(...t){return tw()(we(t,sr(t)))}function $s(t){return new ae(e=>{De(t()).subscribe(e)})}function Kf(...t){let e=Eu(t),{args:n,keys:r}=ku(t),i=new ae(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;De(n[f]).subscribe(re(o,m=>{p||(p=!0,l--),c[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Lu(r,c):c),o.complete())}))}});return e?i.pipe(Ou(e)):i}function At(t,e){return ce((n,r)=>{let i=0;n.subscribe(re(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ar(t){return ce((e,n)=>{let r=null,i=!1,o;r=e.subscribe(re(n,void 0,void 0,s=>{o=De(t(s,ar(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function nw(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(re(s,f=>{let p=l++;u=c?t(u,f,p):(c=!0,f),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function to(t,e){return Y(e)?Oe(t,e,1):Oe(t,1)}function cr(t){return ce((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function An(t){return t<=0?()=>ft:ce((e,n)=>{let r=0;e.subscribe(re(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Fu(t=ZM){return ce((e,n)=>{let r=!1;e.subscribe(re(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ZM(){return new Dn}function qs(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Rn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((i,o)=>t(i,o,r)):vt,An(1),n?cr(e):Fu(()=>new Dn))}function no(t){return t<=0?()=>ft:ce((e,n)=>{let r=[];e.subscribe(re(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Qf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((i,o)=>t(i,o,r)):vt,no(1),n?cr(e):Fu(()=>new Dn))}function Yf(t,e){return ce(nw(t,e,arguments.length>=2,!0))}function Jf(...t){let e=sr(t);return ce((n,r)=>{(e?eo(t,n,e):eo(t,n)).subscribe(r)})}function Rt(t,e){return ce((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(re(r,u=>{i?.unsubscribe();let l=0,f=o++;De(t(u,f)).subscribe(i=re(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function ju(t){return ce((e,n)=>{De(t).subscribe(re(n,()=>n.complete(),Hs)),!n.closed&&e.subscribe(n)})}function Ve(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(re(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):vt}function rw(t){let e=Q(null);try{return t()}finally{Q(e)}}var up="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",F=class extends Error{code;constructor(e,n){super(qu(e,n)),this.code=e}};function XM(t){return`NG0${Math.abs(t)}`}function qu(t,e){return`${XM(t)}${e?": "+e:""}`}function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("")}function sw(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Mn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Mn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function lp(t,e){return t?e?`${t} ${e}`:t:e||""}var eP=fe({__forward_ref__:fe});function dr(t){return t.__forward_ref__=dr,t.toString=function(){return Mn(this())},t}function Ke(t){return dp(t)?t():t}function dp(t){return typeof t=="function"&&t.hasOwnProperty(eP)&&t.__forward_ref__===dr}function aw(t,e){t==null&&hp(e,t,null,"!=")}function hp(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Xr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qs(t){return tP(t,zu)}function fp(t){return Qs(t)!==null}function tP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function nP(t){let e=t?.[zu]??null;return e||null}function Xf(t){return t&&t.hasOwnProperty(Bu)?t[Bu]:null}var zu=fe({\u0275prov:fe}),Bu=fe({\u0275inj:fe}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pp(t){return t&&!!t.\u0275providers}var gp=fe({\u0275cmp:fe}),mp=fe({\u0275dir:fe}),yp=fe({\u0275pipe:fe}),vp=fe({\u0275mod:fe}),Ws=fe({\u0275fac:fe}),ei=fe({__NG_ELEMENT_ID__:fe}),iw=fe({__NG_ENV_ID__:fe});function Ys(t){return typeof t=="string"?t:t==null?"":String(t)}function Hu(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ys(t)}var _p=fe({ngErrorCode:fe}),cw=fe({ngErrorMessage:fe}),Gs=fe({ngTokenPath:fe});function Ip(t,e){return uw("",-200,e)}function Gu(t,e){throw new F(-201,!1)}function rP(t,e){t[Gs]??=[];let n=t[Gs],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(aw(e.provide,"Token with multi: true should have a provide property"),r=Hu(e.provide)):r=Hu(e),n[0]!==r&&t[Gs].unshift(r)}function iP(t,e){let n=t[Gs],r=t[_p],i=t[cw]||t.message;return t.message=sP(i,r,n,e),t}function uw(t,e,n){let r=new F(e,t);return r[_p]=e,r[cw]=t,n&&(r[Gs]=n),r}function oP(t){return t[_p]}function sP(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return qu(e,`${t}${o}${i}`)}var ep;function lw(){return ep}function _t(t){let e=ep;return ep=t,e}function Ep(t,e,n){let r=Qs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Gu(t,"Injector")}var aP={},Kr=aP,cP="__NG_DI_FLAG__",tp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Qr(n)||0;try{return this.injector.get(e,r&8?null:Kr,r)}catch(i){if(Bi(i))return i;throw i}}};function uP(t,e=0){let n=iu();if(n===void 0)throw new F(-203,!1);if(n===null)return Ep(t,void 0,e);{let r=lP(e),i=n.retrieve(t,r);if(Bi(i)){if(r.optional)return null;throw i}return i}}function ee(t,e=0){return(lw()||uP)(Ke(t),e)}function x(t,e){return ee(t,Qr(e))}function Qr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function np(t){let e=[];for(let n=0;n<t.length;n++){let r=Ke(t[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=dP(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(ee(i,o))}else e.push(ee(r))}return e}function dP(t){return t[cP]}function Yr(t,e){let n=t.hasOwnProperty(Ws);return n?t[Ws]:null}function Wu(t,e){t.forEach(n=>Array.isArray(n)?Wu(n,e):e(n))}function wp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Js(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function hw(t,e,n){let r=io(t,e);return r>=0?t[r|1]=n:(r=~r,dw(t,r,e,n)),r}function Ku(t,e){let n=io(t,e);if(n>=0)return t[n|1]}function io(t,e){return hP(t,e,1)}function hP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var hr={},It=[],Pn=new j(""),Tp=new j("",-1),bp=new j(""),Ks=class{get(e,n=Kr){if(n===Kr){let i=uw("",-201);throw i.name="\u0275NotFound",i}return n}};function Cp(t){return t[vp]||null}function fr(t){return t[gp]||null}function Sp(t){return t[mp]||null}function fw(t){return t[yp]||null}function ti(t){return{\u0275providers:t}}function pw(t){return ti([{provide:Pn,multi:!0,useValue:t}])}function gw(...t){return{\u0275providers:Dp(!0,t),\u0275fromNgModule:!0}}function Dp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Wu(e,s=>{let c=s;$u(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&mw(i,o),n}function mw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ap(i,o=>{e(o,r)})}}function $u(t,e,n,r){if(t=Ke(t),!t)return!1;let i=null,o=Xf(t),s=!o&&fr(t);if(!o&&!s){let u=t.ngModule;if(o=Xf(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)$u(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Wu(o.imports,f=>{$u(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&mw(l,e)}if(!c){let l=Yr(i)||(()=>new i);e({provide:i,useFactory:l,deps:It},i),e({provide:bp,useValue:i,multi:!0},i),e({provide:Pn,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;Ap(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ap(t,e){for(let n of t)pp(n)&&(n=n.\u0275providers),Array.isArray(n)?Ap(n,e):e(n)}var fP=fe({provide:String,useValue:fe});function yw(t){return t!==null&&typeof t=="object"&&fP in t}function pP(t){return!!(t&&t.useExisting)}function gP(t){return!!(t&&t.useFactory)}function Jr(t){return typeof t=="function"}function vw(t){return!!t.useClass}var Zs=new j(""),Uu={},ow={},Zf;function Xs(){return Zf===void 0&&(Zf=new Ks),Zf}var Qe=class{},Zr=class extends Qe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,ip(e,s=>this.processProvider(s)),this.records.set(Tp,ro(void 0,this)),i.has("environment")&&this.records.set(Qe,ro(void 0,this));let o=this.records.get(Zs);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(bp,It,{self:!0}))}retrieve(e,n){let r=Qr(n)||0;try{return this.get(e,Kr,r)}catch(i){if(Bi(i))return i;throw i}}destroy(){zs(this),this._destroyed=!0;let e=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(e)}}onDestroy(e){return zs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){zs(this);let n=tn(this),r=_t(void 0),i;try{return e()}finally{tn(n),_t(r)}}get(e,n=Kr,r){if(zs(this),e.hasOwnProperty(iw))return e[iw](this);let i=Qr(r),o,s=tn(this),c=_t(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=IP(e)&&Qs(e);f&&this.injectableDefInScope(f)?l=ro(rp(e),Uu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Xs():this.parent;return n=i&8&&n===Kr?null:n,u.get(e,n)}catch(u){let l=oP(u);throw l===-200||l===-201?new F(l,null):u}finally{_t(c),tn(s)}}resolveInjectorInitializers(){let e=Q(null),n=tn(this),r=_t(void 0),i;try{let o=this.get(Pn,It,{self:!0});for(let s of o)s()}finally{tn(n),_t(r),Q(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Mn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ke(e);let n=Jr(e)?e:Ke(e&&e.provide),r=yP(e);if(!Jr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ro(void 0,Uu,!0),i.factory=()=>np(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Q(null);try{if(n.value===ow)throw Ip(Mn(e));return n.value===Uu&&(n.value=ow,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&_P(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ke(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function rp(t){let e=Qs(t),n=e!==null?e.factory:Yr(t);if(n!==null)return n;if(t instanceof j)throw new F(204,!1);if(t instanceof Function)return mP(t);throw new F(204,!1)}function mP(t){if(t.length>0)throw new F(204,!1);let n=nP(t);return n!==null?()=>n.factory(t):()=>new t}function yP(t){if(yw(t))return ro(void 0,t.useValue);{let e=Rp(t);return ro(e,Uu)}}function Rp(t,e,n){let r;if(Jr(t)){let i=Ke(t);return Yr(i)||rp(i)}else if(yw(t))r=()=>Ke(t.useValue);else if(gP(t))r=()=>t.useFactory(...np(t.deps||[]));else if(pP(t))r=(i,o)=>ee(Ke(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ke(t&&(t.useClass||t.provide));if(vP(t))r=()=>new i(...np(t.deps));else return Yr(i)||rp(i)}return r}function zs(t){if(t.destroyed)throw new F(205,!1)}function ro(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function vP(t){return!!t.deps}function _P(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function IP(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function ip(t,e){for(let n of t)Array.isArray(n)?ip(n,e):n&&pp(n)?ip(n.\u0275providers,e):e(n)}function lt(t,e){let n;t instanceof Zr?(zs(t),n=t):n=new tp(t);let r,i=tn(n),o=_t(void 0);try{return e()}finally{tn(i),_t(o)}}function _w(){return lw()!==void 0||iu()!=null}var Ht=0,W=1,J=2,Fe=3,Nt=4,Mt=5,oo=6,so=7,je=8,ni=9,xn=10,be=11,ao=12,Np=13,co=14,Et=15,ri=16,ii=17,oi=18,ea=19,Mp=20,Nn=21,Qu=22,ta=23,wt=24,Yu=25,gt=26,Iw=1,Pp=6,pr=7,na=8,ra=9,Ye=10;function rn(t){return Array.isArray(t)&&typeof t[Iw]=="object"}function $t(t){return Array.isArray(t)&&t[Iw]===!0}function xp(t){return(t.flags&4)!==0}function gr(t){return t.componentOffset>-1}function Ju(t){return(t.flags&1)===1}function on(t){return!!t.template}function uo(t){return(t[J]&512)!==0}function si(t){return(t[J]&256)===256}var Ew="svg",ww="math";function Pt(t){for(;Array.isArray(t);)t=t[Ht];return t}function Op(t,e){return Pt(e[t])}function sn(t,e){return Pt(e[t.index])}function ia(t,e){return t.data[e]}function xt(t,e){let n=e[t];return rn(n)?n:n[Ht]}function Zu(t){return(t[J]&128)===128}function Tw(t){return $t(t[Fe])}function lo(t,e){return e==null?null:t[e]}function kp(t){t[ii]=0}function Lp(t){t[J]&1024||(t[J]|=1024,Zu(t)&&sa(t))}function oa(t){return!!(t[J]&9216||t[wt]?.dirty)}function Xu(t){t[xn].changeDetectionScheduler?.notify(8),t[J]&64&&(t[J]|=1024),oa(t)&&sa(t)}function sa(t){t[xn].changeDetectionScheduler?.notify(0);let e=ur(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Zu(e)));)e=ur(e)}function Vp(t,e){if(si(t))throw new F(911,!1);t[Nn]===null&&(t[Nn]=[]),t[Nn].push(e)}function bw(t,e){if(t[Nn]===null)return;let n=t[Nn].indexOf(e);n!==-1&&t[Nn].splice(n,1)}function ur(t){let e=t[Fe];return $t(e)?e[Fe]:e}function Cw(t){return t[so]??=[]}function Sw(t){return t.cleanup??=[]}var le={lFrame:$w(null),bindingsEnabled:!0,skipHydrationRootTNode:null},aa=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(aa||{}),EP=0,op=!1;function Dw(){return le.lFrame.elementDepthCount}function Aw(){le.lFrame.elementDepthCount++}function Rw(){le.lFrame.elementDepthCount--}function Nw(){return le.bindingsEnabled}function Mw(){return le.skipHydrationRootTNode!==null}function Pw(t){return le.skipHydrationRootTNode===t}function xw(){le.skipHydrationRootTNode=null}function ve(){return le.lFrame.lView}function qt(){return le.lFrame.tView}function Tt(){let t=Fp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Fp(){return le.lFrame.currentTNode}function Ow(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ho(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function jp(){return le.lFrame.isParent}function kw(){le.lFrame.isParent=!1}function Up(t){hp("Must never be called in production mode"),EP=t}function Bp(){return op}function Hp(t){let e=op;return op=t,e}function Lw(){return le.lFrame.bindingIndex}function Vw(t){return le.lFrame.bindingIndex=t}function el(){return le.lFrame.bindingIndex++}function $p(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Fw(){return le.lFrame.inI18n}function jw(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,tl(e)}function Uw(){return le.lFrame.currentDirectiveIndex}function tl(t){le.lFrame.currentDirectiveIndex=t}function Bw(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function qp(t){le.lFrame.currentQueryIndex=t}function wP(t){let e=t[W];return e.type===2?e.declTNode:e.type===1?t[Mt]:null}function zp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=wP(o),i===null||(o=o[co],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=le.lFrame=Hw();return r.currentTNode=e,r.lView=t,!0}function nl(t){let e=Hw(),n=t[W];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Hw(){let t=le.lFrame,e=t===null?null:t.child;return e===null?$w(t):e}function $w(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qw(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Gp=qw;function rl(){let t=qw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function On(){return le.lFrame.selectedIndex}function mr(t){le.lFrame.selectedIndex=t}function zw(){let t=le.lFrame;return ia(t.tView,t.selectedIndex)}function Gw(){return le.lFrame.currentNamespace}var Ww=!0;function il(){return Ww}function ol(t){Ww=t}function sp(t,e=null,n=null,r){let i=Wp(t,e,n,r);return i.resolveInjectorInitializers(),i}function Wp(t,e=null,n=null,r,i=new Set){let o=[n||It,gw(t)];return r=r||(typeof t=="object"?void 0:Mn(t)),new Zr(o,e||Xs(),r||null,i)}var Bt=class t{static THROW_IF_NOT_FOUND=Kr;static NULL=new Ks;static create(e,n){if(Array.isArray(e))return sp({name:""},n,e,"");{let r=e.name??"";return sp({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>ee(Tp)});static __NG_ELEMENT_ID__=-1},Ue=new j(""),yr=(()=>{class t{static __NG_ELEMENT_ID__=TP;static __NG_ENV_ID__=n=>n}return t})(),ap=class extends yr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return si(this._lView)}onDestroy(e){let n=this._lView;return Vp(n,e),()=>bw(n,e)}};function TP(){return new ap(ve())}var nn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ot=new j("",{providedIn:"root",factory:()=>{let t=x(Qe),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(nn),e.handleError(n))}}}),Kw={provide:Pn,useValue:()=>void x(nn),multi:!0},bP=new j("",{providedIn:"root",factory:()=>{let t=x(Ue).defaultView;if(!t)return;let e=x(Ot),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),x(yr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Kp(){return ti([pw(()=>void x(bP))])}function Qp(t){return typeof t=="function"&&t[it]!==void 0}function zt(t,e){let[n,r,i]=Lf(t,e?.equal),o=n,s=o[it];return o.set=r,o.update=i,o.asReadonly=Qw.bind(o),o}function Qw(){let t=this[it];if(t.readonlyFn===void 0){let e=()=>this();e[it]=t,t.readonlyFn=e}return t.readonlyFn}function Yp(t){return Qp(t)&&typeof t.set=="function"}var lr=class{},ca=new j("",{providedIn:"root",factory:()=>!1});var Jp=new j(""),sl=new j("");var kn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new We(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ae(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();function ua(...t){}var Zp=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new cp})}return t})(),cp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function va(t){return{toString:t}.toString()}function VP(t){return typeof t=="function"}var dl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function NT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var _a=(()=>{let t=()=>MT;return t.ngInherit=!0,t})();function MT(t){return t.type.prototype.ngOnChanges&&(t.setInput=jP),FP}function FP(){let t=xT(this),e=t?.current;if(e){let n=t.previous;if(n===hr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function jP(t,e,n,r,i){let o=this.declaredInputs[r],s=xT(t)||UP(t,{previous:hr,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new dl(l&&l.currentValue,n,u===hr),NT(t,e,i,n)}var PT="__ngSimpleChanges__";function xT(t){return t[PT]||null}function UP(t,e){return t[PT]=e}var Yw=[];var me=function(t,e=null,n){for(let r=0;r<Yw.length;r++){let i=Yw[r];i(t,e,n)}};function BP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=MT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function HP(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function cl(t,e,n){OT(t,e,3,n)}function ul(t,e,n,r){(t[J]&3)===n&&OT(t,e,n,r)}function Xp(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function OT(t,e,n,r){let i=r!==void 0?t[ii]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[ii]+=65536),(c<o||o==-1)&&($P(t,n,e,u),t[ii]=(t[ii]&4294901760)+u+2),u++}function Jw(t,e){me(4,t,e);let n=Q(null);try{e.call(t)}finally{Q(n),me(5,t,e)}}function $P(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[J]>>14<t[ii]>>16&&(t[J]&3)===e&&(t[J]+=16384,Jw(c,o)):Jw(c,o)}var po=-1,ci=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function qP(t){return(t.flags&8)!==0}function zP(t){return(t.flags&16)!==0}function GP(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];KP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function WP(t){return t===3||t===4||t===6}function KP(t){return t.charCodeAt(0)===64}function ha(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Zw(t,n,i,null,e[++r]):Zw(t,n,i,null,null))}}return t}function Zw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function kT(t){return t!==po}function hl(t){return t&32767}function QP(t){return t>>16}function fl(t,e){let n=QP(t),r=e;for(;n>0;)r=r[co],n--;return r}var lg=!0;function Xw(t){let e=lg;return lg=t,e}var YP=256,LT=YP-1,VT=5,JP=0,an={};function ZP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ei)&&(r=n[ei]),r==null&&(r=n[ei]=JP++);let i=r&LT,o=1<<i;e.data[t+(i>>VT)]|=o}function pl(t,e){let n=FT(t,e);if(n!==-1)return n;let r=e[W];r.firstCreatePass&&(t.injectorIndex=e.length,eg(r.data,t),eg(e,null),eg(r.blueprint,null));let i=kg(t,e),o=t.injectorIndex;if(kT(i)){let s=hl(i),c=fl(i,e),u=c[W].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function eg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function FT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function kg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=$T(i),r===null)return po;if(n++,i=i[co],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return po}function dg(t,e,n){ZP(t,e,n)}function jT(t,e,n){if(n&8||t!==void 0)return t;Gu(e,"NodeInjector")}function UT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[ni],o=_t(void 0);try{return i?i.get(e,r,n&8):Ep(e,r,n&8)}finally{_t(o)}}return jT(r,e,n)}function BT(t,e,n,r=0,i){if(t!==null){if(e[J]&2048&&!(r&2)){let s=rx(t,e,n,r,an);if(s!==an)return s}let o=HT(t,e,n,r,an);if(o!==an)return o}return UT(e,n,r,i)}function HT(t,e,n,r,i){let o=tx(n);if(typeof o=="function"){if(!zp(e,t,r))return r&1?jT(i,n,r):UT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Gu(n);else return s}finally{Gp()}}else if(typeof o=="number"){let s=null,c=FT(t,e),u=po,l=r&1?e[Et][Mt]:null;for((c===-1||r&4)&&(u=c===-1?kg(t,e):e[c+8],u===po||!tT(r,!1)?c=-1:(s=e[W],c=hl(u),e=fl(u,e)));c!==-1;){let f=e[W];if(eT(o,c,f.data)){let p=XP(c,e,n,s,r,l);if(p!==an)return p}u=e[c+8],u!==po&&tT(r,e[W].data[c+8]===l)&&eT(o,c,e)?(s=f,c=hl(u),e=fl(u,e)):c=-1}}return i}function XP(t,e,n,r,i,o){let s=e[W],c=s.data[t+8],u=r==null?gr(c)&&lg:r!=s&&(c.type&3)!==0,l=i&1&&o===c,f=ex(c,s,n,u,l);return f!==null?gl(e,s,f,c,i):an}function ex(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,m=i?c+f:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&on(y)&&y.type===n)return u}return null}function gl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ci){let c=o;if(c.resolving){let y=Hu(s[n]);throw Ip(y)}let u=Xw(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],f,p=c.injectImpl?_t(c.injectImpl):null,m=zp(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&BP(n,s[n],e)}finally{p!==null&&_t(p),Xw(u),c.resolving=!1,Gp()}}return o}function tx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ei)?t[ei]:void 0;return typeof e=="number"?e>=0?e&LT:nx:e}function eT(t,e,n){let r=1<<t;return!!(n[e+(t>>VT)]&r)}function tT(t,e){return!(t&2)&&!(t&1&&e)}var ai=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return BT(this._tNode,this._lView,e,Qr(r),n)}};function nx(){return new ai(Tt(),ve())}function Io(t){return va(()=>{let e=t.prototype.constructor,n=e[Ws]||hg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ws]||hg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function hg(t){return dp(t)?()=>{let e=hg(Ke(t));return e&&e()}:Yr(t)}function rx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!uo(s);){let c=HT(o,s,n,r|2,an);if(c!==an)return c;let u=o.parent;if(!u){let l=s[Mp];if(l){let f=l.get(n,an,r);if(f!==an)return f}u=$T(s),s=s[co]}o=u}return i}function $T(t){let e=t[W],n=e.type;return n===2?e.declTNode:n===1?t[Mt]:null}function ix(){return Lg(Tt(),ve())}function Lg(t,e){return new Ia(sn(t,e))}var Ia=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=ix}return t})();function qT(t){return(t.flags&128)===128}var Vg=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Vg||{}),zT=new Map,ox=0;function sx(){return ox++}function ax(t){zT.set(t[ea],t)}function fg(t){zT.delete(t[ea])}var nT="__ngContext__";function go(t,e){rn(e)?(t[nT]=e[ea],ax(e)):t[nT]=e}function GT(t){return KT(t[ao])}function WT(t){return KT(t[Nt])}function KT(t){for(;t!==null&&!$t(t);)t=t[Nt];return t}var pg;function Fg(t){pg=t}function QT(){if(pg!==void 0)return pg;if(typeof document<"u")return document;throw new F(210,!1)}var Sl=new j("",{providedIn:"root",factory:()=>cx}),cx="ng",Dl=new j(""),Eo=new j("",{providedIn:"platform",factory:()=>"unknown"});var Al=new j("",{providedIn:"root",factory:()=>QT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ux="h",lx="b";var YT="r";var JT="di";var ZT=!1,XT=new j("",{providedIn:"root",factory:()=>ZT});var dx=(t,e,n,r)=>{};function hx(t,e,n,r){dx(t,e,n,r)}function jg(t){return(t.flags&32)===32}var fx=()=>null;function eb(t,e,n=!1){return fx(t,e,n)}function tb(t,e){let n=t.contentQueries;if(n!==null){let r=Q(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];qp(o),c.contentQueries(2,e[s],s)}}}finally{Q(r)}}}function gg(t,e,n){qp(0);let r=Q(null);try{e(t,n)}finally{Q(r)}}function nb(t,e,n){if(xp(e)){let r=Q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{Q(r)}}}var Ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ln||{});var mg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${up})`}};function rb(t){return t instanceof mg?t.changingThisBreaksApplicationSecurity:t}function ib(t){return t instanceof Function?t():t}function px(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var ob="ng-template";function gx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&px(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ug(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ug(t){return t.type===4&&t.value!==ob}function mx(t,e,n){let r=t.type===4&&!n?ob:t.value;return e===r}function yx(t,e,n){let r=4,i=t.attrs,o=i!==null?Ix(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Gt(r)&&!Gt(u))return!1;if(s&&Gt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!mx(t,u,n)||u===""&&e.length===1){if(Gt(r))return!1;s=!0}}else if(r&8){if(i===null||!gx(t,i,u,n)){if(Gt(r))return!1;s=!0}}else{let l=e[++c],f=vx(u,i,Ug(t),n);if(f===-1){if(Gt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Gt(r))return!1;s=!0}}}}return Gt(r)||s}function Gt(t){return(t&1)===0}function vx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Ex(e,t)}function _x(t,e,n=!1){for(let r=0;r<e.length;r++)if(yx(t,e[r],n))return!0;return!1}function Ix(t){for(let e=0;e<t.length;e++){let n=t[e];if(WP(n))return e}return t.length}function Ex(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rT(t,e){return t?":not("+e.trim()+")":e}function wx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gt(s)&&(e+=rT(o,i),i=""),r=s,o=o||!Gt(r);n++}return i!==""&&(e+=rT(o,i)),e}function Tx(t){return t.map(wx).join(",")}function bx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Gt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var cn={};function Cx(t,e){return t.createText(e)}function Sx(t,e,n){t.setValue(e,n)}function sb(t,e,n){return t.createElement(e,n)}function ml(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ab(t,e,n){t.appendChild(e,n)}function iT(t,e,n,r,i){r!==null?ml(t,e,n,r,i):ab(t,e,n)}function cb(t,e,n){t.removeChild(null,e,n)}function Dx(t,e,n){t.setAttribute(e,"style",n)}function Ax(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ub(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&GP(t,e,r),i!==null&&Ax(t,e,i),o!==null&&Dx(t,e,o)}function Bg(t,e,n,r,i,o,s,c,u,l,f){let p=gt+r,m=p+i,y=Rx(p,m),C=typeof l=="function"?l():l;return y[W]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:f}}function Rx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:cn);return n}function Nx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Bg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Hg(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[Ht]=i,p[J]=r|4|128|8|64|1024,(l!==null||t&&t[J]&2048)&&(p[J]|=2048),kp(p),p[Fe]=p[co]=t,p[je]=n,p[xn]=s||t&&t[xn],p[be]=c||t&&t[be],p[ni]=u||t&&t[ni]||null,p[Mt]=o,p[ea]=sx(),p[oo]=f,p[Mp]=l,p[Et]=e.type==2?t[Et]:p,p}function Mx(t,e,n){let r=sn(e,t),i=Nx(n),o=t[xn].rendererFactory,s=$g(t,Hg(t,i,null,lb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function lb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function db(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function $g(t,e){return t[ao]?t[Np][Nt]=e:t[ao]=e,t[Np]=e,e}function wo(t=1){hb(qt(),ve(),On()+t,!1)}function hb(t,e,n,r){if(!r)if((e[J]&3)===3){let o=t.preOrderCheckHooks;o!==null&&cl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&ul(e,o,0,n)}mr(n)}var Rl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Rl||{});function yg(t,e,n,r){let i=Q(null);try{let[o,s,c]=t.inputs[n],u=null;(s&Rl.SignalBased)!==0&&(u=e[o][it]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):NT(e,u,o,r)}finally{Q(i)}}var Vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Vn||{}),Px;function qg(t,e){return Px(t,e)}function fo(t,e,n,r,i){if(r!=null){let o,s=!1;$t(r)?o=r:rn(r)&&(s=!0,r=r[Ht]);let c=Pt(r);t===0&&n!==null?i==null?ab(e,n,c):ml(e,n,c,i||null,!0):t===1&&n!==null?ml(e,n,c,i||null,!0):t===2?cb(e,c,s):t===3&&e.destroyNode(c),o!=null&&qx(e,t,o,n,i)}}function xx(t,e){fb(t,e),e[Ht]=null,e[Mt]=null}function Ox(t,e,n,r,i,o){r[Ht]=i,r[Mt]=e,Ml(t,r,n,1,i,o)}function fb(t,e){e[xn].changeDetectionScheduler?.notify(9),Ml(t,e,e[be],2,null,null)}function kx(t){let e=t[ao];if(!e)return tg(t[W],t);for(;e;){let n=null;if(rn(e))n=e[ao];else{let r=e[Ye];r&&(n=r)}if(!n){for(;e&&!e[Nt]&&e!==t;)rn(e)&&tg(e[W],e),e=e[Fe];e===null&&(e=t),rn(e)&&tg(e[W],e),n=e&&e[Nt]}e=n}}function zg(t,e){let n=t[ra],r=n.indexOf(e);n.splice(r,1)}function Nl(t,e){if(si(e))return;let n=e[be];n.destroyNode&&Ml(t,e,n,3,null,null),kx(e)}function tg(t,e){if(si(e))return;let n=Q(null);try{e[J]&=-129,e[J]|=256,e[wt]&&hu(e[wt]),Vx(t,e),Lx(t,e),e[W].type===1&&e[be].destroy();let r=e[ri];if(r!==null&&$t(e[Fe])){r!==e[Fe]&&zg(r,e);let i=e[oi];i!==null&&i.detachView(t)}fg(e)}finally{Q(n)}}function Lx(t,e){let n=t.cleanup,r=e[so];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[so]=null);let i=e[Nn];if(i!==null){e[Nn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[ta];if(o!==null){e[ta]=null;for(let s of o)s.destroy()}}function Vx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ci)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];me(4,c,u);try{u.call(c)}finally{me(5,c,u)}}else{me(4,i,o);try{o.call(i)}finally{me(5,i,o)}}}}}function Fx(t,e,n){return jx(t,e.parent,n)}function jx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ht];if(gr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ln.None||i===Ln.Emulated)return null}return sn(r,n)}function Ux(t,e,n){return Hx(t,e,n)}function Bx(t,e,n){return t.type&40?sn(t,n):null}var Hx=Bx,oT;function Gg(t,e,n,r){let i=Fx(t,r,e),o=e[be],s=r.parent||e[Mt],c=Ux(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)iT(o,i,n[u],c,!1);else iT(o,i,n,c,!1);oT!==void 0&&oT(o,r,e,n,i)}function la(t,e){if(e!==null){let n=e.type;if(n&3)return sn(e,t);if(n&4)return vg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return la(t,r);{let i=t[e.index];return $t(i)?vg(-1,i):Pt(i)}}else{if(n&128)return la(t,e.next);if(n&32)return qg(e,t)()||Pt(t[e.index]);{let r=pb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ur(t[Et]);return la(i,r)}else return la(t,e.next)}}}return null}function pb(t,e){if(e!==null){let r=t[Et][Mt],i=e.projection;return r.projection[i]}return null}function vg(t,e){let n=Ye+t+1;if(n<e.length){let r=e[n],i=r[W].firstChild;if(i!==null)return la(r,i)}return e[pr]}function Wg(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&go(Pt(c),r),n.flags|=2),!jg(n))if(u&8)Wg(t,e,n.child,r,i,o,!1),fo(e,t,i,c,o);else if(u&32){let l=qg(n,r),f;for(;f=l();)fo(e,t,i,f,o);fo(e,t,i,c,o)}else u&16?$x(t,e,r,n,i,o):fo(e,t,i,c,o);n=s?n.projectionNext:n.next}}function Ml(t,e,n,r,i,o){Wg(n,r,t.firstChild,e,i,o,!1)}function $x(t,e,n,r,i,o){let s=n[Et],u=s[Mt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];fo(e,t,i,f,o)}else{let l=u,f=s[Fe];qT(r)&&(l.flags|=128),Wg(t,e,l,f,i,o,!0)}}function qx(t,e,n,r,i){let o=n[pr],s=Pt(n);o!==s&&fo(e,t,r,o,i);for(let c=Ye;c<n.length;c++){let u=n[c];Ml(u[W],u,t,e,r,o)}}function zx(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Vn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Vn.Important),t.setStyle(n,r,i,o))}}function gb(t,e,n,r,i){let o=On(),s=r&2;try{mr(-1),s&&e.length>gt&&hb(t,e,gt,!1),me(s?2:0,i,n),n(r,i)}finally{mr(o),me(s?3:1,i,n)}}function mb(t,e,n){Xx(t,e,n),(n.flags&64)===64&&e0(t,e,n)}function yb(t,e,n=sn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function Gx(t,e,n,r){let o=r.get(XT,ZT)||n===Ln.ShadowDom,s=t.selectRootElement(e,o);return Wx(s),s}function Wx(t){Kx(t)}var Kx=()=>null;function Qx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Yx(t,e,n,r,i,o){let s=e[W];if(Kg(t,s,e,n,r)){gr(t)&&Zx(e,t.index);return}t.type&3&&(n=Qx(n)),Jx(t,e,n,r,i,o)}function Jx(t,e,n,r,i,o){if(t.type&3){let s=sn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function Zx(t,e){let n=xt(e,t);n[J]&16||(n[J]|=64)}function Xx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;gr(n)&&Mx(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||pl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=gl(e,t,s,n);if(go(u,e),o!==null&&r0(e,s-r,u,c,n,o),on(c)){let l=xt(n.index,e);l[je]=gl(e,t,s,n)}}}function e0(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Uw();try{mr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];tl(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&t0(u,l)}}finally{mr(-1),tl(s)}}function t0(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function n0(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];_x(e,o.selectors,!1)&&(r??=[],on(o)?r.unshift(o):r.push(o))}return r}function r0(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];yg(r,n,u,l)}}function i0(t,e,n,r,i){let o=gt+n,s=e[W],c=i(s,e,t,r,n);e[o]=c,ho(t,!0);let u=t.type===2;return u?(ub(e[be],c,t),(Dw()===0||Ju(t))&&go(c,e),Aw()):go(c,e),il()&&(!u||!jg(t))&&Gg(s,e,c,t),t}function o0(t){let e=t;return jp()?kw():(e=e.parent,ho(e,!1)),e}function s0(t,e){let n=t[ni];if(!n)return;n.get(Ot,null)?.(e)}function Kg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];yg(p,n[l],f,i),c=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];yg(f,l,r,i),c=!0}return c}function a0(t,e){let n=xt(e,t),r=n[W];c0(r,n);let i=n[Ht];i!==null&&n[oo]===null&&(n[oo]=eb(i,n[ni])),me(18),Qg(r,n,n[je]),me(19,n[je])}function c0(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Qg(t,e,n){nl(e);try{let r=t.viewQuery;r!==null&&gg(1,r,n);let i=t.template;i!==null&&gb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[oi]?.finishViewCreation(t),t.staticContentQueries&&tb(t,e),t.staticViewQueries&&gg(2,t.viewQuery,n);let o=t.components;o!==null&&u0(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,rl()}}function u0(t,e){for(let n=0;n<e.length;n++)a0(t,e[n])}function vb(t,e,n,r){let i=Q(null);try{let o=e.tView,c=t[J]&4096?4096:16,u=Hg(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ri]=l;let f=t[oi];return f!==null&&(u[oi]=f.createEmbeddedView(o)),Qg(o,u,n),u}finally{Q(i)}}function yl(t,e){return!e||e.firstChild===null||qT(t)}var sT=!1,l0=new j("");function fa(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Pt(o)),$t(o)&&_b(o,r);let s=n.type;if(s&8)fa(t,e,n.child,r);else if(s&32){let c=qg(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=pb(e,n);if(Array.isArray(c))r.push(...c);else{let u=ur(e[Et]);fa(u[W],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function _b(t,e){for(let n=Ye;n<t.length;n++){let r=t[n],i=r[W].firstChild;i!==null&&fa(r[W],r,i,e)}t[pr]!==t[Ht]&&e.push(t[pr])}function Ib(t){if(t[Yu]!==null){for(let e of t[Yu])e.impl.addSequence(e);t[Yu].length=0}}var Eb=[];function d0(t){return t[wt]??h0(t)}function h0(t){let e=Eb.pop()??Object.create(p0);return e.lView=t,e}function f0(t){t.lView[wt]!==t&&(t.lView=null,Eb.push(t))}var p0=H(R({},$r),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{sa(t.lView)},consumerOnSignalRead(){this.lView[wt]=this}});function g0(t){let e=t[wt]??Object.create(m0);return e.lView=t,e}var m0=H(R({},$r),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ur(t.lView);for(;e&&!wb(e[W]);)e=ur(e);e&&Lp(e)},consumerOnSignalRead(){this.lView[wt]=this}});function wb(t){return t.type!==2}function Tb(t){if(t[ta]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ta])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[J]&8192)}}var y0=100;function Yg(t,e=0){let r=t[xn].rendererFactory,i=!1;i||r.begin?.();try{v0(t,e)}finally{i||r.end?.()}}function v0(t,e){let n=Bp();try{Hp(!0),_g(t,e);let r=0;for(;oa(t);){if(r===y0)throw new F(103,!1);r++,_g(t,1)}}finally{Hp(n)}}function bb(t,e){Up(e?aa.Exhaustive:aa.OnlyDirtyViews);try{Yg(t)}finally{Up(aa.Off)}}function _0(t,e,n,r){if(si(e))return;let i=e[J],o=!1,s=!1;nl(e);let c=!0,u=null,l=null;o||(wb(t)?(l=d0(e),u=qr(l)):lu()===null?(c=!1,l=g0(e),u=qr(l)):e[wt]&&(hu(e[wt]),e[wt]=null));try{kp(e),Vw(t.bindingStartIndex),n!==null&&gb(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&cl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&ul(e,y,0,null),Xp(e,0)}if(s||I0(e),Tb(e),Cb(e,0),t.contentQueries!==null&&tb(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&cl(e,y)}else{let y=t.contentHooks;y!==null&&ul(e,y,1),Xp(e,1)}w0(t,e);let p=t.components;p!==null&&Db(e,p,0);let m=t.viewQuery;if(m!==null&&gg(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&cl(e,y)}else{let y=t.viewHooks;y!==null&&ul(e,y,2),Xp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Qu]){for(let y of e[Qu])y();e[Qu]=null}o||(Ib(e),e[J]&=-73)}catch(f){throw o||sa(e),f}finally{l!==null&&($i(l,u),c&&f0(l)),rl()}}function Cb(t,e){for(let n=GT(t);n!==null;n=WT(n))for(let r=Ye;r<n.length;r++){let i=n[r];Sb(i,e)}}function I0(t){for(let e=GT(t);e!==null;e=WT(e)){if(!(e[J]&2))continue;let n=e[ra];for(let r=0;r<n.length;r++){let i=n[r];Lp(i)}}}function E0(t,e,n){me(18);let r=xt(e,t);Sb(r,n),me(19,r[je])}function Sb(t,e){Zu(t)&&_g(t,e)}function _g(t,e){let r=t[W],i=t[J],o=t[wt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Us(o)),s||=!1,o&&(o.dirty=!1),t[J]&=-9217,s)_0(r,t,r.template,t[je]);else if(i&8192){let c=Q(null);try{Tb(t),Cb(t,1);let u=r.components;u!==null&&Db(t,u,1),Ib(t)}finally{Q(c)}}}function Db(t,e,n){for(let r=0;r<e.length;r++)E0(t,e[r],n)}function w0(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)mr(~i);else{let o=i,s=n[++r],c=n[++r];jw(s,o);let u=e[o];me(24,u),c(2,u),me(25,u)}}}finally{mr(-1)}}function Jg(t,e){let n=Bp()?64:1088;for(t[xn].changeDetectionScheduler?.notify(e);t;){t[J]|=n;let r=ur(t);if(uo(t)&&!r)return t;t=r}return null}function Ab(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function T0(t,e){let n=Ye+e;if(n<t.length)return t[n]}function Zg(t,e,n,r=!0){let i=e[W];if(C0(i,e,t,n),r){let s=vg(n,t),c=e[be],u=c.parentNode(t[pr]);u!==null&&Ox(i,t[Mt],c,e,u,s)}let o=e[oo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function b0(t,e){let n=pa(t,e);return n!==void 0&&Nl(n[W],n),n}function pa(t,e){if(t.length<=Ye)return;let n=Ye+e,r=t[n];if(r){let i=r[ri];i!==null&&i!==t&&zg(i,r),e>0&&(t[n-1][Nt]=r[Nt]);let o=Js(t,Ye+e);xx(r[W],r);let s=o[oi];s!==null&&s.detachView(o[W]),r[Fe]=null,r[Nt]=null,r[J]&=-129}return r}function C0(t,e,n,r){let i=Ye+r,o=n.length;r>0&&(n[i-1][Nt]=e),r<o-Ye?(e[Nt]=n[i],wp(n,Ye+r,e)):(n.push(e),e[Nt]=null),e[Fe]=n;let s=e[ri];s!==null&&n!==s&&Rb(s,e);let c=e[oi];c!==null&&c.insertView(t),Xu(e),e[J]|=128}function Rb(t,e){let n=t[ra],r=e[Fe];if(rn(r))t[J]|=2;else{let i=r[Fe][Et];e[Et]!==i&&(t[J]|=2)}n===null?t[ra]=[e]:n.push(e)}var ui=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[W];return fa(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[je]}set context(e){this._lView[je]=e}get destroyed(){return si(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if($t(e)){let n=e[na],r=n?n.indexOf(this):-1;r>-1&&(pa(e,r),Js(n,r))}this._attachedToViewContainer=!1}Nl(this._lView[W],this._lView)}onDestroy(e){Vp(this._lView,e)}markForCheck(){Jg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Xu(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,Yg(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[ni].get(l0,sT)}catch{this.exhaustive=sT}}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=uo(this._lView),n=this._lView[ri];n!==null&&!e&&zg(n,this._lView),fb(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let n=uo(this._lView),r=this._lView[ri];r!==null&&!n&&Rb(r,this._lView),Xu(this._lView)}};function Xg(t,e,n,r,i){let o=t.data[e];if(o===null)o=S0(t,e,n,r,i),Fw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Ow();o.injectorIndex=s===null?-1:s.injectorIndex}return ho(o,!0),o}function S0(t,e,n,r,i){let o=Fp(),s=jp(),c=s?o:o&&o.parent,u=t.data[e]=A0(t,c,n,e,r,i);return D0(t,u,o,s),u}function D0(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function A0(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Mw()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var jW=new RegExp(`^(\\d+)*(${lx}|${ux})*(.*)`);function R0(t){let e=t[Pp]??[],r=t[Fe][be],i=[];for(let o of e)o.data[JT]!==void 0?i.push(o):N0(o,r);t[Pp]=i}function N0(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[YT];for(;n<i;){let o=r.nextSibling;cb(e,r,!1),r=o,n++}}}var M0=()=>null,P0=()=>null;function Ig(t,e){return M0(t,e)}function x0(t,e,n){return P0(t,e,n)}var Nb=class{},Pl=class{},Eg=class{resolveComponentFactory(e){throw new F(917,!1)}},Ea=class{static NULL=new Eg},li=class{},xl=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>O0()}return t})();function O0(){let t=ve(),e=Tt(),n=xt(e.index,t);return(rn(n)?n:t)[be]}var Mb=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();var ll={},wg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,ll,r);return i!==ll||n===ll?i:this.parentInjector.get(e,n,r)}};function aT(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=lp(i,c);else if(o==2){let u=c,l=e[++s];r=lp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ce(t,e=0){let n=ve();if(n===null)return ee(t,e);let r=Tt();return BT(r,n,Ke(t),e)}function k0(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,l]=f.resolveHostDirectives(s);break}F0(t,e,n,c,o,u,l)}o!==null&&r!==null&&L0(n,r,o)}function L0(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new F(-301,!1);r.push(e[i],o)}}function V0(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function F0(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&on(y)&&(u=!0,V0(t,n,m)),dg(pl(n,e),t,y.type)}q0(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=db(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=ha(n.mergedAttrs,y.hostAttrs),U0(t,n,e,p,y),$0(p,y,i),s!==null&&s.has(y)){let[N,A]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}j0(t,n,o)}function j0(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))cT(0,e,i,r),cT(1,e,i,r),lT(e,r,!1);else{let o=n.get(i);uT(0,e,o,r),uT(1,e,o,r),lT(e,r,!0)}}}function cT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Pb(e,o)}}function uT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),Pb(e,s)}}function Pb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function lT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Ug(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function U0(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Yr(i.type,!0)),s=new ci(o,on(i),Ce,null);t.blueprint[r]=s,n[r]=s,B0(t,e,r,db(t,n,i.hostVars,cn),i)}function B0(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;H0(s)!=c&&s.push(c),s.push(n,r,o)}}function H0(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function $0(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;on(e)&&(n[""]=t)}}function q0(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xb(t,e,n,r,i,o,s,c){let u=e[W],l=u.consts,f=lo(l,s),p=Xg(u,t,n,r,f);return o&&k0(u,e,p,lo(l,c),i),p.mergedAttrs=ha(p.mergedAttrs,p.attrs),p.attrs!==null&&aT(p,p.attrs,!1),p.mergedAttrs!==null&&aT(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Ob(t,e){HP(t,e),xp(e)&&t.queries.elementEnd(e)}function mo(t,e,n){if(n===cn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function z0(t,e,n,r){let i=mo(t,e,n);return mo(t,e+1,r)||i}function ng(t,e,n){return function r(i){let o=gr(t)?xt(t.index,e):e;Jg(o,5);let s=e[je],c=dT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=dT(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function dT(t,e,n,r){let i=Q(null);try{return me(6,e,n),n(r)!==!1}catch(o){return s0(t,o),!1}finally{me(7,e,n),Q(i)}}function G0(t,e,n,r,i,o,s,c){let u=Ju(t),l=!1,f=null;if(!r&&u&&(f=W0(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=sn(t,n),m=r?r(p):p;hx(n,m,o,c);let y=i.listen(m,o,c),C=r?N=>r(Pt(N[t.index])):t.index;kb(C,e,n,o,c,y,!1)}return l}function W0(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[so],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function kb(t,e,n,r,i,o,s){let c=e.firstCreatePass?Sw(e):null,u=Cw(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function hT(t,e,n,r,i,o){let s=e[n],c=e[W],l=c.data[n].outputs[r],p=s[l].subscribe(o);kb(t.index,c,e,i,o,p,!0)}var Tg=Symbol("BINDING");var vl=class extends Ea{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fr(e);return new yo(n,this.ngModule)}};function K0(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Rl.SignalBased)!==0};return i&&(o.transform=i),o})}function Q0(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function Y0(t,e,n){let r=e instanceof Qe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new wg(n,r):n}function J0(t){let e=t.get(li,null);if(e===null)throw new F(407,!1);let n=t.get(Mb,null),r=t.get(lr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Z0(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return sb(e,n,n==="svg"?Ew:n==="math"?ww:null)}var yo=class extends Pl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=K0(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Q0(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Tx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){me(22);let c=Q(null);try{let u=this.componentDef,l=X0(r,u,s,o),f=Y0(u,i||this.ngModule,e),p=J0(f),m=p.rendererFactory.createRenderer(null,u),y=r?Gx(m,r,u.encapsulation,f):Z0(u,m),C=s?.some(fT)||o?.some(k=>typeof k!="function"&&k.bindings.some(fT)),N=Hg(null,l,null,512|lb(u),null,null,p,m,f,null,eb(y,f,!0));N[gt]=y,nl(N);let A=null;try{let k=xb(gt,N,2,"#host",()=>l.directiveRegistry,!0,0);y&&(ub(m,y,k),go(y,N)),mb(l,N,k),nb(l,k,N),Ob(l,k),n!==void 0&&tO(k,this.ngContentSelectors,n),A=xt(k.index,N),N[je]=A[je],Qg(l,N,null)}catch(k){throw A!==null&&fg(A),fg(N),k}finally{me(23),rl()}return new _l(this.componentType,N,!!C)}finally{Q(c)}}};function X0(t,e,n,r){let i=t?["ng-version","20.1.6"]:bx(e.selectors[0]),o=null,s=null,c=0;if(n)for(let f of n)c+=f[Tg].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){c+=m[Tg].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=Sp(p);u.push(m)}return Bg(0,null,eO(o,s),1,c,u,null,null,null,[i],null)}function eO(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function fT(t){let e=t[Tg].kind;return e==="input"||e==="twoWay"}var _l=class extends Nb{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ia(n[W],gt),this.location=Lg(this._tNode,n),this.instance=xt(this._tNode.index,n)[je],this.hostView=this.changeDetectorRef=new ui(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Kg(r,i[W],i,e,n);this.previousInputValues.set(e,n);let s=xt(r.index,i);Jg(s,1)}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ol=(()=>{class t{static __NG_ELEMENT_ID__=nO}return t})();function nO(){let t=Tt();return iO(t,ve())}var rO=Ol,Lb=class extends rO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Lg(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=kg(this._hostTNode,this._hostLView);if(kT(e)){let n=fl(e,this._hostLView),r=hl(e),i=n[W].data[r+8];return new ai(i,n)}else return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=pT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ye}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ig(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,yl(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!VP(e),l;if(u)l=n;else{let A=n||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,c=A.bindings}let f=u?e:new yo(fr(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let k=(u?p:this.parentInjector).get(Qe,null);k&&(o=k)}let m=fr(f.componentType??{}),y=Ig(this._lContainer,m?.id??null),C=y?.firstChild??null,N=f.create(p,i,C,o,s,c);return this.insertImpl(N.hostView,l,yl(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Tw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Fe],l=new Lb(u,u[Mt],u[Fe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Zg(s,i,o,r),e.attachToViewContainerRef(),wp(rg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=pT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=pa(this._lContainer,n);r&&(Js(rg(this._lContainer),n),Nl(r[W],r))}detach(e){let n=this._adjustIndex(e,-1),r=pa(this._lContainer,n);return r&&Js(rg(this._lContainer),n)!=null?new ui(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function pT(t){return t[na]}function rg(t){return t[na]||(t[na]=[])}function iO(t,e){let n,r=e[t.index];return $t(r)?n=r:(n=Ab(r,e,null,t),e[t.index]=n,$g(e,n)),sO(n,e,t,r),new Lb(n,t,e)}function oO(t,e){let n=t[be],r=n.createComment(""),i=sn(e,t),o=n.parentNode(i);return ml(n,o,r,n.nextSibling(i),!1),r}var sO=uO,aO=()=>!1;function cO(t,e,n){return aO(t,e,n)}function uO(t,e,n,r){if(t[pr])return;let i;n.type&8?i=Pt(r):i=oO(e,n),t[pr]=i}var gT=new Set;function wa(t){gT.has(t)||(gT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var vo=class{},kl=class{};var Il=class extends vo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new vl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Cp(e);this._bootstrapComponents=ib(o.bootstrap),this._r3Injector=Wp(e,n,[{provide:vo,useValue:this},{provide:Ea,useValue:this.componentFactoryResolver},...r],Mn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},El=class extends kl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Il(this.moduleType,e,[])}};var ga=class extends vo{injector;componentFactoryResolver=new vl(this);instance=null;constructor(e){super();let n=new Zr([...e.providers,{provide:vo,useValue:this},{provide:Ea,useValue:this.componentFactoryResolver}],e.parent||Xs(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ta(t,e,n=null){return new ga({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var lO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Dp(!1,n.type),i=r.length>0?Ta([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(ee(Qe))})}return t})();function ba(t){return va(()=>{let e=Vb(t),n=H(R({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Vg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(lO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ln.Emulated,styles:t.styles||It,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&wa("NgStandalone"),Fb(n);let r=t.dependencies;return n.directiveDefs=mT(r,dO),n.pipeDefs=mT(r,fw),n.id=pO(n),n})}function dO(t){return fr(t)||Sp(t)}function To(t){return va(()=>({type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function hO(t,e){if(t==null)return hr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Rl.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function fO(t){if(t==null)return hr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function kt(t){return va(()=>{let e=Vb(t);return Fb(e),e})}function Vb(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||hr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:hO(t.inputs,e),outputs:fO(t.outputs),debugInfo:null}}function Fb(t){t.features?.forEach(e=>e(t))}function mT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function pO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function gO(t){return Object.getPrototypeOf(t.prototype).constructor}function Fn(t){let e=gO(t.type),n=!0,r=[t];for(;e;){let i;if(on(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ig(t.inputs),s.declaredInputs=ig(t.declaredInputs),s.outputs=ig(t.outputs);let c=i.hostBindings;c&&IO(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&vO(t,u),l&&_O(t,l),mO(t,i),sw(t.outputs,i.outputs),on(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===Fn&&(n=!1)}}e=Object.getPrototypeOf(e)}yO(r)}function mO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function yO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ha(i.hostAttrs,n=ha(n,i.hostAttrs))}}function ig(t){return t===hr?{}:t===It?[]:t}function vO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function _O(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function IO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function EO(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=ha(t.mergedAttrs,t.attrs);let f=t.tView=Bg(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),ho(t,!1);let u=wO(n,e,t,r);il()&&Gg(n,e,u,t),go(u,e);let l=Ab(u,e,u,t);e[r+gt]=l,$g(e,l),cO(l,t,e)}function yT(t,e,n,r,i,o,s,c,u,l,f){let p=n+gt,m;if(e.firstCreatePass){if(m=Xg(e,p,4,s||null,c||null),l!=null){let y=lo(e.consts,l);m.localNames=[];for(let C=0;C<y.length;C+=2)m.localNames.push(y[C],-1)}}else m=e.data[p];return EO(m,t,e,n,r,i,o,u),l!=null&&yb(t,m,f),m}var wO=TO;function TO(t,e,n,r){return ol(!0),e[be].createComment("")}var em=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(em||{}),Ca=new j(""),jb=!1,bg=class extends xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,_w()&&(this.destroyRef=x(yr,{optional:!0})??void 0,this.pendingTasks=x(kn,{optional:!0})??void 0)}emit(e){let n=Q(null);try{super.next(e)}finally{Q(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Se&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ae=bg;function Ub(t){let e,n;function r(){t=ua;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function vT(t){return queueMicrotask(()=>t()),()=>{t=ua}}var tm="isAngularZone",wl=tm+"_ID",bO=0,ke=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ae(!1);onMicrotaskEmpty=new Ae(!1);onStable=new Ae(!1);onError=new Ae(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=jb}=e;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,DO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new F(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,CO,ua,ua);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},CO={};function nm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function SO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Ub(()=>{t.callbackScheduled=!1,Cg(t),t.isCheckStableRunning=!0,nm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Cg(t)}function DO(t){let e=()=>{SO(t)},n=bO++;t._inner=t._inner.fork({name:"angular",properties:{[tm]:!0,[wl]:n,[wl+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(AO(u))return r.invokeTask(o,s,c,u);try{return _T(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),IT(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return _T(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!RO(u)&&e(),IT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Cg(t),nm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Cg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function _T(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function IT(t){t._nesting--,nm(t)}var ma=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ae;onMicrotaskEmpty=new Ae;onStable=new Ae;onError=new Ae;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function AO(t){return Bb(t,"__ignore_ng_zone__")}function RO(t){return Bb(t,"__scheduler_tick__")}function Bb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Hb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();var rm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var im=new j("");function hi(t){return!!t&&typeof t.then=="function"}function $b(t){return!!t&&typeof t.subscribe=="function"}var qb=new j("");var om=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(qb,{optional:!0})??[];injector=x(Bt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=lt(this.injector,i);if(hi(o))n.push(o);else if($b(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ll=new j("");function zb(){kf(()=>{let t="";throw new F(600,t)})}function Gb(t){return t.isBoundToModule}var NO=10;var vr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(Ot);afterRenderManager=x(Hb);zonelessEnabled=x(ca);rootEffectScheduler=x(Zp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(kn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ie(n=>!n))}constructor(){x(Ca,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(Qe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Bt.NULL){return this._injector.get(ke).run(()=>{me(10);let s=n instanceof Pl;if(!this._injector.get(om).done){let C="";throw new F(405,C)}let u;s?u=n:u=this._injector.get(Ea).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=Gb(u)?void 0:this._injector.get(vo),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(im,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),da(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),me(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){me(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(em.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new F(101,!1);let n=Q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Q(n),this.afterTick.next(),me(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(li,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<NO;)me(14),this.synchronizeOnce(),me(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!oa(i))continue;let o=r&&!this.zonelessEnabled?0:1;Yg(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>oa(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;da(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ll,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>da(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new F(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function da(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Sg=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function og(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function MO(t,e,n){let r,i,o=0,s=t.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),f=e[o],p=og(o,l,o,f,n);if(p!==0){p<0&&t.updateValue(o,f),o++;continue}let m=t.at(s),y=e[u],C=og(s,m,u,y,n);if(C!==0){C<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),A=n(s,m),k=n(o,f);if(Object.is(k,A)){let z=n(u,y);Object.is(z,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,f),o++;continue}if(r??=new Tl,i??=wT(t,o,s,n),Dg(t,r,o,k))t.updateValue(o,f),o++,s++;else if(i.has(k))r.set(N,t.detach(o)),s--;else{let z=t.create(o,e[o]);t.attach(o,z),o++,s++}}for(;o<=u;)ET(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let f=t.at(o),p=l.value,m=og(o,f,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Tl,i??=wT(t,o,s,n);let y=n(o,p);if(Dg(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let C=n(o,f);r.set(C,t.detach(o)),s--}}}for(;!l.done;)ET(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function Dg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function ET(t,e,n,r,i){if(Dg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function wT(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Tl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};var Ag=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ye}};var Rg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function sm(t,e,n,r,i,o,s,c,u,l,f,p,m){wa("NgControlFlow");let y=ve(),C=qt(),N=u!==void 0,A=ve(),k=c?s.bind(A[Et][je]):s,z=new Rg(N,k);A[gt+t]=z,yT(y,C,t+1,e,n,r,i,lo(C.consts,o),256),N&&yT(y,C,t+2,u,l,f,p,lo(C.consts,m),512)}var Ng=class extends Sg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ye}at(e){return this.getLView(e)[je].$implicit}attach(e,n){let r=n[oo];this.needsIndexUpdate||=e!==this.length,Zg(this.lContainer,n,e,yl(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,PO(this.lContainer,e)}create(e,n){let r=Ig(this.lContainer,this.templateTNode.tView.ssrId),i=vb(this.hostLView,this.templateTNode,new Ag(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Nl(e[W],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[je].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[je].$index=e}getLView(e){return xO(this.lContainer,e)}};function am(t){let e=Q(null),n=On();try{let r=ve(),i=r[W],o=r[n],s=n+1,c=TT(r,s);if(o.liveCollection===void 0){let l=bT(i,s);o.liveCollection=new Ng(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(MO(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=el(),f=u.length===0;if(mo(r,l,f)){let p=n+2,m=TT(r,p);if(f){let y=bT(i,p),C=x0(m,y,r),N=vb(r,y,void 0,{dehydratedView:C});Zg(m,N,0,yl(y,C))}else i.firstUpdatePass&&R0(m),b0(m,0)}}}finally{Q(e)}}function TT(t,e){return t[e]}function PO(t,e){return pa(t,e)}function xO(t,e){return T0(t,e)}function bT(t,e){return ia(t,e)}function CT(t,e,n,r,i){Kg(e,t,n,i?"class":"style",r)}function Wt(t,e,n,r){let i=ve(),o=i[W],s=t+gt,c=o.firstCreatePass?xb(s,i,2,e,n0,Nw(),n,r):o.data[s];if(i0(c,i,t,e,OO),Ju(c)){let u=i[W];mb(u,i,c),nb(u,c,i)}return r!=null&&yb(i,c),Wt}function Kt(){let t=qt(),e=Tt(),n=o0(e);return t.firstCreatePass&&Ob(t,n),Pw(n)&&xw(),Rw(),n.classesWithoutHost!=null&&qP(n)&&CT(t,n,ve(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&zP(n)&&CT(t,n,ve(),n.stylesWithoutHost,!1),Kt}function bo(t,e,n,r){return Wt(t,e,n,r),Kt(),bo}var OO=(t,e,n,r,i)=>(ol(!0),sb(e[be],r,Gw()));var Sa="en-US";var kO=Sa;function Wb(t){typeof t=="string"&&(kO=t.toLowerCase().replace(/_/g,"-"))}function jn(t,e,n){let r=ve(),i=qt(),o=Tt();return Kb(i,r,r[be],o,t,e,n),jn}function Kb(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=ng(r,e,o),G0(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=ng(r,e,o),hT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=ng(r,e,o),hT(r,e,p,i,i,u)}}function al(t,e){return t<<17|e<<2}function di(t){return t>>17&32767}function LO(t){return(t&2)==2}function VO(t,e){return t&131071|e<<17}function Mg(t){return t|2}function _o(t){return(t&131068)>>2}function sg(t,e){return t&-131069|e<<2}function FO(t){return(t&1)===1}function Pg(t){return t|1}function jO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=di(s),u=_o(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||io(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=di(t[c+1]);t[r+1]=al(m,c),m!==0&&(t[m+1]=sg(t[m+1],r)),t[c+1]=VO(t[c+1],r)}else t[r+1]=al(c,0),c!==0&&(t[c+1]=sg(t[c+1],r)),c=r;else t[r+1]=al(u,0),c===0?c=r:t[u+1]=sg(t[u+1],r),u=r;l&&(t[r+1]=Mg(t[r+1])),ST(t,f,r,!0),ST(t,f,r,!1),UO(e,f,t,r,o),s=al(c,u),o?e.classBindings=s:e.styleBindings=s}function UO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&io(o,e)>=0&&(n[r+1]=Pg(n[r+1]))}function ST(t,e,n,r){let i=t[n+1],o=e===null,s=r?di(i):_o(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];BO(u,e)&&(c=!0,t[s+1]=r?Pg(l):Mg(l)),s=r?di(l):_o(l)}c&&(t[n+1]=r?Mg(i):Pg(i))}function BO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?io(t,e)>=0:!1}function Da(t,e){return HO(t,e,null,!0),Da}function HO(t,e,n,r){let i=ve(),o=qt(),s=$p(2);if(o.firstUpdatePass&&qO(o,t,s,r),e!==cn&&mo(i,s,e)){let c=o.data[On()];QO(o,c,i,i[be],t,i[s+1]=YO(e,n),r,s)}}function $O(t,e){return e>=t.expandoStartIndex}function qO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[On()],s=$O(t,n);JO(o,r)&&e===null&&!s&&(e=!1),e=zO(i,o,e,r),jO(i,o,e,n,s,r)}}function zO(t,e,n,r){let i=Bw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ag(null,t,e,n,r),n=ya(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=ag(i,t,e,n,r),o===null){let u=GO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=ag(null,t,e,u[1],r),u=ya(u,e.attrs,r),WO(t,e,r,u))}else o=KO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function GO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(_o(r)!==0)return t[di(r)]}function WO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[di(i)]=r}function KO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ya(r,s,n)}return ya(r,e.attrs,n)}function ag(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=ya(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function ya(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),hw(t,s,n?!0:e[++o]))}return t===void 0?null:t}function QO(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=FO(l)?DT(u,e,n,i,_o(l),s):void 0;if(!bl(f)){bl(o)||LO(l)&&(o=DT(u,null,n,i,c,s));let p=Op(On(),n);zx(r,s,p,i,o)}}function DT(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===cn&&(m=p?It:void 0);let y=p?Ku(m,r):f===r?m:void 0;if(l&&!bl(y)&&(y=Ku(u,r)),bl(y)&&(c=y,s))return c;let C=t[i+1];i=s?di(C):_o(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Ku(u,r))}return c}function bl(t){return t!==void 0}function YO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Mn(rb(t)))),t}function JO(t,e){return(t.flags&(e?8:16))!==0}function fi(t,e=""){let n=ve(),r=qt(),i=t+gt,o=r.firstCreatePass?Xg(r,i,1,e,null):r.data[i],s=ZO(r,n,o,e,t);n[i]=s,il()&&Gg(r,n,s,o),ho(o,!1)}var ZO=(t,e,n,r,i)=>(ol(!0),Cx(e[be],r));function XO(t,e,n,r=""){return mo(t,el(),n)?e+Ys(n)+r:cn}function ek(t,e,n,r,i,o=""){let s=Lw(),c=z0(t,s,n,i);return $p(2),c?e+Ys(n)+r+Ys(i)+o:cn}function Vl(t,e,n){let r=ve(),i=XO(r,t,e,n);return i!==cn&&Qb(r,On(),i),Vl}function Fl(t,e,n,r,i){let o=ve(),s=ek(o,t,e,n,r,i);return s!==cn&&Qb(o,On(),s),Fl}function Qb(t,e,n){let r=Op(e,t);Sx(t[be],r,n)}function jl(t,e,n){Yp(e)&&(e=e());let r=ve(),i=el();if(mo(r,i,e)){let o=qt(),s=zw();Yx(s,r,t,e,r[be],n)}return jl}function cm(t,e){let n=Yp(t);return n&&t.set(e),n}function Ul(t,e){let n=ve(),r=qt(),i=Tt();return Kb(r,n,n[be],i,t,e),Ul}function tk(t,e,n){let r=qt();if(r.firstCreatePass){let i=on(t);xg(n,r.data,r.blueprint,i,!0),xg(e,r.data,r.blueprint,i,!1)}}function xg(t,e,n,r,i){if(t=Ke(t),Array.isArray(t))for(let o=0;o<t.length;o++)xg(t[o],e,n,r,i);else{let o=qt(),s=ve(),c=Tt(),u=Jr(t)?t:Ke(t.provide),l=Rp(t),f=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(Jr(t)||!t.multi){let y=new ci(l,i,Ce,null),C=ug(u,e,i?f:f+m,p);C===-1?(dg(pl(c,s),o,u),cg(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=ug(u,e,f+m,p),C=ug(u,e,f,f+m),N=y>=0&&n[y],A=C>=0&&n[C];if(i&&!A||!i&&!N){dg(pl(c,s),o,u);let k=ik(i?rk:nk,n.length,i,r,l,t);!i&&A&&(n[C].providerFactory=k),cg(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=Yb(n[i?C:y],l,!i&&r);cg(o,t,y>-1?y:C,k)}!i&&r&&A&&n[C].componentProviders++}}}function cg(t,e,n,r){let i=Jr(e),o=vw(e);if(i||o){let u=(o?Ke(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function Yb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ug(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function nk(t,e,n,r,i){return Og(this.multi,[])}function rk(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=gl(r,r[W],this.providerFactory.index,i);s=u.slice(0,c),Og(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],Og(o,s);return s}function Og(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ik(t,e,n,r,i,o){let s=new ci(t,n,Ce,null);return s.multi=[],s.index=e,s.componentProviders=0,Yb(s,i,r&&!n),s}function Aa(t,e=[]){return n=>{n.providersResolver=(r,i)=>tk(r,i?i(t):t,e)}}var Cl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},um=(()=>{class t{compileModuleSync(n){return new El(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Cp(n),o=ib(i.declarations).reduce((s,c)=>{let u=fr(c);return u&&s.push(new yo(u)),s},[]);return new Cl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ok=(()=>{class t{zone=x(ke);changeDetectionScheduler=x(lr);applicationRef=x(vr);applicationErrorHandler=x(Ot);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Jb({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ke(H(R({},Zb()),{scheduleInRootZone:n})),[{provide:ke,useFactory:t},{provide:Pn,multi:!0,useFactory:()=>{let r=x(ok,{optional:!0});return()=>r.initialize()}},{provide:Pn,multi:!0,useFactory:()=>{let r=x(sk);return()=>{r.initialize()}}},e===!0?{provide:Jp,useValue:!0}:[],{provide:sl,useValue:n??jb},{provide:Ot,useFactory:()=>{let r=x(ke),i=x(Qe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(nn),o.handleError(s))})}}}]}function Zb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sk=(()=>{class t{subscription=new Se;initialized=!1;zone=x(ke);pendingTasks=x(kn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var lm=(()=>{class t{applicationErrorHandler=x(Ot);appRef=x(vr);taskService=x(kn);ngZone=x(ke);zonelessEnabled=x(ca);tracing=x(Ca,{optional:!0});disableScheduling=x(Jp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Se;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(sl,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ma||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?vT:Ub;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dm(){return wa("NgZoneless"),ti([{provide:lr,useExisting:lm},{provide:ke,useClass:ma},{provide:ca,useValue:!0},{provide:sl,useValue:!1},[]])}function ak(){return typeof $localize<"u"&&$localize.locale||Sa}var hm=new j("",{providedIn:"root",factory:()=>x(hm,{optional:!0,skipSelf:!0})||ak()});function un(t){return rw(t)}function Co(t,e){return pu(t,e?.equal)}var Xb=class{[it];constructor(e){this[it]=e}destroy(){this[it].destroy()}};var nC=Symbol("InputSignalNode#UNSET"),yk=H(R({},gu),{transformFn:void 0,applyValueToInputSignal(t,e){zi(t,e)}});function rC(t,e){let n=Object.create(yk);n.value=t,n.transformFn=e?.transform;function r(){if(Hi(n),n.value===nC){let i=null;throw new F(-950,i)}return n.value}return r[it]=n,r}var vk=new j("");vk.__NG_ELEMENT_ID__=t=>{let e=Tt();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new F(204,!1)};function eC(t,e){return rC(t,e)}function _k(t){return rC(nC,t)}var iC=(eC.required=_k,eC);var fm=new j(""),Ik=new j("");function Ra(t){return!t.moduleRef}function Ek(t){let e=Ra(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ke);return n.run(()=>{Ra(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ot),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ra(t)){let o=()=>e.destroy(),s=t.platformInjector.get(fm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(fm);s.add(o),t.moduleRef.onDestroy(()=>{da(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Tk(r,n,()=>{let o=e.get(kn),s=o.add(),c=e.get(om);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(hm,Sa);if(Wb(u||Sa),!e.get(Ik,!0))return Ra(t)?e.get(vr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ra(t)){let f=e.get(vr);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return wk?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var wk;function Tk(t,e,n){try{let r=n();return hi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Bl=null;function bk(t=[],e){return Bt.create({name:e,providers:[{provide:Zs,useValue:"platform"},{provide:fm,useValue:new Set([()=>Bl=null])},...t]})}function Ck(t=[]){if(Bl)return Bl;let e=bk(t);return Bl=e,zb(),Sk(e),e}function Sk(t){let e=t.get(Dl,null);lt(t,()=>{e?.forEach(n=>n())})}var Hl=(()=>{class t{static __NG_ELEMENT_ID__=Dk}return t})();function Dk(t){return Ak(Tt(),ve(),(t&16)===16)}function Ak(t,e,n){if(gr(t)&&!n){let r=xt(t.index,e);return new ui(r,r)}else if(t.type&175){let r=e[Et];return new ui(r,e)}return null}function oC(t){me(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Ck(r),o=[Jb({}),{provide:lr,useExisting:lm},Kw,...n||[]],s=new ga({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Ek({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{me(9)}}function pm(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var cC=null;function Lt(){return cC}function gm(t){cC??=t}var Na=class{},mm=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(uC),providedIn:"platform"})}return t})();var uC=(()=>{class t extends mm{_location;_history;_doc=x(Ue);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lt().getBaseHref(this._doc)}onPopState(n){let r=Lt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Lt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function lC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function sC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function _r(t){return t&&t[0]!=="?"?`?${t}`:t}var $l=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(hC),providedIn:"root"})}return t})(),dC=new j(""),hC=(()=>{class t extends $l{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return lC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+_r(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ee(mm),ee(dC,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),So=(()=>{class t{_subject=new xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Mk(sC(aC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+_r(r))}normalize(n){return t.stripTrailingSlash(Nk(this._basePath,aC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_r(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+_r(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=_r;static joinWithSlash=lC;static stripTrailingSlash=sC;static \u0275fac=function(r){return new(r||t)(ee($l))};static \u0275prov=$({token:t,factory:()=>Rk(),providedIn:"root"})}return t})();function Rk(){return new So(ee($l))}function Nk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aC(t){return t.replace(/\/index.html$/,"")}function Mk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ym(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ma=class{};var fC="browser";var zl=new j(""),wm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new F(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ee(zl),ee(ke))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Pa=class{_doc;constructor(e){this._doc=e}manager},vm="ng-app-id";function pC(t){for(let e of t)e.remove()}function gC(t,e){let n=e.createElement("style");return n.textContent=t,n}function Pk(t,e,n,r){let i=t.head?.querySelectorAll(`style[${vm}="${e}"],link[${vm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(vm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Im(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Tm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,Pk(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,gC);r?.forEach(i=>this.addUsage(i,this.external,Im))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(pC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])pC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,gC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Im(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ee(Ue),ee(Sl),ee(Al,8),ee(Eo))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),_m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bm=/%COMP%/g;var yC="%COMP%",xk=`_nghost-${yC}`,Ok=`_ngcontent-${yC}`,kk=!0,Lk=new j("",{providedIn:"root",factory:()=>kk});function Vk(t){return Ok.replace(bm,t)}function Fk(t){return xk.replace(bm,t)}function vC(t,e){return e.map(n=>n.replace(bm,t))}var Cm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,c,u,l=null,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new xa(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof ql?i.applyToHost(n):i instanceof Oa&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Ln.Emulated:o=new ql(u,l,r,this.appId,f,s,c,p,m);break;case Ln.ShadowDom:return new Em(u,l,n,r,s,c,this.nonce,p,m);default:o=new Oa(u,l,r,f,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ee(wm),ee(Tm),ee(Sl),ee(Lk),ee(Ue),ee(Eo),ee(ke),ee(Al),ee(Ca,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),xa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(_m[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(mC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(mC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new F(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=_m[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=_m[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Vn.DashCase|Vn.Important)?e.style.setProperty(n,r,i&Vn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Vn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Lt().getGlobalEventTarget(this.doc,e),!e))throw new F(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function mC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Em=class extends xa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=vC(i.id,f);for(let m of f){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Im(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Oa=class extends xa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?vC(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ql=class extends Oa{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,c,u,l,f),this.contentAttr=Vk(f),this.hostAttr=Fk(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Gl=class t extends Na{supportsDOMEvents=!0;static makeCurrent(){gm(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=jk();return n==null?null:Uk(n)}resetBaseElement(){ka=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ym(document.cookie,e)}},ka=null;function jk(){return ka=ka||document.head.querySelector("base"),ka?ka.getAttribute("href"):null}function Uk(t){return new URL(t,document.baseURI).pathname}var Bk=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),IC=(()=>{class t extends Pa{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ee(Ue))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),_C=["alt","control","meta","shift"],Hk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$k={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},EC=(()=>{class t extends Pa{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lt().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),_C.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=Hk[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),_C.forEach(s=>{if(s!==i){let c=$k[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ee(Ue))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function Sm(t,e){let n=R({rootComponent:t},qk(e));return oC(n)}function qk(t){return{appProviders:[...Qk,...t?.providers??[]],platformProviders:Kk}}function zk(){Gl.makeCurrent()}function Gk(){return new nn}function Wk(){return Fg(document),document}var Kk=[{provide:Eo,useValue:fC},{provide:Dl,useValue:zk,multi:!0},{provide:Ue,useFactory:Wk}];var Qk=[{provide:Zs,useValue:"root"},{provide:nn,useFactory:Gk},{provide:zl,useClass:IC,multi:!0,deps:[Ue]},{provide:zl,useClass:EC,multi:!0,deps:[Ue]},Cm,Tm,wm,{provide:li,useExisting:Cm},{provide:Ma,useClass:Bk},[]];var wC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ee(Ue))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var X="primary",Ya=Symbol("RouteTitle"),Mm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yi(t){return new Mm(t)}function NC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jk(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ln(t[n],e[n]))return!1;return!0}function ln(t,e){let n=t?Pm(t):void 0,r=e?Pm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!MC(t[i],e[i]))return!1;return!0}function Pm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function MC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function PC(t){return t.length>0?t[t.length-1]:null}function Hn(t){return Wf(t)?t:hi(t)?we(Promise.resolve(t)):G(t)}var Zk={exact:OC,subset:kC},xC={exact:Xk,subset:e1,ignored:()=>!0};function TC(t,e,n){return Zk[n.paths](t.root,e.root,n.matrixParams)&&xC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Xk(t,e){return ln(t,e)}function OC(t,e,n){if(!gi(t.segments,e.segments)||!Ql(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!OC(t.children[r],e.children[r],n))return!1;return!0}function e1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>MC(t[n],e[n]))}function kC(t,e,n){return LC(t,e,e.segments,n)}function LC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!gi(i,n)||e.hasChildren()||!Ql(i,n,r))}else if(t.segments.length===n.length){if(!gi(t.segments,n)||!Ql(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!kC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!gi(t.segments,i)||!Ql(t.segments,i,r)||!t.children[X]?!1:LC(t.children[X],e,o,r)}}function Ql(t,e,n){return e.every((r,i)=>xC[n](t[i].parameters,r.parameters))}var hn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new he([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){return r1.serialize(this)}},he=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yl(this)}},Ir=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yi(this.parameters),this._parameterMap}toString(){return FC(this)}};function t1(t,e){return gi(t,e)&&t.every((n,r)=>ln(n.parameters,e[r].parameters))}function gi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function n1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var Ja=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new vi,providedIn:"root"})}return t})(),vi=class{parse(e){let n=new Om(e);return new hn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${La(e.root,!0)}`,r=s1(e.queryParams),i=typeof e.fragment=="string"?`#${i1(e.fragment)}`:"";return`${n}${r}${i}`}},r1=new vi;function Yl(t){return t.segments.map(e=>FC(e)).join("/")}function La(t,e){if(!t.hasChildren())return Yl(t);if(e){let n=t.children[X]?La(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${La(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=n1(t,(r,i)=>i===X?[La(t.children[X],!1)]:[`${i}:${La(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${Yl(t)}/${n[0]}`:`${Yl(t)}/(${n.join("//")})`}}function VC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wl(t){return VC(t).replace(/%3B/gi,";")}function i1(t){return encodeURI(t)}function xm(t){return VC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jl(t){return decodeURIComponent(t)}function bC(t){return Jl(t.replace(/\+/g,"%20"))}function FC(t){return`${xm(t.path)}${o1(t.parameters)}`}function o1(t){return Object.entries(t).map(([e,n])=>`;${xm(e)}=${xm(n)}`).join("")}function s1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wl(n)}=${Wl(i)}`).join("&"):`${Wl(n)}=${Wl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var a1=/^[^\/()?;#]+/;function Dm(t){let e=t.match(a1);return e?e[0]:""}var c1=/^[^\/()?;=#]+/;function u1(t){let e=t.match(c1);return e?e[0]:""}var l1=/^[^=?&#]+/;function d1(t){let e=t.match(l1);return e?e[0]:""}var h1=/^[^&#]+/;function f1(t){let e=t.match(h1);return e?e[0]:""}var Om=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new he(e,n)),r}parseSegment(){let e=Dm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new Ir(Jl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=u1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Dm(this.remaining);i&&(r=i,this.capture(r))}e[Jl(n)]=Jl(r)}parseQueryParam(e){let n=d1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=f1(this.remaining);s&&(r=s,this.capture(r))}let i=bC(n),o=bC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Dm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new F(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[X]:new he([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function jC(t){return t.segments.length>0?new he([],{[X]:t}):t}function UC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=UC(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new he(t.segments,e);return p1(n)}function p1(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new he(t.segments.concat(e.segments),e.children)}return t}function Mo(t){return t instanceof hn}function BC(t,e,n=null,r=null){let i=HC(t);return $C(i,e,n,r)}function HC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new he(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=jC(r);return e??i}function $C(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Am(i,i,i,n,r);let o=g1(e);if(o.toRoot())return Am(i,i,new he([],{}),n,r);let s=m1(o,i,t),c=s.processChildren?Fa(s.segmentGroup,s.index,o.commands):zC(s.segmentGroup,s.index,o.commands);return Am(i,s.segmentGroup,c,n,r)}function Zl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ba(t){return typeof t=="object"&&t!=null&&t.outlets}function Am(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;t===e?s=n:s=qC(t,e,n);let c=jC(UC(s));return new hn(c,o,i)}function qC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=qC(o,e,n)}),new he(t.segments,r)}var Xl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zl(r[0]))throw new F(4003,!1);let i=r.find(Ba);if(i&&i!==PC(r))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function g1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Xl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Xl(n,e,r)}var Ro=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function m1(t,e,n){if(t.isAbsolute)return new Ro(e,!0,0);if(!n)return new Ro(e,!1,NaN);if(n.parent===null)return new Ro(n,!0,0);let r=Zl(t.commands[0])?0:1,i=n.segments.length-1+r;return y1(n,i,t.numberOfDoubleDots)}function y1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new F(4005,!1);i=r.segments.length}return new Ro(r,!1,i-o)}function v1(t){return Ba(t[0])?t[0].outlets:{[X]:t}}function zC(t,e,n){if(t??=new he([],{}),t.segments.length===0&&t.hasChildren())return Fa(t,e,n);let r=_1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new he(t.segments.slice(0,r.pathIndex),{});return o.children[X]=new he(t.segments.slice(r.pathIndex),t.children),Fa(o,0,i)}else return r.match&&i.length===0?new he(t.segments,{}):r.match&&!t.hasChildren()?km(t,e,n):r.match?Fa(t,0,i):km(t,e,n)}function Fa(t,e,n){if(n.length===0)return new he(t.segments,{});{let r=v1(n),i={};if(Object.keys(r).some(o=>o!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let o=Fa(t.children[X],e,n);return new he(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new he(t.segments,i)}}function _1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(Ba(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!SC(u,l,s))return o;r+=2}else{if(!SC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function km(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ba(o)){let u=I1(o.outlets);return new he(r,u)}if(i===0&&Zl(n[0])){let u=t.segments[e];r.push(new Ir(u.path,CC(n[0]))),i++;continue}let s=Ba(o)?o.outlets[X]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&Zl(c)?(r.push(new Ir(s,CC(c))),i+=2):(r.push(new Ir(s,{})),i++)}return new he(r,{})}function I1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=km(new he([],{}),0,r))}),e}function CC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function SC(t,e,n){return t==n.path&&ln(e,n.parameters)}var ja="imperative",Be=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Be||{}),Ct=class{id;url;constructor(e,n){this.id=e,this.url=n}},_i=class extends Ct{type=Be.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Un=class extends Ct{urlAfterRedirects;type=Be.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(dt||{}),Ha=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ha||{}),dn=class extends Ct{reason;code;type=Be.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bn=class extends Ct{reason;code;type=Be.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Po=class extends Ct{error;target;type=Be.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$a=class extends Ct{urlAfterRedirects;state;type=Be.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ed=class extends Ct{urlAfterRedirects;state;type=Be.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},td=class extends Ct{urlAfterRedirects;state;shouldActivate;type=Be.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},nd=class extends Ct{urlAfterRedirects;state;type=Be.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rd=class extends Ct{urlAfterRedirects;state;type=Be.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},id=class{route;type=Be.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},od=class{route;type=Be.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sd=class{snapshot;type=Be.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ad=class{snapshot;type=Be.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cd=class{snapshot;type=Be.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ud=class{snapshot;type=Be.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var qa=class{},xo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function E1(t){return!(t instanceof qa)&&!(t instanceof xo)}function w1(t,e){return t.providers&&!t._injector&&(t._injector=Ta(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Qt(t){return t.outlet||X}function T1(t,e){let n=t.filter(r=>Qt(r)===e);return n.push(...t.filter(r=>Qt(r)!==e)),n}function Lo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ld=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Lo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Vo(this.rootInjector)}},Vo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new ld(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ee(Qe))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Lm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Lm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Vm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vm(e,this._root).map(n=>n.value)}};function Lm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Lm(t,n);if(r)return r}return null}function Vm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Vm(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ao(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var za=class extends dd{snapshot;constructor(e,n){super(e),this.snapshot=n,zm(this,e)}toString(){return this.snapshot.toString()}};function GC(t){let e=b1(t),n=new We([new Ir("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),c=new Er(n,r,o,s,i,X,t,e.root);return c.snapshot=e.root,new za(new bt(c,[]),e)}function b1(t){let e={},n={},r={},i="",o=new mi([],e,r,i,n,X,t,null,{});return new Ga("",new bt(o,[]))}var Er=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[Ya]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>yi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>yi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:R(R({},e.params),t.params),data:R(R({},e.data),t.data),resolve:R(R(R(R({},t.data),e.data),i?.data),t._resolvedData)}:r={params:R({},t.params),data:R({},t.data),resolve:R(R({},t.data),t._resolvedData??{})},i&&KC(i)&&(r.resolve[Ya]=i.title),r}var mi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ya]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ga=class extends dd{url;constructor(e,n){super(n),this.url=e,zm(this,n)}toString(){return WC(this._root)}};function zm(t,e){e.value._routerState=t,e.children.forEach(n=>zm(t,n))}function WC(t){let e=t.children.length>0?` { ${t.children.map(WC).join(", ")} } `:"";return`${t.value}${e}`}function Rm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ln(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ln(e.params,n.params)||t.paramsSubject.next(n.params),Jk(e.url,n.url)||t.urlSubject.next(n.url),ln(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Fm(t,e){let n=ln(t.params,e.params)&&t1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Fm(t.parent,e.parent))}function KC(t){return typeof t.title=="string"||t.title===null}var QC=new j(""),Za=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new Ae;deactivateEvents=new Ae;attachEvents=new Ae;detachEvents=new Ae;routerOutletData=iC(void 0);parentContexts=x(Vo);location=x(Ol);changeDetector=x(Hl);inputBinder=x(md,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new jm(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_a]})}return t})(),jm=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Er?this.route:e===Vo?this.childContexts:e===QC?this.outletData:this.parent.get(e,n)}},md=new j("");var Gm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ba({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&bo(0,"router-outlet")},dependencies:[Za],encapsulation:2})}return t})();function Wm(t){let e=t.children&&t.children.map(Wm),n=e?H(R({},t),{children:e}):R({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=Gm),n}function C1(t,e,n){let r=Wa(t,e._root,n?n._root:void 0);return new za(r,e)}function Wa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=S1(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Wa(t,c)),s}}let r=D1(e.value),i=e.children.map(o=>Wa(t,o));return new bt(r,i)}}function S1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Wa(t,r,i);return Wa(t,r)})}function D1(t){return new Er(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var Oo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},YC="ngNavigationCancelingError";function fd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Mo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JC(!1,dt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function JC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[YC]=!0,n.cancellationCode=e,n}function A1(t){return ZC(t)&&Mo(t.url)}function ZC(t){return!!t&&t[YC]}var R1=(t,e,n,r)=>ie(i=>(new Um(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Um=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Rm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ao(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ao(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ao(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ao(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ud(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ad(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Rm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Rm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},pd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},No=class{component;route;constructor(e,n){this.component=e,this.route=n}};function N1(t,e,n){let r=t._root,i=e?e._root:null;return Va(r,i,n,[r.value])}function M1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Fo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fp(t)?t:e.get(t):r}function Va(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ao(e);return t.children.forEach(s=>{P1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Ua(c,n.getContext(s),i)),i}function P1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=x1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new pd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Va(t,e,c?c.children:null,r,i):Va(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new No(c.outlet.component,s))}else s&&Ua(e,c,i),i.canActivateChecks.push(new pd(r)),o.component?Va(t,null,c?c.children:null,r,i):Va(t,null,n,r,i);return i}function x1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!gi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!gi(t.url,e.url)||!ln(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fm(t,e)||!ln(t.queryParams,e.queryParams);case"paramsChange":default:return!Fm(t,e)}}function Ua(t,e,n){let r=Ao(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ua(s,e.children.getContext(o),n):Ua(s,null,n):Ua(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new No(e.outlet.component,i)):n.canDeactivateChecks.push(new No(null,i)):n.canDeactivateChecks.push(new No(null,i))}function Xa(t){return typeof t=="function"}function O1(t){return typeof t=="boolean"}function k1(t){return t&&Xa(t.canLoad)}function L1(t){return t&&Xa(t.canActivate)}function V1(t){return t&&Xa(t.canActivateChild)}function F1(t){return t&&Xa(t.canDeactivate)}function j1(t){return t&&Xa(t.canMatch)}function XC(t){return t instanceof Dn||t?.name==="EmptyError"}var Kl=Symbol("INITIAL_VALUE");function ko(){return Rt(t=>Vu(t.map(e=>e.pipe(An(1),Jf(Kl)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===Kl)return Kl;if(n===!1||U1(n))return n}return!0}),At(e=>e!==Kl),An(1)))}function U1(t){return Mo(t)||t instanceof Oo}function B1(t,e){return Oe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?G(H(R({},n),{guardsResult:!0})):H1(s,r,i,t).pipe(Oe(c=>c&&O1(c)?$1(r,o,t,e):G(c)),ie(c=>H(R({},n),{guardsResult:c})))})}function H1(t,e,n,r){return we(t).pipe(Oe(i=>K1(i.component,i.route,n,e,r)),Rn(i=>i!==!0,!0))}function $1(t,e,n,r){return we(e).pipe(to(i=>eo(z1(i.route.parent,r),q1(i.route,r),W1(t,i.path,n),G1(t,i.route,n))),Rn(i=>i!==!0,!0))}function q1(t,e){return t!==null&&e&&e(new cd(t)),G(!0)}function z1(t,e){return t!==null&&e&&e(new sd(t)),G(!0)}function G1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(o=>$s(()=>{let s=Lo(e)??n,c=Fo(o,s),u=L1(c)?c.canActivate(e,t):lt(s,()=>c(e,t));return Hn(u).pipe(Rn())}));return G(i).pipe(ko())}function W1(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>M1(s)).filter(s=>s!==null).map(s=>$s(()=>{let c=s.guards.map(u=>{let l=Lo(s.node)??n,f=Fo(u,l),p=V1(f)?f.canActivateChild(r,t):lt(l,()=>f(r,t));return Hn(p).pipe(Rn())});return G(c).pipe(ko())}));return G(o).pipe(ko())}function K1(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let s=o.map(c=>{let u=Lo(e)??i,l=Fo(c,u),f=F1(l)?l.canDeactivate(t,e,n,r):lt(u,()=>l(t,e,n,r));return Hn(f).pipe(Rn())});return G(s).pipe(ko())}function Q1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let o=i.map(s=>{let c=Fo(s,t),u=k1(c)?c.canLoad(e,n):lt(t,()=>c(e,n));return Hn(u)});return G(o).pipe(ko(),eS(r))}function eS(t){return $f(Ve(e=>{if(typeof e!="boolean")throw fd(t,e)}),ie(e=>e===!0))}function Y1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let o=i.map(s=>{let c=Fo(s,t),u=j1(c)?c.canMatch(e,n):lt(t,()=>c(e,n));return Hn(u)});return G(o).pipe(ko(),eS(r))}var Ka=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Qa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Do(t){return Xi(new Ka(t))}function J1(t){return Xi(new F(4e3,!1))}function Z1(t){return Xi(JC(!1,dt.GuardRejected))}var Bm=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[X])return J1(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,n,r,i,o){return X1(n,i,o).pipe(ie(s=>{if(s instanceof hn)throw new Qa(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Qa(c);return c}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new hn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new he(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new F(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function X1(t,e,n){if(typeof t=="string")return G(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:f,title:p}=e;return Hn(lt(n,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p})))}var Hm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eL(t,e,n,r,i){let o=tS(t,e,n);return o.matched?(r=w1(e,r),Y1(r,e,n,i).pipe(ie(s=>s===!0?o:R({},Hm)))):G(o)}function tS(t,e,n){if(e.path==="**")return tL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?R({},Hm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||NC)(n,t,e);if(!i)return R({},Hm);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?R(R({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function tL(t){return{matched:!0,parameters:t.length>0?PC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function DC(t,e,n,r){return n.length>0&&iL(t,n,r)?{segmentGroup:new he(e,rL(r,new he(n,t.children))),slicedSegments:[]}:n.length===0&&oL(t,n,r)?{segmentGroup:new he(t.segments,nL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new he(t.segments,t.children),slicedSegments:n}}function nL(t,e,n,r){let i={};for(let o of n)if(yd(t,e,o)&&!r[Qt(o)]){let s=new he([],{});i[Qt(o)]=s}return R(R({},r),i)}function rL(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&Qt(r)!==X){let i=new he([],{});n[Qt(r)]=i}return n}function iL(t,e,n){return n.some(r=>yd(t,e,r)&&Qt(r)!==X)}function oL(t,e,n){return n.some(r=>yd(t,e,r))}function yd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function sL(t,e,n){return e.length===0&&!t.children[n]}var $m=class{};function aL(t,e,n,r,i,o,s="emptyOnly"){return new qm(t,e,n,r,i,s,o).recognize()}var cL=31,qm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Bm(this.urlSerializer,this.urlTree)}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=DC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:n,rootSnapshot:r})=>{let i=new bt(r,n),o=new Ga("",i),s=BC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new mi([],Object.freeze({}),Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,n).pipe(ie(r=>({children:r,rootSnapshot:n})),ar(r=>{if(r instanceof Qa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ka?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ie(s=>s instanceof bt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return we(o).pipe(to(s=>{let c=r.children[s],u=T1(n,s);return this.processSegmentGroup(e,u,c,s,i)}),Yf((s,c)=>(s.push(...c),s)),cr(null),Qf(),Oe(s=>{if(s===null)return Do(r);let c=nS(s);return uL(c),G(c)}))}processSegment(e,n,r,i,o,s,c){return we(n).pipe(to(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c).pipe(ar(l=>{if(l instanceof Ka)return G(null);throw l}))),Rn(u=>!!u),ar(u=>{if(XC(u))return sL(r,i,o)?G(new $m):Do(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,c,u){return Qt(r)!==s&&(s===X||!yd(i,o,r))?Do(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Do(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=tS(n,i,o);if(!u)return Do(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cL&&(this.allowRedirects=!1));let y=new mi(o,l,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,AC(i),Qt(i),i.component??i._loadedComponent??null,i,RC(i)),C=hd(y,c,this.paramsInheritanceStrategy);return y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e).pipe(Rt(A=>this.applyRedirects.lineralizeSegments(i,A)),Oe(A=>this.processSegment(e,r,n,A.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let c=eL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(Rt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Rt(({routes:l})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new mi(m,p,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,AC(r),Qt(r),r.component??r._loadedComponent??null,r,RC(r)),N=hd(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:A,slicedSegments:k}=DC(n,m,y,l);if(k.length===0&&A.hasChildren())return this.processChildren(f,l,A,C).pipe(ie(te=>new bt(C,te)));if(l.length===0&&k.length===0)return G(new bt(C,[]));let z=Qt(r)===o;return this.processSegment(f,l,A,k,z?X:o,!0,C).pipe(ie(te=>new bt(C,te instanceof bt?[te]:[])))}))):Do(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):Q1(e,n,r,this.urlSerializer).pipe(Oe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ve(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Z1(n))):G({routes:[],injector:e})}};function uL(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function lL(t){let e=t.value.routeConfig;return e&&e.path===""}function nS(t){let e=[],n=new Set;for(let r of t){if(!lL(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nS(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function AC(t){return t.data||{}}function RC(t){return t.resolve||{}}function dL(t,e,n,r,i,o){return Oe(s=>aL(t,e,n,r,s.extractedUrl,i,o).pipe(ie(({state:c,tree:u})=>H(R({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function hL(t,e){return Oe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of rS(u))s.add(l);let c=0;return we(s).pipe(to(u=>o.has(u)?fL(u,r,t,e):(u.data=hd(u,u.parent,t).resolve,G(void 0))),Ve(()=>c++),no(1),Oe(u=>c===s.size?G(n):ft))})}function rS(t){let e=t.children.map(n=>rS(n)).flat();return[t,...e]}function fL(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!KC(i)&&(o[Ya]=i.title),$s(()=>(t.data=hd(t,t.parent,n).resolve,pL(o,t,e,r).pipe(ie(s=>(t._resolvedData=s,t.data=R(R({},t.data),s),null)))))}function pL(t,e,n,r){let i=Pm(t);if(i.length===0)return G({});let o={};return we(i).pipe(Oe(s=>gL(t[s],e,n,r).pipe(Rn(),Ve(c=>{if(c instanceof Oo)throw fd(new vi,c);o[s]=c}))),no(1),ie(()=>o),ar(s=>XC(s)?ft:Xi(s)))}function gL(t,e,n,r){let i=Lo(e)??r,o=Fo(t,i),s=o.resolve?o.resolve(e,n):lt(i,()=>o(e,n));return Hn(s)}function Nm(t){return Rt(e=>{let n=t(e);return n?we(n).pipe(ie(()=>e)):G(e)})}var Km=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(n){return n.data[Ya]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(iS),providedIn:"root"})}return t})(),iS=(()=>{class t extends Km{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ee(wC))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ec=new j("",{providedIn:"root",factory:()=>({})}),tc=new j(""),oS=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(um);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return G(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Hn(lt(n,()=>r.loadComponent())).pipe(ie(aS),Ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),qs(()=>{this.componentLoaders.delete(r)})),o=new Zi(i,()=>new xe).pipe(Ji());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=sS(r,this.compiler,n,this.onLoadEndListener).pipe(qs(()=>{this.childrenLoaders.delete(r)})),s=new Zi(o,()=>new xe).pipe(Ji());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sS(t,e,n,r){return Hn(lt(n,()=>t.loadChildren())).pipe(ie(aS),Oe(i=>i instanceof kl||Array.isArray(i)?G(i):we(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(n).injector,s=o.get(tc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Wm),injector:o}}))}function mL(t){return t&&typeof t=="object"&&"default"in t}function aS(t){return mL(t)?t.default:t}var vd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(yL),providedIn:"root"})}return t})(),yL=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cS=new j("");var uS=new j(""),lS=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new xe;transitionAbortWithErrorSubject=new xe;configLoader=x(oS);environmentInjector=x(Qe);destroyRef=x(yr);urlSerializer=x(Ja);rootContexts=x(Vo);location=x(So);inputBindingEnabled=x(md,{optional:!0})!==null;titleStrategy=x(Km);options=x(ec,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(vd);createViewTransition=x(cS,{optional:!0});navigationErrorHandler=x(uS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>G(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new id(i)),r=i=>this.events.next(new od(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(H(R({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new We(null),this.transitions.pipe(At(r=>r!==null),Rt(r=>{let i=!1;return G(r).pipe(Rt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",dt.SupersededByNewNavigation),ft;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?H(R({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&c!=="reload"){let u="";return this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.rawUrl),u,Ha.IgnoredSameUrlNavigation)),o.resolve(!1),ft}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return G(o).pipe(Rt(u=>(this.events.next(new _i(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?ft:Promise.resolve(u))),dL(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=H(R({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new $a(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:f,restoredState:p,extras:m}=o,y=new _i(u,this.urlSerializer.serialize(l),f,p);this.events.next(y);let C=GC(this.rootComponentType).snapshot;return this.currentTransition=r=H(R({},o),{targetSnapshot:C,urlAfterRedirects:l,extras:H(R({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,G(r)}else{let u="";return this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.extractedUrl),u,Ha.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ft}}),Ve(o=>{let s=new ed(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ie(o=>(this.currentTransition=r=H(R({},o),{guards:N1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),B1(this.environmentInjector,o=>this.events.next(o)),Ve(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw fd(this.urlSerializer,o.guardsResult);let s=new td(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),At(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",dt.GuardRejected),!1)),Nm(o=>{if(o.guards.canActivateChecks.length!==0)return G(o).pipe(Ve(s=>{let c=new nd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Rt(s=>{let c=!1;return G(s).pipe(hL(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",dt.NoDataFromResolver)}}))}),Ve(s=>{let c=new rd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),Nm(o=>{let s=c=>{let u=[];if(c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent){let l=Lo(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,c.routeConfig).pipe(Ve(f=>{c.component=f}),ie(()=>{})))}for(let l of c.children)u.push(...s(l));return u};return Vu(s(o.targetSnapshot.root)).pipe(cr(null),An(1))}),Nm(()=>this.afterPreactivation()),Rt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?we(c).pipe(ie(()=>r)):G(r)}),ie(o=>{let s=C1(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=H(R({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ve(()=>{this.events.next(new qa)}),R1(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),An(1),ju(new ae(o=>{let s=r.abortController.signal,c=()=>o.next();return s.addEventListener("abort",c),()=>s.removeEventListener("abort",c)}).pipe(At(()=>!i&&!r.targetRouterState),Ve(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",dt.Aborted)}))),Ve({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Un(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ju(this.transitionAbortWithErrorSubject.pipe(Ve(o=>{throw o}))),qs(()=>{i||this.cancelNavigationTransition(r,"",dt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),ar(o=>{if(this.destroyed)return r.resolve(!1),ft;if(i=!0,ZC(o))this.events.next(new dn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),A1(o)?this.events.next(new xo(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Po(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=lt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof Oo){let{message:u,cancellationCode:l}=fd(this.urlSerializer,c);this.events.next(new dn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new xo(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return ft}))}))}cancelNavigationTransition(n,r,i){let o=new dn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vL(t){return t!==ja}var dS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(_L),providedIn:"root"})}return t})(),gd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},_L=(()=>{class t extends gd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Io(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hS=(()=>{class t{urlSerializer=x(Ja);options=x(ec,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(So);urlHandlingStrategy=x(vd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new hn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof hn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=GC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>x(IL),providedIn:"root"})}return t})(),IL=(()=>{class t extends hS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof _i?this.updateStateMemento():n instanceof Bn?this.commitTransition(r):n instanceof $a?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof qa?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof dn&&n.code!==dt.SupersededByNewNavigation&&n.code!==dt.Redirect?this.restoreHistory(r):n instanceof Po?this.restoreHistory(r,!0):n instanceof Un&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=R(R({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=R(R({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Io(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qm(t,e){t.events.pipe(At(n=>n instanceof Un||n instanceof dn||n instanceof Po||n instanceof Bn),ie(n=>n instanceof Un||n instanceof Bn?0:(n instanceof dn?n.code===dt.Redirect||n.code===dt.SupersededByNewNavigation:!1)?2:1),At(n=>n!==2),An(1)).subscribe(()=>{e()})}var EL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_d=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(rm);stateManager=x(hS);options=x(ec,{optional:!0})||{};pendingTasks=x(kn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(lS);urlSerializer=x(Ja);location=x(So);urlHandlingStrategy=x(vd);injector=x(Qe);_events=new xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(dS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(tc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(md,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Se;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof dn&&r.code!==dt.Redirect&&r.code!==dt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Un)this.navigated=!0;else if(r instanceof xo){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=R({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||vL(i.source)},s);this.scheduleNavigation(c,ja,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}E1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ja,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=R({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Ot)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Wm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=R(R({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=HC(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return $C(p,n,f,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Mo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ja,null,r)}navigate(n,r={skipLocationChange:!1}){return TL(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=R({},EL):r===!1?i=R({},wL):i=r,Mo(n))return TC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return TC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let f=this.pendingTasks.add();return Qm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new F(4008,!1)}var CL=new j("");function Ym(t,...e){return ti([{provide:tc,multi:!0,useValue:t},[],{provide:Er,useFactory:SL,deps:[_d]},{provide:Ll,multi:!0,useFactory:DL},e.map(n=>n.\u0275providers)])}function SL(t){return t.routerState.root}function DL(){let t=x(Bt);return e=>{let n=t.get(vr);if(e!==n.components[0])return;let r=t.get(_d),i=t.get(AL);t.get(RL)===1&&r.initialNavigation(),t.get(NL,null,{optional:!0})?.setUpPreloading(),t.get(CL,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var AL=new j("",{factory:()=>new xe}),RL=new j("",{providedIn:"root",factory:()=>1});var NL=new j("");var fS=[];var pS={providers:[Kp(),dm(),Ym(fS)]};var wS=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Ce(xl),Ce(Ia))};static \u0275dir=kt({type:t})}return t})(),PL=(()=>{class t extends wS{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Io(t)))(i||t)}})();static \u0275dir=kt({type:t,features:[Fn]})}return t})(),TS=new j("");var xL={provide:TS,useExisting:dr(()=>Dd),multi:!0};function OL(){let t=Lt()?Lt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var kL=new j(""),Dd=(()=>{class t extends wS{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!OL())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Ce(xl),Ce(Ia),Ce(kL,8))};static \u0275dir=kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&jn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Aa([xL]),Fn]})}return t})();var bS=new j(""),CS=new j("");function SS(t){return t!=null}function DS(t){return hi(t)?we(t):t}function AS(t){let e={};return t.forEach(n=>{e=n!=null?R(R({},e),n):e}),Object.keys(e).length===0?null:e}function RS(t,e){return e.map(n=>n(t))}function LL(t){return!t.validate}function NS(t){return t.map(e=>LL(e)?e:n=>e.validate(n))}function VL(t){if(!t)return null;let e=t.filter(SS);return e.length==0?null:function(n){return AS(RS(n,e))}}function ey(t){return t!=null?VL(NS(t)):null}function FL(t){if(!t)return null;let e=t.filter(SS);return e.length==0?null:function(n){let r=RS(n,e).map(DS);return Kf(r).pipe(ie(AS))}}function ty(t){return t!=null?FL(NS(t)):null}function gS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function jL(t){return t._rawValidators}function UL(t){return t._rawAsyncValidators}function Jm(t){return t?Array.isArray(t)?t:[t]:[]}function Ed(t,e){return Array.isArray(t)?t.includes(e):t===e}function mS(t,e){let n=Jm(e);return Jm(t).forEach(i=>{Ed(n,i)||n.push(i)}),n}function yS(t,e){return Jm(e).filter(n=>!Ed(t,n))}var wd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ey(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ty(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Bo=class extends wd{name;get formDirective(){return null}get path(){return null}},ac=class extends wd{_parent=null;name=null;valueAccessor=null},Td=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},BL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},XY=H(R({},BL),{"[class.ng-submitted]":"isSubmitted"}),MS=(()=>{class t extends Td{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Ce(ac,2))};static \u0275dir=kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Da("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Fn]})}return t})(),PS=(()=>{class t extends Td{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Ce(Bo,10))};static \u0275dir=kt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Da("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Fn]})}return t})();var nc="VALID",Id="INVALID",jo="PENDING",rc="DISABLED",wr=class{},bd=class extends wr{value;source;constructor(e,n){super(),this.value=e,this.source=n}},oc=class extends wr{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},sc=class extends wr{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Uo=class extends wr{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Zm=class extends wr{source;constructor(e){super(),this.source=e}},Xm=class extends wr{source;constructor(e){super(),this.source=e}};function xS(t){return(Ad(t)?t.validators:t)||null}function HL(t){return Array.isArray(t)?ey(t):t||null}function OS(t,e){return(Ad(e)?e.asyncValidators:t)||null}function $L(t){return Array.isArray(t)?ty(t):t||null}function Ad(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function qL(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new F(1e3,"");if(!r[n])throw new F(1001,"")}function zL(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new F(1002,"")})}var Cd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return un(this.statusReactive)}set status(e){un(()=>this.statusReactive.set(e))}_status=Co(()=>this.statusReactive());statusReactive=zt(void 0);get valid(){return this.status===nc}get invalid(){return this.status===Id}get pending(){return this.status==jo}get disabled(){return this.status===rc}get enabled(){return this.status!==rc}errors;get pristine(){return un(this.pristineReactive)}set pristine(e){un(()=>this.pristineReactive.set(e))}_pristine=Co(()=>this.pristineReactive());pristineReactive=zt(!0);get dirty(){return!this.pristine}get touched(){return un(this.touchedReactive)}set touched(e){un(()=>this.touchedReactive.set(e))}_touched=Co(()=>this.touchedReactive());touchedReactive=zt(!1);get untouched(){return!this.touched}_events=new xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yS(e,this._rawAsyncValidators))}hasValidator(e){return Ed(this._rawValidators,e)}hasAsyncValidator(e){return Ed(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(H(R({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new sc(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new sc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(H(R({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new oc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new oc(!0,r))}markAsPending(e={}){this.status=jo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Uo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(H(R({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=rc,this.errors=null,this._forEachChild(i=>{i.disable(H(R({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bd(this.value,r)),this._events.next(new Uo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(H(R({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=nc,this._forEachChild(r=>{r.enable(H(R({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(H(R({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nc||this.status===jo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bd(this.value,n)),this._events.next(new Uo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(H(R({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rc:nc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=jo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=DS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Uo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?rc:this.errors?Id:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jo)?jo:this._anyControlsHaveStatus(Id)?Id:nc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new oc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new sc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ad(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=HL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$L(this._rawAsyncValidators)}},Sd=class extends Cd{constructor(e,n,r){super(xS(n),OS(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){zL(this,!0,e),Object.keys(e).forEach(r=>{qL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ny=new j("",{providedIn:"root",factory:()=>ry}),ry="always";function GL(t,e){return[...e.path,t]}function kS(t,e,n=ry){LS(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),KL(t,e),YL(t,e),QL(t,e),WL(t,e)}function vS(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function WL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function LS(t,e){let n=jL(t);e.validator!==null?t.setValidators(gS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=UL(t);e.asyncValidator!==null?t.setAsyncValidators(gS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();vS(e._rawValidators,i),vS(e._rawAsyncValidators,i)}function KL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&VS(t,e)})}function QL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&VS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function VS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function YL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function JL(t,e){t==null,LS(t,e)}function ZL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function XL(t){return Object.getPrototypeOf(t.constructor)===PL}function eV(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function tV(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Dd?n=o:XL(o)?r=o:i=o}),i||r||n||null}var nV={provide:Bo,useExisting:dr(()=>iy)},ic=Promise.resolve(),iy=(()=>{class t extends Bo{callSetDisabledState;get submitted(){return un(this.submittedReactive)}_submitted=Co(()=>this.submittedReactive());submittedReactive=zt(!1);_directives=new Set;form;ngSubmit=new Ae;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Sd({},ey(n),ty(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){ic.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),kS(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){ic.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){ic.then(()=>{let r=this._findContainer(n.path),i=new Sd({});JL(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){ic.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){ic.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),eV(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Zm(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new Xm(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(Ce(bS,10),Ce(CS,10),Ce(ny,8))};static \u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&jn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Aa([nV]),Fn]})}return t})();function _S(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function IS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var rV=class extends Cd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(xS(n),OS(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ad(n)&&(n.nonNullable||n.initialValueIsDefault)&&(IS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_S(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_S(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){IS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iV={provide:ac,useExisting:dr(()=>oy)},ES=Promise.resolve(),oy=(()=>{class t extends ac{_changeDetectorRef;callSetDisabledState;control=new rV;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ae;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=tV(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),ZL(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){kS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){ES.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&pm(r);ES.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?GL(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Ce(Bo,9),Ce(bS,10),Ce(CS,10),Ce(TS,10),Ce(Hl,8),Ce(ny,8))};static \u0275dir=kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Aa([iV]),Fn,_a]})}return t})();var FS=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var oV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=To({type:t});static \u0275inj=Xr({})}return t})();var jS=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:ny,useValue:n.callSetDisabledState??ry}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=To({type:t});static \u0275inj=Xr({imports:[oV]})}return t})();var US=()=>{};var $S=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},qS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($S(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new ay;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ay=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},cV=function(t){let e=$S(t);return qS.encodeByteArray(e,!0)},uc=function(t){return cV(t).replace(/\./g,"")},Nd=function(t){try{return qS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var uV=()=>zS().__FIREBASE_DEFAULTS__,lV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Nd(t[1]);return e&&JSON.parse(e)},Md=()=>{try{return US()||uV()||lV()||dV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uy=t=>Md()?.emulatorHosts?.[t],GS=t=>{let e=uy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ly=()=>Md()?.config,dy=t=>Md()?.[`_${t}`];var Rd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Tr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pd(t){return(await fetch(t,{credentials:"include"})).ok}function WS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=R({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uc(JSON.stringify(n)),uc(JSON.stringify(s)),""].join(".")}var cc={};function hV(){let t={prod:[],emulator:[]};for(let e of Object.keys(cc))cc[e]?t.emulator.push(e):t.prod.push(e);return t}function fV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var BS=!1;function xd(t,e){if(typeof window>"u"||typeof document>"u"||!Tr(window.location.host)||cc[t]===e||cc[t]||BS)return;cc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=hV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{BS=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=fV(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),A=document.getElementById(N)||document.createElement("a"),k=n("preprendIcon"),z=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let te=m.element;c(te),f(A,N);let ze=l();u(z,k),te.append(z,C,A,ze),document.body.appendChild(te)}o?(C.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function pV(){let t=Md()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZS(){let t=He();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XS(){return!pV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hy(){try{return typeof indexedDB=="object"}catch{return!1}}function eD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var gV="FirebaseError",St=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$n.prototype.create)}},$n=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?mV(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new St(i,c,r)}};function mV(t,e){return t.replace(yV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yV=/\{\$([^}]+)}/g;function tD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(HS(o)&&HS(s)){if(!fn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function HS(t){return t!==null&&typeof t=="object"}function Ho(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nD(t,e){let n=new cy(t,e);return n.subscribe.bind(n)}var cy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sy),i.error===void 0&&(i.error=sy),i.complete===void 0&&(i.complete=sy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sy(){}var iJ=4*60*60*1e3;function ot(t){return t&&t._delegate?t._delegate:t}var Vt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ii="[DEFAULT]";var fy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Rd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IV(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_V(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _V(t){return t===Ii?void 0:t}function IV(t){return t.instantiationMode==="EAGER"}var Od=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new fy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var EV=[],ne=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ne||{}),wV={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},TV=ne.INFO,bV={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},CV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=bV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},br=class{constructor(e){this.name=e,this._logLevel=TV,this._logHandler=CV,this._userLogHandler=null,EV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var SV=(t,e)=>e.some(n=>t instanceof n),rD,iD;function DV(){return rD||(rD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AV(){return iD||(iD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var oD=new WeakMap,gy=new WeakMap,sD=new WeakMap,py=new WeakMap,yy=new WeakMap;function RV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(pn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&oD.set(n,t)}).catch(()=>{}),yy.set(e,t),e}function NV(t){if(gy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});gy.set(t,e)}var my={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aD(t){my=t(my)}function MV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(kd(this),e,...n);return sD.set(r,e.sort?e.sort():[e]),pn(r)}:AV().includes(t)?function(...e){return t.apply(kd(this),e),pn(oD.get(this))}:function(...e){return pn(t.apply(kd(this),e))}}function PV(t){return typeof t=="function"?MV(t):(t instanceof IDBTransaction&&NV(t),SV(t,DV())?new Proxy(t,my):t)}function pn(t){if(t instanceof IDBRequest)return RV(t);if(py.has(t))return py.get(t);let e=PV(t);return e!==t&&(py.set(t,e),yy.set(e,t)),e}var kd=t=>yy.get(t);function uD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=pn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(pn(s.result),u.oldVersion,u.newVersion,pn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var xV=["get","getKey","getAll","getAllKeys","count"],OV=["put","add","delete","clear"],vy=new Map;function cD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vy.get(e))return vy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=OV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xV.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return vy.set(e,o),o}aD(t=>H(R({},t),{get:(e,n,r)=>cD(e,n)||t.get(e,n,r),has:(e,n)=>!!cD(e,n)||t.has(e,n)}));var Iy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function kV(t){return t.getComponent()?.type==="VERSION"}var Ey="@firebase/app",lD="0.14.1";var qn=new br("@firebase/app"),LV="@firebase/app-compat",VV="@firebase/analytics-compat",FV="@firebase/analytics",jV="@firebase/app-check-compat",UV="@firebase/app-check",BV="@firebase/auth",HV="@firebase/auth-compat",$V="@firebase/database",qV="@firebase/data-connect",zV="@firebase/database-compat",GV="@firebase/functions",WV="@firebase/functions-compat",KV="@firebase/installations",QV="@firebase/installations-compat",YV="@firebase/messaging",JV="@firebase/messaging-compat",ZV="@firebase/performance",XV="@firebase/performance-compat",eF="@firebase/remote-config",tF="@firebase/remote-config-compat",nF="@firebase/storage",rF="@firebase/storage-compat",iF="@firebase/firestore",oF="@firebase/ai",sF="@firebase/firestore-compat",aF="firebase",cF="12.1.0";var wy="[DEFAULT]",uF={[Ey]:"fire-core",[LV]:"fire-core-compat",[FV]:"fire-analytics",[VV]:"fire-analytics-compat",[UV]:"fire-app-check",[jV]:"fire-app-check-compat",[BV]:"fire-auth",[HV]:"fire-auth-compat",[$V]:"fire-rtdb",[qV]:"fire-data-connect",[zV]:"fire-rtdb-compat",[GV]:"fire-fn",[WV]:"fire-fn-compat",[KV]:"fire-iid",[QV]:"fire-iid-compat",[YV]:"fire-fcm",[JV]:"fire-fcm-compat",[ZV]:"fire-perf",[XV]:"fire-perf-compat",[eF]:"fire-rc",[tF]:"fire-rc-compat",[nF]:"fire-gcs",[rF]:"fire-gcs-compat",[iF]:"fire-fst",[sF]:"fire-fst-compat",[oF]:"fire-vertex","fire-js":"fire-js",[aF]:"fire-js-all"};var Ld=new Map,lF=new Map,Ty=new Map;function dD(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Sr(t){let e=t.name;if(Ty.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;Ty.set(e,t);for(let n of Ld.values())dD(n,t);for(let n of lF.values())dD(n,t);return!0}function dc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mt(t){return t==null?!1:t.settings!==void 0}var dF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new $n("app","Firebase",dF);var by=class{constructor(e,n,r){this._isDeleted=!1,this._options=R({},e),this._config=R({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}};var Dr=cF;function Dy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=R({name:wy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Cr.create("bad-app-name",{appName:String(i)});if(n||(n=ly()),!n)throw Cr.create("no-options");let o=Ld.get(i);if(o){if(fn(n,o.options)&&fn(r,o.config))return o;throw Cr.create("duplicate-app",{appName:i})}let s=new Od(i);for(let u of Ty.values())s.addComponent(u);let c=new by(n,r,s);return Ld.set(i,c),c}function Vd(t=wy){let e=Ld.get(t);if(!e&&t===wy&&ly())return Dy();if(!e)throw Cr.create("no-app",{appName:t});return e}function Yt(t,e,n){let r=uF[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(s.join(" "));return}Sr(new Vt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var hF="firebase-heartbeat-database",fF=1,lc="firebase-heartbeat-store",_y=null;function gD(){return _y||(_y=uD(hF,fF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),_y}async function pF(t){try{let n=(await gD()).transaction(lc),r=await n.objectStore(lc).get(mD(t));return await n.done,r}catch(e){if(e instanceof St)qn.warn(e.message);else{let n=Cr.create("idb-get",{originalErrorMessage:e?.message});qn.warn(n.message)}}}async function hD(t,e){try{let r=(await gD()).transaction(lc,"readwrite");await r.objectStore(lc).put(e,mD(t)),await r.done}catch(n){if(n instanceof St)qn.warn(n.message);else{let r=Cr.create("idb-set",{originalErrorMessage:n?.message});qn.warn(r.message)}}}function mD(t){return`${t.name}!${t.options.appId}`}var gF=1024,mF=30,Cy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Sy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>mF){let i=vF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){qn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=fD(),{heartbeatsToSend:n,unsentEntries:r}=yF(this._heartbeatsCache.heartbeats),i=uc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return qn.warn(e),""}}};function fD(){return new Date().toISOString().substring(0,10)}function yF(t,e=gF){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),pD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Sy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hy()?eD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await pF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return hD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return hD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function pD(t){return uc(JSON.stringify({version:2,heartbeats:t})).length}function vF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function _F(t){Sr(new Vt("platform-logger",e=>new Iy(e),"PRIVATE")),Sr(new Vt("heartbeat",e=>new Cy(e),"PRIVATE")),Yt(Ey,lD,t),Yt(Ey,lD,"esm2020"),Yt("fire-js","")}_F("");var IF="firebase",EF="12.1.0";Yt(IF,EF,"app");function MD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var PD=MD,xD=new $n("auth","Firebase",MD());var $d=new br("@firebase/auth");function wF(t,...e){$d.logLevel<=ne.WARN&&$d.warn(`Auth (${Dr}): ${t}`,...e)}function jd(t,...e){$d.logLevel<=ne.ERROR&&$d.error(`Auth (${Dr}): ${t}`,...e)}function mn(t,...e){throw zy(t,...e)}function Jt(t,...e){return zy(t,...e)}function qy(t,e,n){let r=H(R({},PD()),{[e]:n});return new $n("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return qy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OD(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&mn(t,"argument-error"),qy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xD.create(t,...e)}function q(t,e,...n){if(!t)throw zy(e,...n)}function zn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw jd(e),new Error(e)}function Wn(t,e){t||zn(e)}function Ny(){return typeof self<"u"&&self.location?.href||""}function TF(){return yD()==="http:"||yD()==="https:"}function yD(){return typeof self<"u"&&self.location?.protocol||null}function bF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TF()||YS()||"connection"in navigator)?navigator.onLine:!0}function CF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ei=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wn(n>e,"Short delay should be less than long delay!"),this.isMobile=KS()||JS()}get(){return bF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Gy(t,e){Wn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var qd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var SF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var DF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AF=new Ei(3e4,6e4);function Wy(t,e){return t.tenantId&&!e.tenantId?H(R({},e),{tenantId:t.tenantId}):e}async function zo(t,e,n,r,i={}){return kD(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=Ho(R({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=R({method:e,headers:u},o);return QS()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Tr(t.emulatorConfig.host)&&(l.credentials="include"),qd.fetch()(await LD(t,t.config.apiHost,n,c),l)})}async function kD(t,e,n){t._canInitEmulator=!1;let r=R(R({},SF),e);try{let i=new My(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Fd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Fd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Fd(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qy(t,f,l);mn(t,f)}}catch(i){if(i instanceof St)throw i;mn(t,"network-request-failed",{message:String(i)})}}async function RF(t,e,n,r,i={}){let o=await zo(t,e,n,r,i);return"mfaPendingCredential"in o&&mn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function LD(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Gy(t.config,i):`${t.config.apiScheme}://${i}`;return DF.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var My=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jt(this.auth,"network-request-failed")),AF.get())})}};function Fd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Jt(t,e,r);return i.customData._tokenResponse=n,i}async function NF(t,e){return zo(t,"POST","/v1/accounts:delete",e)}async function zd(t,e){return zo(t,"POST","/v1/accounts:lookup",e)}function hc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VD(t,e=!1){let n=ot(t),r=await n.getIdToken(e),i=Ky(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:hc(Ay(i.auth_time)),issuedAtTime:hc(Ay(i.iat)),expirationTime:hc(Ay(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ay(t){return Number(t)*1e3}function Ky(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Nd(n);return i?JSON.parse(i):(jd("Failed to decode base64 JWT payload"),null)}catch(i){return jd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vD(t){let e=Ky(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function pc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof St&&MF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Py=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var gc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Gd(t){let e=t.auth,n=await t.getIdToken(),r=await pc(t,zd(e,{idToken:n}));q(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?jD(i.providerUserInfo):[],s=PF(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,f)}async function FD(t){let e=ot(t);await Gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jD(t){return t.map(r=>{var i=r,{providerId:e}=i,n=ru(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function xF(t,e){let n=await kD(t,{},async()=>{let r=Ho({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await LD(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Tr(t.emulatorConfig.host)&&(u.credentials="include"),qd.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OF(t,e){return zo(t,"POST","/v2/accounts:revokeToken",Wy(t,e))}var fc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=vD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await xF(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return zn("not implemented")}};function Ar(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Rr=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=ru(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Py(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await pc(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VD(this,e)}reload(){return FD(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>R({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(H(R({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mt(this.auth.app))return Promise.reject(Nr(this.auth));let e=await this.getIdToken();return await pc(this,NF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return H(R({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>R({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:C,stsTokenManager:N}=n;q(p&&N,e,"internal-error");let A=fc.fromJSON(this.name,N);q(typeof p=="string",e,"internal-error"),Ar(r,e.name),Ar(i,e.name),q(typeof m=="boolean",e,"internal-error"),q(typeof y=="boolean",e,"internal-error"),Ar(o,e.name),Ar(s,e.name),Ar(c,e.name),Ar(u,e.name),Ar(l,e.name),Ar(f,e.name);let k=new t({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:c,stsTokenManager:A,createdAt:l,lastLoginAt:f});return C&&Array.isArray(C)&&(k.providerData=C.map(z=>R({},z))),u&&(k._redirectEventId=u),k}static async _fromIdTokenResponse(e,n,r=!1){let i=new fc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gd(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?jD(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new fc;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var _D=new Map;function Gn(t){Wn(t instanceof Function,"Expected a class definition");let e=_D.get(t);return e?(Wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_D.set(t,e),e)}var kF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),xy=kF;function Ud(t,e,n){return`firebase:${t}:${e}:${n}`}var Wd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ud(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ud("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await zd(this.auth,{idToken:e}).catch(()=>{});return n?Rr._fromGetAccountInfoResponse(this.auth,n,e):null}return Rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Gn(xy),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Gn(xy),s=Ud(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let m=await zd(e,{idToken:f}).catch(()=>{});if(!m)break;p=await Rr._fromGetAccountInfoResponse(e,m,f)}else p=Rr._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function ID(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($D(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zD(e))return"Blackberry";if(GD(e))return"Webos";if(BD(e))return"Safari";if((e.includes("chrome/")||HD(e))&&!e.includes("edge/"))return"Chrome";if(qD(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function UD(t=He()){return/firefox\//i.test(t)}function BD(t=He()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HD(t=He()){return/crios\//i.test(t)}function $D(t=He()){return/iemobile/i.test(t)}function qD(t=He()){return/android/i.test(t)}function zD(t=He()){return/blackberry/i.test(t)}function GD(t=He()){return/webos/i.test(t)}function Qy(t=He()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LF(t=He()){return Qy(t)&&!!window.navigator?.standalone}function VF(){return ZS()&&document.documentMode===10}function WD(t=He()){return Qy(t)||qD(t)||GD(t)||zD(t)||/windows phone/i.test(t)||$D(t)}function KD(t,e=[]){let n;switch(t){case"Browser":n=ID(He());break;case"Worker":n=`${ID(He())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Dr}/${r}`}var Oy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function FF(t,e={}){return zo(t,"GET","/v2/passwordPolicy",Wy(t,e))}var jF=6,ky=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ly=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kd(this),this.idTokenSubscription=new Kd(this),this.beforeStateQueue=new Oy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await zd(this,{idToken:e}),r=await Rr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mt(this.app))return Promise.reject(Nr(this));let n=e?ot(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mt(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mt(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await FF(this),n=new ky(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $n("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OF(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Gn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Wd.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wF(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Go(t){return ot(t)}var Kd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nD(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UF(t){Yy=t}function BF(t){return Yy.loadJS(t)}function HF(){return Yy.gapiScript}function QD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function YD(t,e){let n=dc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(fn(o,e??{}))return i;mn(i,"already-initialized")}return n.initialize({options:e})}function $F(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function JD(t,e,n){let r=Go(t);q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=ZD(e),{host:s,port:c}=qF(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),q(fn(l,r.config.emulator)&&fn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Tr(s)?(Pd(`${o}//${s}${u}`),xd("Auth",!0)):i||zF()}function ZD(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qF(t){let e=ZD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:ED(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:ED(s)}}}function ED(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function zF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var mc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}};async function $o(t,e){return RF(t,"POST","/v1/accounts:signInWithIdp",Wy(t,e))}var GF="http://localhost",Qd=class t extends mc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let c=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=c,o=ru(c,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return $o(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,$o(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,$o(e,n)}buildRequest(){let e={requestUri:GF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ho(n)}return e}};var qo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Yd=class extends qo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Jy=(()=>{class t extends Yd{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Qd._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var yc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Rr._fromIdTokenResponse(e,r,i),s=wD(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=wD(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function wD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Vy=class t extends St{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function XD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vy._fromErrorAndOperation(t,o,e,r):o})}async function WF(t,e,n=!1){let r=await pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return yc._forOperation(t,"link",r)}async function KF(t,e,n=!1){let{auth:r}=t;if(mt(r.app))return Promise.reject(Nr(r));let i="reauthenticate";try{let o=await pc(t,XD(r,i,e,t),n);q(o.idToken,r,"internal-error");let s=Ky(o.idToken);q(s,r,"internal-error");let{sub:c}=s;return q(t.uid===c,r,"user-mismatch"),yc._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&mn(r,"user-mismatch"),o}}async function QF(t,e,n=!1){if(mt(t.app))return Promise.reject(Nr(t));let r="signIn",i=await XD(t,r,e),o=await yc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function eA(t,e,n,r){return ot(t).onIdTokenChanged(e,n,r)}function tA(t,e,n){return ot(t).beforeAuthStateChanged(e,n)}function nh(t,e,n,r){return ot(t).onAuthStateChanged(e,n,r)}function Zy(t){return ot(t).signOut()}var Jd="__sak";var Zd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jd,"1"),this.storage.removeItem(Jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var YF=1e3,JF=10,ZF=(()=>{class t extends Zd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WD(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);VF()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,JF):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},YF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),nA=ZF;var XF=(()=>{class t extends Zd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Xy=XF;function ej(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var tj=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(async f=>f(r.origin,s)),l=await ej(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function ev(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Fy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=ev("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function gn(){return window}function nj(t){gn().location.href=t}function rA(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}async function rj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ij(){return navigator?.serviceWorker?.controller||null}function oj(){return rA()?self:null}var iA="firebaseLocalStorageDb",sj=1,Xd="firebaseLocalStorage",oA="fbase_key",wi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function rh(t,e){return t.transaction([Xd],e?"readwrite":"readonly").objectStore(Xd)}function aj(){let t=indexedDB.deleteDatabase(iA);return new wi(t).toPromise()}function jy(){let t=indexedDB.open(iA,sj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Xd,{keyPath:oA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Xd)?e(r):(r.close(),await aj(),e(await jy()))})})}async function TD(t,e,n){let r=rh(t,!0).put({[oA]:e,value:n});return new wi(r).toPromise()}async function cj(t,e){let n=rh(t,!1).get(e),r=await new wi(n).toPromise();return r===void 0?null:r.value}function bD(t,e){let n=rh(t,!0).delete(e);return new wi(n).toPromise()}var uj=800,lj=3,dj=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jy(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>lj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tj._getInstance(oj()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rj(),!this.activeServiceWorker)return;this.sender=new Fy(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||ij()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await jy();return await TD(n,Jd,"1"),await bD(n,Jd),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>TD(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>cj(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bD(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=rh(o,!1).getAll();return new wi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),sA=dj;var kJ=QD("rcb"),LJ=new Ei(3e4,6e4);function tv(t,e){return e?Gn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var vc=class extends mc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function hj(t){return QF(t.auth,new vc(t),t.bypassAuthState)}function fj(t){let{auth:e,user:n}=t;return q(n,e,"internal-error"),KF(n,new vc(t),t.bypassAuthState)}async function pj(t){let{auth:e,user:n}=t;return q(n,e,"internal-error"),WF(n,new vc(t),t.bypassAuthState)}var eh=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hj;case"linkViaPopup":case"linkViaRedirect":return pj;case"reauthViaPopup":case"reauthViaRedirect":return fj;default:mn(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var gj=new Ei(2e3,1e4);async function nv(t,e,n){if(mt(t.app))return Promise.reject(Jt(t,"operation-not-supported-in-this-environment"));let r=Go(t);OD(t,e,qo);let i=tv(r,n);return new mj(r,"signInViaPopup",e,i).executeNotNull()}var mj=(()=>{class t extends eh{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let n=await this.execute();return q(n,this.auth,"internal-error"),n}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");let n=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,gj.get())};n()}}t.currentPopupAction=null;return t})(),yj="pendingRedirect",Bd=new Map,Uy=class extends eh{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{let r=await vj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function vj(t,e){let n=cA(e),r=aA(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}async function _j(t,e){return aA(t)._set(cA(e),"true")}function Ij(t,e){Bd.set(t._key(),e)}function aA(t){return Gn(t._redirectPersistence)}function cA(t){return Ud(yj,t.config.apiKey,t.name)}function rv(t,e,n){return Ej(t,e,n)}async function Ej(t,e,n){if(mt(t.app))return Promise.reject(Nr(t));let r=Go(t);OD(t,e,qo),await r._initializationPromise;let i=tv(r,n);return await _j(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function iv(t,e){return await Go(t)._initializationPromise,uA(t,e,!1)}async function uA(t,e,n=!1){if(mt(t.app))return Promise.reject(Nr(t));let r=Go(t),i=tv(r,e),s=await new Uy(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var wj=10*60*1e3,By=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!lA(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Jt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wj&&this.cachedEventUids.clear(),this.cachedEventUids.has(CD(e))}saveEventToCache(e){this.cachedEventUids.add(CD(e)),this.lastProcessedEventTime=Date.now()}};function CD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Tj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lA(t);default:return!1}}async function bj(t,e={}){return zo(t,"GET","/v1/projects",e)}var Cj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sj=/^https?/;async function Dj(t){if(t.config.emulator)return;let{authorizedDomains:e}=await bj(t);for(let n of e)try{if(Aj(n))return}catch{}mn(t,"unauthorized-domain")}function Aj(t){let e=Ny(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Sj.test(n))return!1;if(Cj.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Rj=new Ei(3e4,6e4);function SD(){let t=gn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Nj(t){return new Promise((e,n)=>{function r(){SD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SD(),n(Jt(t,"network-request-failed"))},timeout:Rj.get()})}if(gn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gn().gapi?.load)r();else{let i=QD("iframefcb");return gn()[i]=()=>{gapi.load?r():n(Jt(t,"network-request-failed"))},BF(`${HF()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw Hd=null,e})}var Hd=null;function Mj(t){return Hd=Hd||Nj(t),Hd}var Pj=new Ei(5e3,15e3),xj="__/auth/iframe",Oj="emulator/auth/iframe",kj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vj(t){let e=t.config;q(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Gy(e,Oj):`https://${t.config.authDomain}/${xj}`,r={apiKey:e.apiKey,appName:t.name,v:Dr},i=Lj.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ho(r).slice(1)}`}async function Fj(t){let e=await Mj(t),n=gn().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:Vj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kj,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Jt(t,"network-request-failed"),c=gn().setTimeout(()=>{o(s)},Pj.get());function u(){gn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var jj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Uj=500,Bj=600,Hj="_blank",$j="http://localhost",th=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function qj(t,e,n,r=Uj,i=Bj){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=H(R({},jj),{width:r.toString(),height:i.toString(),top:o,left:s}),l=He().toLowerCase();n&&(c=HD(l)?Hj:n),UD(l)&&(e=e||$j,u.scrollbars="yes");let f=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(LF(l)&&c!=="_self")return zj(e||"",c),new th(null);let p=window.open(e||"",c,f);q(p,t,"popup-blocked");try{p.focus()}catch{}return new th(p)}function zj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Gj="__/auth/handler",Wj="emulator/auth/handler",Kj=encodeURIComponent("fac");async function DD(t,e,n,r,i,o){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Dr,eventId:i};if(e instanceof qo){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",tD(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof Yd){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=await t._getAppCheckToken(),l=u?`#${Kj}=${encodeURIComponent(u)}`:"";return`${Qj(t)}?${Ho(c).slice(1)}${l}`}function Qj({config:t}){return t.emulator?Gy(t,Wj):`https://${t.authDomain}/${Gj}`}var Ry="webStorageSupport",Hy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xy,this._completeRedirectFn=uA,this._overrideRedirectResult=Ij}async _openPopup(e,n,r,i){Wn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await DD(e,n,r,Ny(),i);return qj(e,o,ev())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await DD(e,n,r,Ny(),i);return nj(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Wn(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await Fj(e),r=new By(e);return n.register("authEvent",i=>(q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ry,{type:Ry},i=>{let o=i?.[0]?.[Ry];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Dj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WD()||BD()||Qy()}},dA=Hy;var AD="@firebase/auth",RD="1.11.0";var $y=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Yj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jj(t){Sr(new Vt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KD(t)},l=new Ly(r,i,o,u);return $F(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Sr(new Vt("auth-internal",e=>{let n=Go(e.getProvider("auth").getImmediate());return(r=>new $y(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(AD,RD,Yj(t)),Yt(AD,RD,"esm2020")}var Zj=5*60,Xj=dy("authIdTokenMaxAge")||Zj,ND=null,eU=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Xj)return;let i=n?.token;ND!==i&&(ND=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ov(t=Vd()){let e=dc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=YD(t,{popupRedirectResolver:dA,persistence:[sA,nA,Xy]}),r=dy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=eU(o.toString());tA(n,s,()=>s(n.currentUser)),eA(n,c=>s(c))}}let i=uy("auth");return i&&JD(n,`http://${i}`),n}function tU(){return document.getElementsByTagName("head")?.[0]??document}UF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Jt("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",tU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jj("Browser");var hA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fA={};var Kn,sv;(function(){var t;function e(b,v){function I(){}I.prototype=v.prototype,b.D=v.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(E,w,S){for(var _=Array(arguments.length-2),bn=2;bn<arguments.length;bn++)_[bn-2]=arguments[bn];return v.prototype[w].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var w=0;16>w;++w)E[w]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(w=0;16>w;++w)E[w]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=b.g[0],I=b.g[1],w=b.g[2];var S=b.g[3],_=v+(S^I&(w^S))+E[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=S+(w^v&(I^w))+E[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=w+(I^S&(v^I))+E[2]+606105819&4294967295,w=S+(_<<17&4294967295|_>>>15),_=I+(v^w&(S^v))+E[3]+3250441966&4294967295,I=w+(_<<22&4294967295|_>>>10),_=v+(S^I&(w^S))+E[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(w^v&(I^w))+E[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=w+(I^S&(v^I))+E[6]+2821735955&4294967295,w=S+(_<<17&4294967295|_>>>15),_=I+(v^w&(S^v))+E[7]+4249261313&4294967295,I=w+(_<<22&4294967295|_>>>10),_=v+(S^I&(w^S))+E[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(w^v&(I^w))+E[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=w+(I^S&(v^I))+E[10]+4294925233&4294967295,w=S+(_<<17&4294967295|_>>>15),_=I+(v^w&(S^v))+E[11]+2304563134&4294967295,I=w+(_<<22&4294967295|_>>>10),_=v+(S^I&(w^S))+E[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(w^v&(I^w))+E[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=w+(I^S&(v^I))+E[14]+2792965006&4294967295,w=S+(_<<17&4294967295|_>>>15),_=I+(v^w&(S^v))+E[15]+1236535329&4294967295,I=w+(_<<22&4294967295|_>>>10),_=v+(w^S&(I^w))+E[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^w&(v^I))+E[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=w+(v^I&(S^v))+E[11]+643717713&4294967295,w=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(w^S))+E[0]+3921069994&4294967295,I=w+(_<<20&4294967295|_>>>12),_=v+(w^S&(I^w))+E[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^w&(v^I))+E[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=w+(v^I&(S^v))+E[15]+3634488961&4294967295,w=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(w^S))+E[4]+3889429448&4294967295,I=w+(_<<20&4294967295|_>>>12),_=v+(w^S&(I^w))+E[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^w&(v^I))+E[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=w+(v^I&(S^v))+E[3]+4107603335&4294967295,w=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(w^S))+E[8]+1163531501&4294967295,I=w+(_<<20&4294967295|_>>>12),_=v+(w^S&(I^w))+E[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^w&(v^I))+E[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=w+(v^I&(S^v))+E[7]+1735328473&4294967295,w=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(w^S))+E[12]+2368359562&4294967295,I=w+(_<<20&4294967295|_>>>12),_=v+(I^w^S)+E[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^w)+E[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=w+(S^v^I)+E[11]+1839030562&4294967295,w=S+(_<<16&4294967295|_>>>16),_=I+(w^S^v)+E[14]+4259657740&4294967295,I=w+(_<<23&4294967295|_>>>9),_=v+(I^w^S)+E[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^w)+E[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=w+(S^v^I)+E[7]+4139469664&4294967295,w=S+(_<<16&4294967295|_>>>16),_=I+(w^S^v)+E[10]+3200236656&4294967295,I=w+(_<<23&4294967295|_>>>9),_=v+(I^w^S)+E[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^w)+E[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=w+(S^v^I)+E[3]+3572445317&4294967295,w=S+(_<<16&4294967295|_>>>16),_=I+(w^S^v)+E[6]+76029189&4294967295,I=w+(_<<23&4294967295|_>>>9),_=v+(I^w^S)+E[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^w)+E[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=w+(S^v^I)+E[15]+530742520&4294967295,w=S+(_<<16&4294967295|_>>>16),_=I+(w^S^v)+E[2]+3299628645&4294967295,I=w+(_<<23&4294967295|_>>>9),_=v+(w^(I|~S))+E[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~w))+E[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=w+(v^(S|~I))+E[14]+2878612391&4294967295,w=S+(_<<15&4294967295|_>>>17),_=I+(S^(w|~v))+E[5]+4237533241&4294967295,I=w+(_<<21&4294967295|_>>>11),_=v+(w^(I|~S))+E[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~w))+E[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=w+(v^(S|~I))+E[10]+4293915773&4294967295,w=S+(_<<15&4294967295|_>>>17),_=I+(S^(w|~v))+E[1]+2240044497&4294967295,I=w+(_<<21&4294967295|_>>>11),_=v+(w^(I|~S))+E[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~w))+E[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=w+(v^(S|~I))+E[6]+2734768916&4294967295,w=S+(_<<15&4294967295|_>>>17),_=I+(S^(w|~v))+E[13]+1309151649&4294967295,I=w+(_<<21&4294967295|_>>>11),_=v+(w^(I|~S))+E[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~w))+E[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=w+(v^(S|~I))+E[2]+718787259&4294967295,w=S+(_<<15&4294967295|_>>>17),_=I+(S^(w|~v))+E[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(w+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+S&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var I=v-this.blockSize,E=this.B,w=this.h,S=0;S<v;){if(w==0)for(;S<=I;)i(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<v;)if(E[w++]=b.charCodeAt(S++),w==this.blockSize){i(this,E),w=0;break}}else for(;S<v;)if(E[w++]=b[S++],w==this.blockSize){i(this,E),w=0;break}}this.h=w,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var I=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=I&255,I/=256;for(this.u(b),b=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)b[I++]=this.g[v]>>>E&255;return b};function o(b,v){var I=c;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=v(b)}function s(b,v){this.h=v;for(var I=[],E=!0,w=b.length-1;0<=w;w--){var S=b[w]|0;E&&S==v||(I[w]=S,E=!1)}this.g=I}var c={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return A(l(-b));for(var v=[],I=1,E=0;b>=I;E++)v[E]=b/I|0,I*=4294967296;return new s(v,0)}function f(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return A(f(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,w=0;w<b.length;w+=8){var S=Math.min(8,b.length-w),_=parseInt(b.substring(w,w+S),v);8>S?(S=l(Math.pow(v,S)),E=E.j(S).add(l(_))):(E=E.j(I),E=E.add(l(_)))}return E}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-A(this).m();for(var b=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);b+=(0<=E?E:4294967296+E)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(N(this))return"-"+A(this).toString(b);for(var v=l(Math.pow(b,6)),I=this,E="";;){var w=ze(I,v).g;I=k(I,w.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=w,C(I))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=k(this,b),N(b)?-1:C(b)?0:1};function A(b){for(var v=b.g.length,I=[],E=0;E<v;E++)I[E]=~b.g[E];return new s(I,~b.h).add(m)}t.abs=function(){return N(this)?A(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],E=0,w=0;w<=v;w++){var S=E+(this.i(w)&65535)+(b.i(w)&65535),_=(S>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);E=_>>>16,S&=65535,_&=65535,I[w]=_<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(b,v){return b.add(A(v))}t.j=function(b){if(C(this)||C(b))return p;if(N(this))return N(b)?A(this).j(A(b)):A(A(this).j(b));if(N(b))return A(this.j(A(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var w=0;w<b.g.length;w++){var S=this.i(E)>>>16,_=this.i(E)&65535,bn=b.i(w)>>>16,Is=b.i(w)&65535;I[2*E+2*w]+=_*Is,z(I,2*E+2*w),I[2*E+2*w+1]+=S*Is,z(I,2*E+2*w+1),I[2*E+2*w+1]+=_*bn,z(I,2*E+2*w+1),I[2*E+2*w+2]+=S*bn,z(I,2*E+2*w+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new s(I,0)};function z(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function te(b,v){this.g=b,this.h=v}function ze(b,v){if(C(v))throw Error("division by zero");if(C(b))return new te(p,p);if(N(b))return v=ze(A(b),v),new te(A(v.g),A(v.h));if(N(v))return v=ze(b,A(v)),new te(A(v.g),v.h);if(30<b.g.length){if(N(b)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=v;0>=E.l(b);)I=en(I),E=en(E);var w=Ze(I,1),S=Ze(E,1);for(E=Ze(E,2),I=Ze(I,2);!C(E);){var _=S.add(E);0>=_.l(b)&&(w=w.add(I),S=_),E=Ze(E,1),I=Ze(I,1)}return v=k(b,w.j(v)),new te(w,v)}for(w=p;0<=b.l(v);){for(I=Math.max(1,Math.floor(b.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(I),_=S.j(v);N(_)||0<_.l(b);)I-=E,S=l(I),_=S.j(v);C(S)&&(S=m),w=w.add(S),b=k(b,_)}return new te(w,b)}t.A=function(b){return ze(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&b.i(E);return new s(I,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|b.i(E);return new s(I,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^b.i(E);return new s(I,this.h^b.h)};function en(b){for(var v=b.g.length+1,I=[],E=0;E<v;E++)I[E]=b.i(E)<<1|b.i(E-1)>>>31;return new s(I,b.h)}function Ze(b,v){var I=v>>5;v%=32;for(var E=b.g.length-I,w=[],S=0;S<E;S++)w[S]=0<v?b.i(S+I)>>>v|b.i(S+I+1)<<32-v:b.i(S+I);return new s(w,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sv=fA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Kn=fA.Integer=s}).apply(typeof hA<"u"?hA:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qn={};var av,nU,Wo,cv,_c,oh,uv,lv,dv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var T=a[g];if(!(T in h))break e;h=h[T]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var h=0,g=!1,T={next:function(){if(!g&&h<a.length){var D=h++;return{value:d(D,a[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,h){return h})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function f(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),a.apply(d,T)}}return function(){return a.apply(d,arguments)}}function m(a,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function C(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(g,T,D){for(var O=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)O[ge-2]=arguments[ge];return d.prototype[T].apply(g,O)}}function N(a){let d=a.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function A(a,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(u(g)){let T=a.length||0,D=g.length||0;a.length=T+D;for(let O=0;O<D;O++)a[T+O]=g[O]}else a.push(g)}}class k{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(a){return/^[\s\xa0]*$/.test(a)}function te(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ze(a){return ze[" "](a),a}ze[" "]=function(){};var en=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function Ze(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function b(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function v(a){let d={};for(let h in a)d[h]=a[h];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)a[h]=g[h];for(let D=0;D<I.length;D++)h=I[D],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function w(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function S(a){c.setTimeout(()=>{throw a},0)}function _(){var a=of;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class bn{constructor(){this.h=this.g=null}add(d,h){let g=Is.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Is=new k(()=>new HN,a=>a.reset());class HN{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Es,ws=!1,of=new bn,wI=()=>{let a=c.Promise.resolve(void 0);Es=()=>{a.then($N)}};var $N=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(h){S(h)}var d=Is;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}ws=!1};function nr(){this.s=this.s,this.C=this.C}nr.prototype.s=!1,nr.prototype.ma=function(){this.s||(this.s=!0,this.N())},nr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var qN=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function Ts(a,d){if(Xe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(en){e:{try{ze(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:zN[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ts.aa.h.call(this)}}C(Ts,Xe);var zN={2:"touch",3:"pen",4:"mouse"};Ts.prototype.h=function(){Ts.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var bs="closure_listenable_"+(1e6*Math.random()|0),GN=0;function WN(a,d,h,g,T){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=T,this.key=++GN,this.da=this.fa=!1}function jc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Uc(a){this.src=a,this.g={},this.h=0}Uc.prototype.add=function(a,d,h,g,T){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var O=af(a,d,g,T);return-1<O?(d=a[O],h||(d.fa=!1)):(d=new WN(d,this.src,D,!!g,T),d.fa=h,a.push(d)),d};function sf(a,d){var h=d.type;if(h in a.g){var g=a.g[h],T=Array.prototype.indexOf.call(g,d,void 0),D;(D=0<=T)&&Array.prototype.splice.call(g,T,1),D&&(jc(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function af(a,d,h,g){for(var T=0;T<a.length;++T){var D=a[T];if(!D.da&&D.listener==d&&D.capture==!!h&&D.ha==g)return T}return-1}var cf="closure_lm_"+(1e6*Math.random()|0),uf={};function TI(a,d,h,g,T){if(g&&g.once)return CI(a,d,h,g,T);if(Array.isArray(d)){for(var D=0;D<d.length;D++)TI(a,d[D],h,g,T);return null}return h=ff(h),a&&a[bs]?a.K(d,h,l(g)?!!g.capture:!!g,T):bI(a,d,h,!1,g,T)}function bI(a,d,h,g,T,D){if(!d)throw Error("Invalid event type");var O=l(T)?!!T.capture:!!T,ge=df(a);if(ge||(a[cf]=ge=new Uc(a)),h=ge.add(d,h,g,O,D),h.proxy)return h;if(g=KN(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)qN||(T=O),T===void 0&&(T=!1),a.addEventListener(d.toString(),g,T);else if(a.attachEvent)a.attachEvent(DI(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function KN(){function a(h){return d.call(a.src,a.listener,h)}let d=QN;return a}function CI(a,d,h,g,T){if(Array.isArray(d)){for(var D=0;D<d.length;D++)CI(a,d[D],h,g,T);return null}return h=ff(h),a&&a[bs]?a.L(d,h,l(g)?!!g.capture:!!g,T):bI(a,d,h,!0,g,T)}function SI(a,d,h,g,T){if(Array.isArray(d))for(var D=0;D<d.length;D++)SI(a,d[D],h,g,T);else g=l(g)?!!g.capture:!!g,h=ff(h),a&&a[bs]?(a=a.i,d=String(d).toString(),d in a.g&&(D=a.g[d],h=af(D,h,g,T),-1<h&&(jc(D[h]),Array.prototype.splice.call(D,h,1),D.length==0&&(delete a.g[d],a.h--)))):a&&(a=df(a))&&(d=a.g[d.toString()],a=-1,d&&(a=af(d,h,g,T)),(h=-1<a?d[a]:null)&&lf(h))}function lf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[bs])sf(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(DI(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=df(d))?(sf(h,a),h.h==0&&(h.src=null,d[cf]=null)):jc(a)}}}function DI(a){return a in uf?uf[a]:uf[a]="on"+a}function QN(a,d){if(a.da)a=!0;else{d=new Ts(d,this);var h=a.listener,g=a.ha||a.src;a.fa&&lf(a),a=h.call(g,d)}return a}function df(a){return a=a[cf],a instanceof Uc?a:null}var hf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ff(a){return typeof a=="function"?a:(a[hf]||(a[hf]=function(d){return a.handleEvent(d)}),a[hf])}function et(){nr.call(this),this.i=new Uc(this),this.M=this,this.F=null}C(et,nr),et.prototype[bs]=!0,et.prototype.removeEventListener=function(a,d,h,g){SI(this,a,d,h,g)};function ct(a,d){var h,g=a.F;if(g)for(h=[];g;g=g.F)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new Xe(d,a);else if(d instanceof Xe)d.target=d.target||a;else{var T=d;d=new Xe(g,a),E(d,T)}if(T=!0,h)for(var D=h.length-1;0<=D;D--){var O=d.g=h[D];T=Bc(O,g,!0,d)&&T}if(O=d.g=a,T=Bc(O,g,!0,d)&&T,T=Bc(O,g,!1,d)&&T,h)for(D=0;D<h.length;D++)O=d.g=h[D],T=Bc(O,g,!1,d)&&T}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],g=0;g<h.length;g++)jc(h[g]);delete a.g[d],a.h--}}this.F=null},et.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},et.prototype.L=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Bc(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,D=0;D<d.length;++D){var O=d[D];if(O&&!O.da&&O.capture==h){var ge=O.listener,Ge=O.ha||O.src;O.fa&&sf(a.i,O),T=ge.call(Ge,g)!==!1&&T}}return T&&!g.defaultPrevented}function AI(a,d,h){if(typeof a=="function")h&&(a=m(a,h));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function RI(a){a.g=AI(()=>{a.g=null,a.i&&(a.i=!1,RI(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class YN extends nr{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:RI(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(a){nr.call(this),this.h=a,this.g={}}C(Cs,nr);var NI=[];function MI(a){Ze(a.g,function(d,h){this.g.hasOwnProperty(h)&&lf(d)},a),a.g={}}Cs.prototype.N=function(){Cs.aa.N.call(this),MI(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pf=c.JSON.stringify,JN=c.JSON.parse,ZN=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function gf(){}gf.prototype.h=null;function PI(a){return a.h||(a.h=a.i())}function xI(){}var Ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mf(){Xe.call(this,"d")}C(mf,Xe);function yf(){Xe.call(this,"c")}C(yf,Xe);var jr={},OI=null;function Hc(){return OI=OI||new et}jr.La="serverreachability";function kI(a){Xe.call(this,jr.La,a)}C(kI,Xe);function Ds(a){let d=Hc();ct(d,new kI(d))}jr.STAT_EVENT="statevent";function LI(a,d){Xe.call(this,jr.STAT_EVENT,a),this.stat=d}C(LI,Xe);function ut(a){let d=Hc();ct(d,new LI(d,a))}jr.Ma="timingevent";function VI(a,d){Xe.call(this,jr.Ma,a),this.size=d}C(VI,Xe);function As(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function XN(a,d,h,g,T,D){a.info(function(){if(a.g)if(D)for(var O="",ge=D.split("&"),Ge=0;Ge<ge.length;Ge++){var de=ge[Ge].split("=");if(1<de.length){var tt=de[0];de=de[1];var nt=tt.split("_");O=2<=nt.length&&nt[1]=="type"?O+(tt+"="+de+"&"):O+(tt+"=redacted&")}}else O=null;else O=D;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+h+`
`+O})}function eM(a,d,h,g,T,D,O){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+h+`
`+D+" "+O})}function Vi(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+nM(a,h)+(g?" "+g:"")})}function tM(a,d){a.info(function(){return"TIMEOUT: "+d})}Rs.prototype.info=function(){};function nM(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var g=h[a];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var D=T[0];if(D!="noop"&&D!="stop"&&D!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return pf(h)}catch{return d}}var $c={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vf;function qc(){}C(qc,gf),qc.prototype.g=function(){return new XMLHttpRequest},qc.prototype.i=function(){return{}},vf=new qc;function rr(a,d,h,g){this.j=a,this.i=d,this.l=h,this.R=g||1,this.U=new Cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jI}function jI(){this.i=null,this.g="",this.h=!1}var UI={},_f={};function If(a,d,h){a.L=1,a.v=Kc(Cn(d)),a.m=h,a.P=!0,BI(a,null)}function BI(a,d){a.F=Date.now(),zc(a),a.A=Cn(a.v);var h=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),tE(h.i,"t",g),a.C=0,h=a.j.J,a.h=new jI,a.g=_E(a.j,h?d:null,!a.m),0<a.O&&(a.M=new YN(m(a.Y,a,a.g),a.O)),d=a.U,h=a.g,g=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(NI[0]=T.toString()),T=NI);for(var D=0;D<T.length;D++){var O=TI(h,T[D],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ds(),XN(a.i,a.u,a.A,a.l,a.R,a.m)}rr.prototype.ca=function(a){a=a.target;let d=this.M;d&&Sn(a)==3?d.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{let nt=Sn(this.g);var d=this.g.Ba();let Ui=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||cE(this.g)))){this.J||nt!=4||d==7||(d==8||0>=Ui?Ds(3):Ds(2)),Ef(this);var h=this.g.Z();this.X=h;t:if(HI(this)){var g=cE(this.g);a="";var T=g.length,D=Sn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),Ns(this);var O="";break t}this.h.i=new c.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(D&&d==T-1)});g.length=0,this.h.g+=a,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=h==200,eM(this.i,this.u,this.A,this.l,this.R,nt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Ge=this.g;if((ge=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(ge)){var de=ge;break t}}de=null}if(h=de)Vi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wf(this,h);else{this.o=!1,this.s=3,ut(12),Ur(this),Ns(this);break e}}if(this.P){h=!0;let jt;for(;!this.J&&this.C<O.length;)if(jt=rM(this,O),jt==_f){nt==4&&(this.s=4,ut(14),h=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==UI){this.s=4,ut(15),Vi(this.i,this.l,O,"[Invalid Chunk]"),h=!1;break}else Vi(this.i,this.l,jt,null),wf(this,jt);if(HI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||O.length!=0||this.h.h||(this.s=1,ut(16),h=!1),this.o=this.o&&h,!h)Vi(this.i,this.l,O,"[Invalid Chunked Response]"),Ur(this),Ns(this);else if(0<O.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Af(tt),tt.M=!0,ut(11))}}else Vi(this.i,this.l,O,null),wf(this,O);nt==4&&Ur(this),this.o&&!this.J&&(nt==4?gE(this.j,this):(this.o=!1,zc(this)))}else IM(this.g),h==400&&0<O.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Ur(this),Ns(this)}}}catch{}finally{}};function HI(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function rM(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?_f:(h=Number(d.substring(h,g)),isNaN(h)?UI:(g+=1,g+h>d.length?_f:(d=d.slice(g,g+h),a.C=g+h,d)))}rr.prototype.cancel=function(){this.J=!0,Ur(this)};function zc(a){a.S=Date.now()+a.I,$I(a,a.I)}function $I(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=As(m(a.ba,a),d)}function Ef(a){a.B&&(c.clearTimeout(a.B),a.B=null)}rr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(tM(this.i,this.A),this.L!=2&&(Ds(),ut(17)),Ur(this),this.s=2,Ns(this)):$I(this,this.S-a)};function Ns(a){a.j.G==0||a.J||gE(a.j,a)}function Ur(a){Ef(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,MI(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function wf(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||Tf(h.h,a))){if(!a.K&&Tf(h.h,a)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Xc(h),Jc(h);else break e;Df(h),ut(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=As(m(h.Za,h),6e3));if(1>=GI(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Hr(h,11)}else if((a.K||h.g==a)&&Xc(h),!z(d))for(T=h.Da.g.parse(d),d=0;d<T.length;d++){let de=T[d];if(h.T=de[0],de=de[1],h.G==2)if(de[0]=="c"){h.K=de[1],h.ia=de[2];let tt=de[3];tt!=null&&(h.la=tt,h.j.info("VER="+h.la));let nt=de[4];nt!=null&&(h.Aa=nt,h.j.info("SVER="+h.Aa));let Ui=de[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(g=1.5*Ui,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let jt=a.g;if(jt){let tu=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tu){var D=g.h;D.g||tu.indexOf("spdy")==-1&&tu.indexOf("quic")==-1&&tu.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(bf(D,D.h),D.h=null))}if(g.D){let Rf=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(g.ya=Rf,ye(g.I,g.D,Rf))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var O=a;if(g.qa=vE(g,g.J?g.ia:null,g.W),O.K){WI(g.h,O);var ge=O,Ge=g.L;Ge&&(ge.I=Ge),ge.B&&(Ef(ge),zc(ge)),g.g=O}else fE(g);0<h.i.length&&Zc(h)}else de[0]!="stop"&&de[0]!="close"||Hr(h,7);else h.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Hr(h,7):Sf(h):de[0]!="noop"&&h.l&&h.l.ta(de),h.v=0)}}Ds(4)}catch{}}var iM=class{constructor(a,d){this.g=a,this.map=d}};function qI(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zI(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function GI(a){return a.h?1:a.g?a.g.size:0}function Tf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function bf(a,d){a.g?a.g.add(d):a.h=d}function WI(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}qI.prototype.cancel=function(){if(this.i=KI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function KI(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return N(a.i)}function oM(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],h=a.length,g=0;g<h;g++)d.push(a[g]);return d}d=[],h=0;for(g in a)d[h++]=a[g];return d}function sM(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let g in a)d[h++]=g;return d}}}function QI(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=sM(a),g=oM(a),T=g.length,D=0;D<T;D++)d.call(void 0,g[D],h&&h[D],a)}var YI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aM(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var g=a[h].indexOf("="),T=null;if(0<=g){var D=a[h].substring(0,g);T=a[h].substring(g+1)}else D=a[h];d(D,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Br){this.h=a.h,Gc(this,a.j),this.o=a.o,this.g=a.g,Wc(this,a.s),this.l=a.l;var d=a.i,h=new xs;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),JI(this,h),this.m=a.m}else a&&(d=String(a).match(YI))?(this.h=!1,Gc(this,d[1]||"",!0),this.o=Ms(d[2]||""),this.g=Ms(d[3]||"",!0),Wc(this,d[4]),this.l=Ms(d[5]||"",!0),JI(this,d[6]||"",!0),this.m=Ms(d[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}Br.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ps(d,ZI,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ps(d,ZI,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Ps(h,h.charAt(0)=="/"?lM:uM,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Ps(h,hM)),a.join("")};function Cn(a){return new Br(a)}function Gc(a,d,h){a.j=h?Ms(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Wc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function JI(a,d,h){d instanceof xs?(a.i=d,fM(a.i,a.h)):(h||(d=Ps(d,dM)),a.i=new xs(d,a.h))}function ye(a,d,h){a.i.set(d,h)}function Kc(a){return ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ms(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ps(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,cM),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function cM(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ZI=/[#\/\?@]/g,uM=/[#\?:]/g,lM=/[#\?]/g,dM=/[#\?@]/g,hM=/#/g;function xs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ir(a){a.g||(a.g=new Map,a.h=0,a.i&&aM(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=xs.prototype,t.add=function(a,d){ir(this),this.i=null,a=Fi(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function XI(a,d){ir(a),d=Fi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function eE(a,d){return ir(a),d=Fi(a,d),a.g.has(d)}t.forEach=function(a,d){ir(this),this.g.forEach(function(h,g){h.forEach(function(T){a.call(d,T,g,this)},this)},this)},t.na=function(){ir(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let T=a[g];for(let D=0;D<T.length;D++)h.push(d[g])}return h},t.V=function(a){ir(this);let d=[];if(typeof a=="string")eE(this,a)&&(d=d.concat(this.g.get(Fi(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},t.set=function(a,d){return ir(this),this.i=null,a=Fi(this,a),eE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function tE(a,d,h){XI(a,d),0<h.length&&(a.i=null,a.g.set(Fi(a,d),N(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let D=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var T=D;O[g]!==""&&(T+="="+encodeURIComponent(String(O[g]))),a.push(T)}}return this.i=a.join("&")};function Fi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function fM(a,d){d&&!a.j&&(ir(a),a.i=null,a.g.forEach(function(h,g){var T=g.toLowerCase();g!=T&&(XI(this,g),tE(this,T,h))},a)),a.j=d}function pM(a,d){let h=new Rs;if(c.Image){let g=new Image;g.onload=y(or,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(or,h,"TestLoadImage: error",!1,d,g),g.onabort=y(or,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(or,h,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function gM(a,d){let h=new Rs,g=new AbortController,T=setTimeout(()=>{g.abort(),or(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(T),D.ok?or(h,"TestPingServer: ok",!0,d):or(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),or(h,"TestPingServer: error",!1,d)})}function or(a,d,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function mM(){this.g=new ZN}function yM(a,d,h){let g=h||"";try{QI(a,function(T,D){let O=T;l(T)&&(O=pf(T)),d.push(g+D+"="+encodeURIComponent(O))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Os(a){this.l=a.Ub||null,this.j=a.eb||!1}C(Os,gf),Os.prototype.g=function(){return new Qc(this.l,this.j)},Os.prototype.i=function(a){return function(){return a}}({});function Qc(a,d){et.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Qc,et),t=Qc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Ls(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nE(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function nE(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ks(this):Ls(this),this.readyState==3&&nE(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ks(this))},t.Qa=function(a){this.g&&(this.response=a,ks(this))},t.ga=function(){this.g&&ks(this)};function ks(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ls(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Ls(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Qc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function rE(a){let d="";return Ze(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Cf(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=rE(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):ye(a,d,h))}function Ee(a){et.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ee,et);var vM=/^https?$/i,_M=["POST","PUT"];t=Ee.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vf.g(),this.v=this.o?PI(this.o):PI(vf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){iE(this,D);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let D of g.keys())h.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(D=>D.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_M,d,void 0))||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,O]of h)this.g.setRequestHeader(D,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aE(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){iE(this,D)}};function iE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,oE(a),Yc(a)}function oE(a){a.A||(a.A=!0,ct(a,"complete"),ct(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ct(this,"complete"),ct(this,"abort"),Yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yc(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sE(this):this.bb())},t.bb=function(){sE(this)};function sE(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Sn(a)!=4||a.Z()!=2)){if(a.u&&Sn(a)==4)AI(a.Ea,0,a);else if(ct(a,"readystatechange"),Sn(a)==4){a.h=!1;try{let O=a.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=O===0){var T=String(a.D).match(YI)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),g=!vM.test(T?T.toLowerCase():"")}h=g}if(h)ct(a,"complete"),ct(a,"success");else{a.m=6;try{var D=2<Sn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",oE(a)}}finally{Yc(a)}}}}function Yc(a,d){if(a.g){aE(a);let h=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ct(a,"ready");try{h.onreadystatechange=g}catch{}}}function aE(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Sn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Sn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),JN(d)}};function cE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function IM(a){let d={};a=(a.g&&2<=Sn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(z(a[g]))continue;var h=w(a[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let D=d[T]||[];d[T]=D,D.push(h)}b(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function uE(a){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vs("baseRetryDelayMs",5e3,a),this.cb=Vs("retryDelaySeedMs",1e4,a),this.Wa=Vs("forwardChannelMaxRetries",2,a),this.wa=Vs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qI(a&&a.concurrentRequestLimit),this.Da=new mM,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=uE.prototype,t.la=8,t.G=1,t.connect=function(a,d,h,g){ut(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=vE(this,null,this.W),Zc(this)};function Sf(a){if(lE(a),a.G==3){var d=a.U++,h=Cn(a.I);if(ye(h,"SID",a.K),ye(h,"RID",d),ye(h,"TYPE","terminate"),Fs(a,h),d=new rr(a,a.j,d),d.L=2,d.v=Kc(Cn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=_E(d.j,null),d.g.ea(d.v)),d.F=Date.now(),zc(d)}yE(a)}function Jc(a){a.g&&(Af(a),a.g.cancel(),a.g=null)}function lE(a){Jc(a),a.u&&(c.clearTimeout(a.u),a.u=null),Xc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Zc(a){if(!zI(a.h)&&!a.s){a.s=!0;var d=a.Ga;Es||wI(),ws||(Es(),ws=!0),of.add(d,a),a.B=0}}function EM(a,d){return GI(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=As(m(a.Ga,a,d),mE(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new rr(this,this.j,a),D=this.o;if(this.S&&(D?(D=v(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(T.H=D,D=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=hE(this,T,d),h=Cn(this.I),ye(h,"RID",a),ye(h,"CVER",22),this.D&&ye(h,"X-HTTP-Session-Id",this.D),Fs(this,h),D&&(this.O?d="headers="+encodeURIComponent(String(rE(D)))+"&"+d:this.m&&Cf(h,this.m,D)),bf(this.h,T),this.Ua&&ye(h,"TYPE","init"),this.P?(ye(h,"$req",d),ye(h,"SID","null"),T.T=!0,If(T,h,null)):If(T,h,d),this.G=2}}else this.G==3&&(a?dE(this,a):this.i.length==0||zI(this.h)||dE(this))};function dE(a,d){var h;d?h=d.l:h=a.U++;let g=Cn(a.I);ye(g,"SID",a.K),ye(g,"RID",h),ye(g,"AID",a.T),Fs(a,g),a.m&&a.o&&Cf(g,a.m,a.o),h=new rr(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=hE(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),bf(a.h,h),If(h,g,d)}function Fs(a,d){a.H&&Ze(a.H,function(h,g){ye(d,g,h)}),a.l&&QI({},function(h,g){ye(d,g,h)})}function hE(a,d,h){h=Math.min(a.i.length,h);var g=a.l?m(a.l.Na,a.l,a):null;e:{var T=a.i;let D=-1;for(;;){let O=["count="+h];D==-1?0<h?(D=T[0].g,O.push("ofs="+D)):D=0:O.push("ofs="+D);let ge=!0;for(let Ge=0;Ge<h;Ge++){let de=T[Ge].g,tt=T[Ge].map;if(de-=D,0>de)D=Math.max(0,T[Ge].g-100),ge=!1;else try{yM(tt,O,"req"+de+"_")}catch{g&&g(tt)}}if(ge){g=O.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,g}function fE(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Es||wI(),ws||(Es(),ws=!0),of.add(d,a),a.v=0}}function Df(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=As(m(a.Fa,a),mE(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,pE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=As(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Jc(this),pE(this))};function Af(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function pE(a){a.g=new rr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Cn(a.qa);ye(d,"RID","rpc"),ye(d,"SID",a.K),ye(d,"AID",a.T),ye(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ye(d,"TO",a.ja),ye(d,"TYPE","xmlhttp"),Fs(a,d),a.m&&a.o&&Cf(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Kc(Cn(d)),h.m=null,h.P=!0,BI(h,a)}t.Za=function(){this.C!=null&&(this.C=null,Jc(this),Df(this),ut(19))};function Xc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function gE(a,d){var h=null;if(a.g==d){Xc(a),Af(a),a.g=null;var g=2}else if(Tf(a.h,d))h=d.D,WI(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var T=a.B;g=Hc(),ct(g,new VI(g,h)),Zc(a)}else fE(a);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&EM(a,d)||g==2&&Df(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),T){case 1:Hr(a,5);break;case 4:Hr(a,10);break;case 3:Hr(a,6);break;default:Hr(a,2)}}}function mE(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Hr(a,d){if(a.j.info("Error code "+d),d==2){var h=m(a.fb,a),g=a.Xa;let T=!g;g=new Br(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gc(g,"https"),Kc(g),T?pM(g.toString(),h):gM(g.toString(),h)}else ut(2);a.G=0,a.l&&a.l.sa(d),yE(a),lE(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function yE(a){if(a.G=0,a.ka=[],a.l){let d=KI(a.h);(d.length!=0||a.i.length!=0)&&(A(a.ka,d),A(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function vE(a,d,h){var g=h instanceof Br?Cn(h):new Br(h);if(g.g!="")d&&(g.g=d+"."+g.g),Wc(g,g.s);else{var T=c.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var D=new Br(null);g&&Gc(D,g),d&&(D.g=d),T&&Wc(D,T),h&&(D.l=h),g=D}return h=a.D,d=a.ya,h&&d&&ye(g,h,d),ye(g,"VER",a.la),Fs(a,g),g}function _E(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ee(new Os({eb:h})):new Ee(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function IE(){}t=IE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function eu(){}eu.prototype.g=function(a,d){return new yt(a,d)};function yt(a,d){et.call(this),this.g=new uE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!z(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ji(this)}C(yt,et),yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){Sf(this.g)},yt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=pf(a),a=h);d.i.push(new iM(d.Ya++,a)),d.G==3&&Zc(d)},yt.prototype.N=function(){this.g.l=null,delete this.j,Sf(this.g),delete this.g,yt.aa.N.call(this)};function EE(a){mf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(EE,mf);function wE(){yf.call(this),this.status=1}C(wE,yf);function ji(a){this.g=a}C(ji,IE),ji.prototype.ua=function(){ct(this.g,"a")},ji.prototype.ta=function(a){ct(this.g,new EE(a))},ji.prototype.sa=function(a){ct(this.g,new wE)},ji.prototype.ra=function(){ct(this.g,"b")},eu.prototype.createWebChannel=eu.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,dv=Qn.createWebChannelTransport=function(){return new eu},lv=Qn.getStatEventTarget=function(){return Hc()},uv=Qn.Event=jr,oh=Qn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$c.NO_ERROR=0,$c.TIMEOUT=8,$c.HTTP_ERROR=6,_c=Qn.ErrorCode=$c,FI.COMPLETE="complete",cv=Qn.EventType=FI,xI.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",et.prototype.listen=et.prototype.K,Wo=Qn.WebChannel=xI,nU=Qn.FetchXmlHttpFactory=Os,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,av=Qn.XhrIo=Ee}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});var pA="@firebase/firestore",gA="4.9.0";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var ms="12.0.0";var Ai=new br("@firebase/firestore");function Ko(){return Ai.logLevel}function L(t,...e){if(Ai.logLevel<=ne.DEBUG){let n=e.map(J_);Ai.debug(`Firestore (${ms}): ${t}`,...n)}}function Yn(t,...e){if(Ai.logLevel<=ne.ERROR){let n=e.map(J_);Ai.error(`Firestore (${ms}): ${t}`,...n)}}function ns(t,...e){if(Ai.logLevel<=ne.WARN){let n=e.map(J_);Ai.warn(`Firestore (${ms}): ${t}`,...n)}}function J_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function B(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,nR(t,r,n)}function nR(t,e,n){let r=`FIRESTORE (${ms}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Yn(r),new Error(r)}function pe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||nR(e,i,r)}function K(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends St{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var hh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},yv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($e.UNAUTHENTICATED))}shutdown(){}},vv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},_v=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new hh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new $e(e)}},Iv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ev=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Iv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function rU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=rU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function Tv(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return hv(i)===hv(o)?oe(i,o):hv(i)?1:-1}return oe(t.length,e.length)}var iU=55296,oU=57343;function hv(t){let e=t.charCodeAt(0);return e>=iU&&e<=oU}function rs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var mA="__name__",ph=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&B(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return oe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Tv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}},Ie=class t extends ph{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},sU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dt=class t extends ph{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return sU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mA}static keyField(){return new t([mA])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ie.fromString(e))}static fromName(e){return new t(Ie.fromString(e).popFirst(5))}static empty(){return new t(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ie(e.slice()))}};function rR(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aU(t,e,n,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yA(t){if(!U.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vA(t){if(U.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function iR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Z_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B(12329,{type:typeof t})}function Mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Z_(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Me(t,e){let n={typeString:t};return e&&(n.value=e),n}function kc(t,e){if(!iR(t))throw new V(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(M.INVALID_ARGUMENT,n);return!0}var _A=-62135596800,IA=1e6,Pe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*IA);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_A)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IA}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-_A;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Me("string",Pe._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};var Z=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Pe(0,0))}static max(){return new t(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sc=-1,bv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};bv.UNKNOWN_ID=-1;function cU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new Ri(i,U.empty(),e)}function uU(t){return new Ri(t.readTime,t.key,Sc)}var Ri=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Z.min(),U.empty(),Sc)}static max(){return new t(Z.max(),U.empty(),Sc)}};function lU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var dU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ys(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==dU)throw t;L("LocalStore","Unexpectedly lost primary lease")}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function hU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vs(t){return t.name==="IndexedDbTransactionError"}var X_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),eI=-1;function Wh(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function fU(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var oR="";function pU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=EA(e)),e=gU(t.get(n),e);return EA(e)}function gU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case oR:n+="";break;default:n+=o}}return n}function EA(t){return t+oR+""}var mU="remoteDocuments",sR="owner";var aR="mutationQueues";var cR="mutations";var uR="documentMutations",yU="remoteDocumentsV14";var lR="remoteDocumentGlobal";var dR="targets";var hR="targetDocuments";var fR="targetGlobal",pR="collectionParents";var gR="clientMetadata";var mR="bundles";var yR="namedQueries";var vU="indexConfiguration";var _U="indexState";var IU="indexEntries";var vR="documentOverlays";var EU="globals";var wU=[aR,cR,uR,mU,dR,sR,fR,hR,gR,lR,pR,mR,yR],gX=[...wU,vR],TU=[aR,cR,uR,yU,dR,sR,fR,hR,gR,lR,pR,mR,yR,vR],bU=TU,CU=[...bU,vU,_U,IU];var mX=[...CU,EU];function wA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ki(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _R(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Te=class t{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}},Zo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_n=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gh(this.data.getIterator())}getIteratorFrom(e){return new gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var yn=class t{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(Dt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var mh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var at=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};at.EMPTY_BYTE_STRING=new at("");var SU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(t){if(pe(!!t,39018),typeof t=="string"){let e=0,n=SU.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zn(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}var IR="server_timestamp",ER="__type__",wR="__previous_value__",TR="__local_write_time__";function tI(t){return(t?.mapValue?.fields||{})[ER]?.stringValue===IR}function Kh(t){let e=t.mapValue.fields[wR];return tI(e)?Kh(e):e}function Ac(t){let e=Jn(t.mapValue.fields[TR].timestampValue);return new Pe(e.seconds,e.nanos)}var Sv=class{constructor(e,n,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},yh="(default)",vh=class t{constructor(e,n){this.projectId=e,this.database=n||yh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===yh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var nI="__type__",bR="__max__",sh={mapValue:{fields:{__type__:{stringValue:bR}}}},rI="__vector__",is="value";function Lr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tI(t)?4:SR(t)?9007199254740991:CR(t)?10:11:B(28295,{value:t})}function wn(t,e){if(t===e)return!0;let n=Lr(t);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ac(t).isEqual(Ac(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Jn(i.timestampValue),c=Jn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Zn(i.bytesValue).isEqual(Zn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return _e(i.geoPointValue.latitude)===_e(o.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return _e(i.integerValue)===_e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=_e(i.doubleValue),c=_e(o.doubleValue);return s===c?Dc(s)===Dc(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return rs(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(wA(s)!==wA(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!wn(s[u],c[u])))return!1;return!0}(t,e);default:return B(52216,{left:t})}}function Rc(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function os(t,e){if(t===e)return 0;let n=Lr(t),r=Lr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=_e(o.integerValue||o.doubleValue),u=_e(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return TA(t.timestampValue,e.timestampValue);case 4:return TA(Ac(t),Ac(e));case 5:return Tv(t.stringValue,e.stringValue);case 6:return function(o,s){let c=Zn(o),u=Zn(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=oe(c[l],u[l]);if(f!==0)return f}return oe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=oe(_e(o.latitude),_e(s.latitude));return c!==0?c:oe(_e(o.longitude),_e(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bA(t.arrayValue,e.arrayValue);case 10:return function(o,s){let c=o.fields||{},u=s.fields||{},l=c[is]?.arrayValue,f=u[is]?.arrayValue,p=oe(l?.values?.length||0,f?.values?.length||0);return p!==0?p:bA(l,f)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===sh.mapValue&&s===sh.mapValue)return 0;if(o===sh.mapValue)return 1;if(s===sh.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=Tv(u[p],f[p]);if(m!==0)return m;let y=os(c[u[p]],l[f[p]]);if(y!==0)return y}return oe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw B(23264,{he:n})}}function TA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=Jn(t),r=Jn(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function bA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=os(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function ss(t){return Dv(t)}function Dv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Jn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Dv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Dv(n.fields[s])}`;return i+"}"}(t.mapValue):B(61005,{value:t})}function uh(t){switch(Lr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Kh(t);return e?16+uh(e):16;case 5:return 2*t.stringValue.length;case 6:return Zn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+uh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ki(r.fields,(o,s)=>{i+=o.length+uh(s)}),i}(t.mapValue);default:throw B(13486,{value:t})}}function Av(t){return!!t&&"integerValue"in t}function iI(t){return!!t&&"arrayValue"in t}function CA(t){return!!t&&"nullValue"in t}function SA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lh(t){return!!t&&"mapValue"in t}function CR(t){return(t?.mapValue?.fields||{})[nI]?.stringValue===rI}function Ec(t){if(t.geoPointValue)return{geoPointValue:R({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:R({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ec(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ec(t.arrayValue.values[n]);return e}return R({},t)}function SR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bR}var vX={mapValue:{fields:{[nI]:{stringValue:rI},[is]:{arrayValue:{}}}}};var Zt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(n)}setAll(e){let n=Dt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=Ec(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ki(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Ec(this.value))}};function DR(t){let e=[];return ki(t.fields,(n,r)=>{let i=new Dt([n]);if(lh(r)){let o=DR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new yn(e)}var Xt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Z.min(),Z.min(),Z.min(),Zt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Z.min(),Z.min(),Zt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Z.min(),Z.min(),Zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var as=class{constructor(e,n){this.position=e,this.inclusive=n}};function DA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(s.referenceValue),n.key):r=os(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function AA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}var cs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function DU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var _h=class{},Le=class t extends _h{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nv(e,n,r):n==="array-contains"?new xv(e,r):n==="in"?new Ov(e,r):n==="not-in"?new kv(e,r):n==="array-contains-any"?new Lv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mv(e,r):new Pv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(os(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(os(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tn=class t extends _h{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return AR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function AR(t){return t.op==="and"}function RR(t){return AU(t)&&AR(t)}function AU(t){for(let e of t.filters)if(e instanceof Tn)return!1;return!0}function Rv(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+ss(t.value);if(RR(t))return t.filters.map(e=>Rv(e)).join(",");{let e=t.filters.map(n=>Rv(n)).join(",");return`${t.op}(${e})`}}function NR(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&wn(r.value,i.value)}(t,e):t instanceof Tn?function(r,i){return i instanceof Tn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&NR(s,i.filters[c]),!0):!1}(t,e):void B(19439)}function MR(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${ss(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(MR).join(" ,")+"}"}(t):"Filter"}var Nv=class extends Le{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},Mv=class extends Le{constructor(e,n){super(e,"in",n),this.keys=PR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Pv=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=PR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function PR(t,e){return(e.arrayValue?.values||[]).map(n=>U.fromName(n.referenceValue))}var xv=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return iI(n)&&Rc(n.arrayValue,this.value)}},Ov=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Rc(this.value.arrayValue,n)}},kv=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rc(this.value.arrayValue,n)}},Lv=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!iI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}};var Vv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function RA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Vv(t,e,n,r,i,o,s)}function oI(t){let e=K(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ss(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ss(r)).join(",")),e.Te=n}return e.Te}function sI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AA(t.startAt,e.startAt)&&AA(t.endAt,e.endAt)}function Fv(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var us=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function RU(t,e,n,r,i,o,s,c){return new us(t,e,n,r,i,o,s,c)}function Qh(t){return new us(t)}function NA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NU(t){return t.collectionGroup!==null}function wc(t){let e=K(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new qe(Dt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new cs(o,r))}),n.has(Dt.keyField().canonicalString())||e.Ie.push(new cs(Dt.keyField(),r))}return e.Ie}function In(t){let e=K(t);return e.Ee||(e.Ee=MU(e,wc(t))),e.Ee}function MU(t,e){if(t.limitType==="F")return RA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new cs(i.field,o)});let n=t.endAt?new as(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new as(t.startAt.position,t.startAt.inclusive):null;return RA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jv(t,e,n){return new us(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yh(t,e){return sI(In(t),In(e))&&t.limitType===e.limitType}function xR(t){return`${oI(In(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>MR(i)).join(", ")}]`),Wh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ss(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ss(i)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function Jh(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of wc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=DA(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,wc(r),i)||r.endAt&&!function(s,c,u){let l=DA(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,wc(r),i))}(t,e)}function PU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OR(t){return(e,n)=>{let r=!1;for(let i of wc(t)){let o=xU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function xU(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?os(u,l):B(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:t.dir})}}var Xn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return _R(this.inner)}size(){return this.innerSize}};var OU=new Te(U.comparator);function er(){return OU}var kR=new Te(U.comparator);function Ic(...t){let e=kR;for(let n of t)e=e.insert(n.key,n);return e}function LR(t){let e=kR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ti(){return Tc()}function VR(){return Tc()}function Tc(){return new Xn(t=>t.toString(),(t,e)=>t.isEqual(e))}var kU=new Te(U.comparator),LU=new qe(U.comparator);function se(...t){let e=LU;for(let n of t)e=e.add(n);return e}var VU=new qe(oe);function FU(){return VU}function aI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function FR(t){return{integerValue:""+t}}function jU(t,e){return fU(e)?FR(e):aI(t,e)}var ls=class{constructor(){this._=void 0}};function UU(t,e,n){return t instanceof ds?function(i,o){let s={fields:{[ER]:{stringValue:IR},[TR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&tI(o)&&(o=Kh(o)),o&&(s.fields[wR]=o),{mapValue:s}}(n,e):t instanceof Ni?UR(t,e):t instanceof Mi?BR(t,e):function(i,o){let s=jR(i,o),c=MA(s)+MA(i.Ae);return Av(s)&&Av(i.Ae)?FR(c):aI(i.serializer,c)}(t,e)}function BU(t,e,n){return t instanceof Ni?UR(t,e):t instanceof Mi?BR(t,e):n}function jR(t,e){return t instanceof hs?function(r){return Av(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ds=class extends ls{},Ni=class extends ls{constructor(e){super(),this.elements=e}};function UR(t,e){let n=HR(e);for(let r of t.elements)n.some(i=>wn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Mi=class extends ls{constructor(e){super(),this.elements=e}};function BR(t,e){let n=HR(e);for(let r of t.elements)n=n.filter(i=>!wn(i,r));return{arrayValue:{values:n}}}var hs=class extends ls{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function MA(t){return _e(t.integerValue||t.doubleValue)}function HR(t){return iI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ni&&i instanceof Ni||r instanceof Mi&&i instanceof Mi?rs(r.elements,i.elements,wn):r instanceof hs&&i instanceof hs?wn(r.Ae,i.Ae):r instanceof ds&&i instanceof ds}(t.transform,e.transform)}var Uv=class{constructor(e,n){this.version=e,this.transformResults=n}},Si=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var fs=class{};function $R(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ih(t.key,Si.none()):new Pi(t.key,t.data,Si.none());{let n=t.data,r=Zt.empty(),i=new qe(Dt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new tr(t.key,r,new yn(i.toArray()),Si.none())}}function $U(t,e,n){t instanceof Pi?function(i,o,s){let c=i.value.clone(),u=xA(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof tr?function(i,o,s){if(!dh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=xA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(qR(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function bc(t,e,n,r){return t instanceof Pi?function(o,s,c,u){if(!dh(o.precondition,s))return c;let l=o.value.clone(),f=OA(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof tr?function(o,s,c,u){if(!dh(o.precondition,s))return c;let l=OA(o.fieldTransforms,u,s),f=s.data;return f.setAll(qR(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return dh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function qU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=jR(r.transform,i||null);o!=null&&(n===null&&(n=Zt.empty()),n.set(r.field,o))}return n||null}function PA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rs(r,i,(o,s)=>HU(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Pi=class extends fs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},tr=class extends fs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function qR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function xA(t,e,n){let r=new Map;pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,BU(s,c,n[i]))}return r}function OA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,UU(o,s,e))}return r}var Ih=class extends fs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bv=class extends fs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&$U(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=VR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=$R(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,(n,r)=>PA(n,r))&&rs(this.baseMutations,e.baseMutations,(n,r)=>PA(n,r))}},$v=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return kU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var qv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Re,ue;function zU(t){switch(t){case M.OK:return B(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return B(15467,{code:t})}}function zR(t){if(t===void 0)return Yn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Re.OK:return M.OK;case Re.CANCELLED:return M.CANCELLED;case Re.UNKNOWN:return M.UNKNOWN;case Re.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Re.INTERNAL:return M.INTERNAL;case Re.UNAVAILABLE:return M.UNAVAILABLE;case Re.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Re.NOT_FOUND:return M.NOT_FOUND;case Re.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Re.ABORTED:return M.ABORTED;case Re.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Re.DATA_LOSS:return M.DATA_LOSS;default:return B(39323,{code:t})}}(ue=Re||(Re={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";var GU=null;function WU(){return new TextEncoder}var KU=new Kn([4294967295,4294967295],0);function kA(t){let e=WU().encode(t),n=new sv;return n.update(e),new Uint8Array(n.digest())}function LA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Kn([n,r],0),new Kn([i,o],0)]}var Gv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bi(`Invalid padding: ${n}`);if(r<0)throw new bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Kn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Kn.fromNumber(r)));return i.compare(KU)===1&&(i=new Kn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=kA(e),[r,i]=LA(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=kA(e),[r,i]=LA(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},bi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Eh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Z.min(),i,new Te(oe),er(),se())}},Nc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,se(),se(),se())}};var Xo=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},wh=class{constructor(e,n){this.targetId=e,this.Ce=n}},Th=class{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},bh=class{constructor(){this.ve=0,this.Fe=VA(),this.Me=at.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new Nc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=VA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Wv=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=ah(),this.He=ah(),this.Ye=new Te(oe)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Fv(o))if(r===0){let s=new U(o.path);this.et(n,s,Xt.newNoDocument(s,Z.min()))}else pe(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}GU?.lt(function(f,p,m,y,C){let N={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},A=p.unchangedNames;return A&&(N.bloomFilter={applied:C===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:k=>y?.mightContain(k)??!1}),N}(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=Zn(r).toUint8Array()}catch(u){if(u instanceof mh)return ns("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Gv(s,i,o)}catch(u){return ns(u instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Fv(c.target)){let u=new U(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Xt.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=se();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Eh(e,n,this.Ye,this.je,r);return this.je=er(),this.Je=ah(),this.He=ah(),this.Ye=new Te(oe),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new bh,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(oe),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bh),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function ah(){return new Te(U.comparator)}function VA(){return new Te(U.comparator)}var QU={asc:"ASCENDING",desc:"DESCENDING"},YU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JU={and:"AND",or:"OR"},Kv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Qv(t,e){return t.useProto3Json||Wh(e)?e:{value:e}}function Ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZU(t,e){return Ch(t,e.toTimestamp())}function En(t){return pe(!!t,49232),Z.fromTimestamp(function(n){let r=Jn(n);return new Pe(r.seconds,r.nanos)}(t))}function cI(t,e){return Yv(t,e).canonicalString()}function Yv(t,e){let n=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WR(t){let e=Ie.fromString(t);return pe(ZR(e),10190,{key:e.toString()}),e}function Jv(t,e){return cI(t.databaseId,e.path)}function fv(t,e){let n=WR(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(QR(n))}function KR(t,e){return cI(t.databaseId,e)}function XU(t){let e=WR(t);return e.length===4?Ie.emptyPath():QR(e)}function Zv(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QR(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function FA(t,e,n){return{name:Jv(t,e),fields:n.value.mapValue.fields}}function e2(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(pe(f===void 0||typeof f=="string",58123),at.fromBase64String(f||"")):(pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),at.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let f=l.code===void 0?M.UNKNOWN:zR(l.code);return new V(f,l.message||"")}(s);n=new Th(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=fv(t,r.document.name),o=En(r.document.updateTime),s=r.document.createTime?En(r.document.createTime):Z.min(),c=new Zt({mapValue:{fields:r.document.fields}}),u=Xt.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new Xo(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=fv(t,r.document),o=r.readTime?En(r.readTime):Z.min(),s=Xt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Xo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=fv(t,r.document),o=r.removedTargetIds||[];n=new Xo([],o,i,null)}else{if(!("filter"in e))return B(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new zv(i,o),c=r.targetId;n=new wh(c,s)}}return n}function t2(t,e){let n;if(e instanceof Pi)n={update:FA(t,e.key,e.value)};else if(e instanceof Ih)n={delete:Jv(t,e.key)};else if(e instanceof tr)n={update:FA(t,e.key,e.data),updateMask:l2(e.fieldMask)};else{if(!(e instanceof Bv))return B(16599,{Vt:e.type});n={verify:Jv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof ds)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ni)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Mi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof hs)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw B(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ZU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)}(t,e.precondition)),n}function n2(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?En(i.updateTime):En(o);return s.isEqual(Z.min())&&(s=En(o)),new Uv(s,i.transformResults||[])}(n,e))):[]}function r2(t,e){return{documents:[KR(t,e.path)]}}function i2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KR(t,i);let o=function(l){if(l.length!==0)return JR(Tn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(m){return{field:Yo(m.field),direction:a2(m.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Qv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:i}}function o2(t){let e=XU(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){pe(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){let m=YR(p);return m instanceof Tn&&RR(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(C){return new cs(Jo(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Wh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new as(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new as(y,m)}(n.endAt)),RU(e,i,s,o,c,"F",u,l)}function s2(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Jo(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Jo(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Jo(n.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Jo(n.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Jo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>YR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}}(n.compositeFilter.op))}(t):B(30097,{filter:t})}function a2(t){return QU[t]}function c2(t){return YU[t]}function u2(t){return JU[t]}function Yo(t){return{fieldPath:t.canonicalString()}}function Jo(t){return Dt.fromServerFormat(t.fieldPath)}function JR(t){return t instanceof Le?function(n){if(n.op==="=="){if(SA(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NAN"}};if(CA(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(SA(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NAN"}};if(CA(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(n.field),op:c2(n.op),value:n.value}}}(t):t instanceof Tn?function(n){let r=n.getFilters().map(i=>JR(i));return r.length===1?r[0]:{compositeFilter:{op:u2(n.op),filters:r}}}(t):B(54877,{filter:t})}function l2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Mc=class t{constructor(e,n,r,i,o=Z.min(),s=Z.min(),c=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xv=class{constructor(e){this.yt=e}};function d2(t){let e=o2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jv(e,e.limit,"L"):e}var Sh=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Dc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Jn(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Zn(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?SR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):CR(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):B(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=is,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(_e(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),U.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Sh.Kt=new Sh;var e_=class{constructor(){this.Cn=new t_}addToCollectionParentIndex(e,n){return this.Cn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Ri.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},t_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(Ie.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(Ie.comparator)).toArray()}};var _X=new Uint8Array(0);var jA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XR=41943040,Ft=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Ft.DEFAULT_COLLECTION_PERCENTILE=10,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ft.DEFAULT=new Ft(XR,Ft.DEFAULT_COLLECTION_PERCENTILE,Ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ft.DISABLED=new Ft(-1,0,0);var Pc=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var UA="LruGarbageCollector",h2=1048576;function BA([t,e],[n,r]){let i=oe(t,n);return i===0?oe(e,r):i}var n_=class{constructor(e){this.Ir=e,this.buffer=new qe(BA),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();BA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},r_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){L(UA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vs(n)?L(UA,"Ignoring IndexedDB error during garbage collection: ",n):await ys(n)}await this.Vr(3e5)})}},i_=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(X_.ce);let r=new n_(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(jA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ko()<=ne.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function f2(t,e){return new i_(t,e)}var o_=class{constructor(){this.changes=new Xn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var s_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var a_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bc(r.mutation,i,yn.empty(),Pe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){let i=Ti();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ic();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=er(),s=Tc(),c=function(){return Tc()}();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof tr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),bc(f.mutation,l,f.mutation.getFieldMask(),Pe.now())):s.set(l.key,yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>c.set(l,new s_(f,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=Tc(),i=new Te((s,c)=>s-c),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||yn.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||se()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=VR();f.forEach(m=>{if(!o.has(m)){let y=$R(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Ti()),c=Sc,u=o;return s.next(l=>P.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(f=>({batchId:c,changes:LR(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=Ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ic();return this.indexManager.getCollectionParents(e,o).next(c=>P.forEach(c,u=>{let l=function(p,m){return new us(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Xt.newInvalidDocument(f)))});let c=Ic();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&bc(f.mutation,l,yn.empty(),Pe.now()),Jh(n,l)&&(c=c.insert(u,l))}),c})}};var c_=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return P.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:En(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:d2(i.bundledQuery),readTime:En(i.readTime)}}(n)),P.resolve()}};var u_=class{constructor(){this.overlays=new Te(U.comparator),this.qr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ti();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Ti(),o=n.length+1,s=new U(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Te((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Ti(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=Ti(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return P.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new qv(n,r));let o=this.qr.get(n);o===void 0&&(o=se(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var l_=class{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var xc=class{constructor(){this.Qr=new qe(Ne.$r),this.Ur=new qe(Ne.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new Ne(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ne(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new U(new Ie([])),r=new Ne(n,e),i=new Ne(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new U(new Ie([])),r=new Ne(n,e),i=new Ne(n,e+1),o=se();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ne(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ne=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return U.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||U.comparator(e.key,n.key)}};var d_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(Ne.$r)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Hv(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new Ne(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?eI:this.tr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ne(n,0),i=new Ne(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(oe);return n.forEach(i=>{let o=new Ne(i,0),s=new Ne(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),P.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let s=new Ne(new U(o),0),c=new qe(oe);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},s),P.resolve(this.ti(c))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return P.forEach(n.mutations,i=>{let o=new Ne(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new Ne(n,0),i=this.Zr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var h_=class{constructor(e){this.ri=e,this.docs=function(){return new Te(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Xt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=er(),s=n.path,c=new U(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||lU(uU(f),r)<=0||(i.has(f.key)||Jh(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){B(9500)}ii(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new f_(this)}getSize(e){return P.resolve(this.size)}},f_=class extends o_{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var p_=class{constructor(e){this.persistence=e,this.si=new Xn(n=>oI(n),sI),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new xc,this.targetCount=0,this.ai=Pc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),P.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Pc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Pr(n),P.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this._i.containsKey(n))}};var Dh=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new X_(0),this.li=!1,this.li=!0,this.hi=new l_,this.referenceDelegate=e(this),this.Pi=new p_(this),this.indexManager=new e_,this.remoteDocumentCache=function(i){return new h_(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Xv(n),this.Ii=new c_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new d_(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new g_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return P.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},g_=class extends Cv{constructor(e){super(),this.currentSequenceNumber=e}},m_=class t{constructor(e){this.persistence=e,this.Ri=new xc,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw B(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.fi,r=>{let i=U.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return P.or([()=>P.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Ah=class t{constructor(e,n){this.persistence=e,this.pi=new Xn(r=>pU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=f2(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return P.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),P.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uh(e.data.value)),n}br(e,n,r){return P.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var y_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=se(),i=se();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var v_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var __=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return XS()?8:hU(He())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new v_;return this.Ss(e,n,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,s,c.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ko()<=ne.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),P.resolve()):(Ko()<=ne.DEBUG&&L("QueryEngine","Query:",Qo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ko()<=ne.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):P.resolve())}ys(e,n){if(NA(n))return P.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jv(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,c);return this.Cs(n,l,s,u.readTime)?this.ys(e,jv(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return NA(n)||i.isEqual(Z.min())?P.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?P.resolve(null):(Ko()<=ne.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qo(n)),this.vs(e,s,n,cU(i,Sc)).next(c=>c))})}Ds(e,n){let r=new qe(OR(e));return n.forEach((i,o)=>{Jh(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Ko()<=ne.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Qo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ri.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var uI="LocalStore",p2=3e8,I_=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Te(oe),this.xs=new Xn(o=>oI(o),sI),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function g2(t,e,n,r){return new I_(t,e,n,r)}async function eN(t,e){let n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=se();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:c}))})})}function m2(t,e){let n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,l,f){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(C=>{y=y.next(()=>f.getEntry(u,C)).next(N=>{let A=l.docVersions.get(C);pe(A!==null,48541),N.version.compareTo(A)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=se();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tN(t){let e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function y2(t,e){let n=K(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let c=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(at.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(N,A,k){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=p2?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,f)&&c.push(n.Pi.updateTargetData(o,y))});let u=er(),l=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(v2(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(Z.min())){let f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return P.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function v2(t,e,n){let r=se(),i=se();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=er();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):L(uI,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function _2(t,e){let n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=eI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function I2(t,e){let n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Mc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function E_(t,e,n){let r=K(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!vs(s))throw s;L(uI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function HA(t,e,n){let r=K(t),i=Z.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=K(u),m=p.xs.get(f);return m!==void 0?P.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)}(r,s,In(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Z.min(),n?o:se())).next(c=>(E2(r,PU(e),c),{documents:c,Qs:o})))}function E2(t,e,n){let r=t.Os.get(e)||Z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var Rh=class{constructor(){this.activeTargetIds=FU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var w_=class{constructor(){this.Mo=new Rh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Rh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var T_=class{Oo(e){}shutdown(){}};var $A="ConnectivityMonitor",Nh=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){L($A,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){L($A,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ch=null;function b_(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}var pv="RestConnection",w2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},C_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===yh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=b_(),c=this.zo(e,n.toUriEncodedString());L(pv,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(c),f=Tr(l);return this.Jo(e,c,u,r,f).then(p=>(L(pv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ns(pv,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ms}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=w2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var S_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var st="WebChannelConnection",D_=class extends C_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=b_();return new Promise((c,u)=>{let l=new av;l.setWithCredentials(!0),l.listenOnce(cv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _c.NO_ERROR:let p=l.getResponseJson();L(st,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case _c.TIMEOUT:L(st,`RPC '${e}' ${s} timed out`),u(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:let m=l.getStatus();if(L(st,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let N=function(k){let z=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(z)>=0?z:M.UNKNOWN}(C.status);u(new V(N,C.message))}else u(new V(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(M.UNAVAILABLE,"Connection failed."));break;default:B(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{L(st,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);L(st,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=b_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dv(),c=lv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");L(st,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,C=new S_({Yo:A=>{y?L(st,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(L(st,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),L(st,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),N=(A,k,z)=>{A.listen(k,te=>{try{z(te)}catch(ze){setTimeout(()=>{throw ze},0)}})};return N(p,Wo.EventType.OPEN,()=>{y||(L(st,`RPC '${e}' stream ${i} transport opened.`),C.o_())}),N(p,Wo.EventType.CLOSE,()=>{y||(y=!0,L(st,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(p))}),N(p,Wo.EventType.ERROR,A=>{y||(y=!0,ns(st,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),C.a_(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Wo.EventType.MESSAGE,A=>{if(!y){let k=A.data[0];pe(!!k,16349);let z=k,te=z?.error||z[0]?.error;if(te){L(st,`RPC '${e}' stream ${i} received error:`,te);let ze=te.status,en=function(v){let I=Re[v];if(I!==void 0)return zR(I)}(ze),Ze=te.message;en===void 0&&(en=M.INTERNAL,Ze="Unknown error status: "+ze+" with message "+te.message),y=!0,C.a_(new V(en,Ze)),p.close()}else L(st,`RPC '${e}' stream ${i} received:`,k),C.u_(k)}}),N(c,uv.STAT_EVENT,A=>{A.stat===oh.PROXY?L(st,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===oh.NOPROXY&&L(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function gv(){return typeof document<"u"?document:null}function Zh(t){return new Kv(t,!0)}var Mh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var qA="PersistentStream",Ph=class{constructor(e,n,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mh(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return L(qA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(L(qA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},A_=class extends Ph{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=e2(this.serializer,e),r=function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?En(s.readTime):Z.min()}(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=Zv(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=Fv(u)?{documents:r2(o,u)}:{query:i2(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=GR(o,s.resumeToken);let l=Qv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){c.readTime=Ch(o,s.snapshotVersion.toTimestamp());let l=Qv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=s2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=Zv(this.serializer),n.removeTarget=e,this.q_(n)}},R_=class extends Ph{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=n2(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Zv(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>t2(this.serializer,r))};this.q_(n)}};var N_=class{},M_=class extends N_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Yv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Yv(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},P_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yn(n),this.aa=!1):L("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var xi="RemoteStore",x_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Li(this)&&(L(xi,"Restarting streams for network reachability change."),await async function(u){let l=K(u);l.Ea.add(4),await Lc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Xh(l)}(this))})}),this.Ra=new P_(r,i)}};async function Xh(t){if(Li(t))for(let e of t.da)await e(!0)}async function Lc(t){for(let e of t.da)await e(!1)}function nN(t,e){let n=K(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fI(n)?hI(n):_s(n).O_()&&dI(n,e))}function lI(t,e){let n=K(t),r=_s(n);n.Ia.delete(e),r.O_()&&rN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Li(n)&&n.Ra.set("Unknown"))}function dI(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_s(t).Y_(e)}function rN(t,e){t.Va.Ue(e),_s(t).Z_(e)}function hI(t){t.Va=new Wv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_s(t).start(),t.Ra.ua()}function fI(t){return Li(t)&&!_s(t).x_()&&t.Ia.size>0}function Li(t){return K(t).Ea.size===0}function iN(t){t.Va=void 0}async function T2(t){t.Ra.set("Online")}async function b2(t){t.Ia.forEach((e,n)=>{dI(t,e)})}async function C2(t,e){iN(t),fI(t)?(t.Ra.ha(e),hI(t)):t.Ra.set("Unknown")}async function S2(t,e,n){if(t.Ra.set("Online"),e instanceof Th&&e.state===2&&e.cause)try{await async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(r){L(xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xh(t,r)}else if(e instanceof Xo?t.Va.Ze(e):e instanceof wh?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{let r=await tN(t.localStore);n.compareTo(r)>=0&&await function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(at.EMPTY_BYTE_STRING,f.snapshotVersion)),rN(o,u);let p=new Mc(f.target,u,l,f.sequenceNumber);dI(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){L(xi,"Failed to raise snapshot:",r),await xh(t,r)}}async function xh(t,e,n){if(!vs(e))throw e;t.Ea.add(1),await Lc(t),t.Ra.set("Offline"),n||(n=()=>tN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L(xi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Xh(t)})}function oN(t,e){return e().catch(n=>xh(t,n,e))}async function ef(t){let e=K(t),n=Vr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eI;for(;D2(e);)try{let i=await _2(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,A2(e,i)}catch(i){await xh(e,i)}sN(e)&&aN(e)}function D2(t){return Li(t)&&t.Ta.length<10}function A2(t,e){t.Ta.push(e);let n=Vr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sN(t){return Li(t)&&!Vr(t).x_()&&t.Ta.length>0}function aN(t){Vr(t).start()}async function R2(t){Vr(t).ra()}async function N2(t){let e=Vr(t);for(let n of t.Ta)e.ea(n.mutations)}async function M2(t,e,n){let r=t.Ta.shift(),i=$v.from(r,e,n);await oN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ef(t)}async function P2(t,e){e&&Vr(t).X_&&await async function(r,i){if(function(s){return zU(s)&&s!==M.ABORTED}(i.code)){let o=r.Ta.shift();Vr(r).B_(),await oN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await ef(r)}}(t,e),sN(t)&&aN(t)}async function zA(t,e){let n=K(t);n.asyncQueue.verifyOperationInProgress(),L(xi,"RemoteStore received new credentials");let r=Li(n);n.Ea.add(3),await Lc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xh(n)}async function x2(t,e){let n=K(t);e?(n.Ea.delete(2),await Xh(n)):e||(n.Ea.add(2),await Lc(n),n.Ra.set("Unknown"))}function _s(t){return t.ma||(t.ma=function(n,r,i){let o=K(n);return o.sa(),new A_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:T2.bind(null,t),t_:b2.bind(null,t),r_:C2.bind(null,t),H_:S2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),fI(t)?hI(t):t.Ra.set("Unknown")):(await t.ma.stop(),iN(t))})),t.ma}function Vr(t){return t.fa||(t.fa=function(n,r,i){let o=K(n);return o.sa(),new R_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:R2.bind(null,t),r_:P2.bind(null,t),ta:N2.bind(null,t),na:M2.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ef(t)):(await t.fa.stop(),t.Ta.length>0&&(L(xi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var O_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function pI(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),vs(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Oh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=Ic(),this.sortedSet=new Te(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var kh=class{constructor(){this.ga=new Te(U.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):B(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},ps=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Oh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var k_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},L_=class{constructor(){this.queries=GA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=K(n),o=i.queries;i.queries=GA(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new V(M.ABORTED,"Firestore shutting down"))}};function GA(){return new Xn(t=>xR(t),Yh)}async function cN(t,e){let n=K(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new k_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=pI(s,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&gI(n)}async function uN(t,e){let n=K(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function O2(t,e){let n=K(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&gI(n)}function k2(t,e,n){let r=K(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function gI(t){t.Ca.forEach(e=>{e.next()})}var V_,WA;(WA=V_||(V_={})).Ma="default",WA.Cache="cache";var Lh=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ps(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==V_.Cache}};var Vh=class{constructor(e){this.key=e}},Fh=class{constructor(e){this.key=e}},F_=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=OR(e),this.tu=new Oh(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new kh,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=Jh(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),A=!0):this.su(m,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(u||l)&&(c=!0)),A&&(y?(s=s.add(y),o=N?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>function(y,C){let N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Rt:A})}};return N(y)-N(C)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new ps(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Fh(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Vh(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ps.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},mI="SyncEngine",j_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},U_=class{constructor(e){this.key=e,this.hu=!1}},B_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Xn(c=>xR(c),Yh),this.Iu=new Map,this.Eu=new Set,this.du=new Te(U.comparator),this.Au=new Map,this.Ru=new xc,this.Vu={},this.mu=new Map,this.fu=Pc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function L2(t,e,n=!0){let r=gN(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await lN(r,e,n,!0),i}async function V2(t,e){let n=gN(t);await lN(n,e,!0,!1)}async function lN(t,e,n,r){let i=await I2(t.localStore,In(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await F2(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&nN(t.remoteStore,i),c}async function F2(t,e,n,r,i){t.pu=(p,m,y)=>async function(N,A,k,z){let te=A.view.ru(k);te.Cs&&(te=await HA(N.localStore,A.query,!1).then(({documents:b})=>A.view.ru(b,te)));let ze=z&&z.targetChanges.get(A.targetId),en=z&&z.targetMismatches.get(A.targetId)!=null,Ze=A.view.applyChanges(te,N.isPrimaryClient,ze,en);return QA(N,A.targetId,Ze.au),Ze.snapshot}(t,p,m,y);let o=await HA(t.localStore,e,!0),s=new F_(e,o.Qs),c=s.ru(o.documents),u=Nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);QA(t,n,l.au);let f=new j_(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function j2(t,e,n){let r=K(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Yh(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await E_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&lI(r.remoteStore,i.targetId),H_(r,i.targetId)}).catch(ys)):(H_(r,i.targetId),await E_(r.localStore,i.targetId,!0))}async function U2(t,e){let n=K(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lI(n.remoteStore,r.targetId))}async function B2(t,e,n){let r=K2(t);try{let i=await function(s,c){let u=K(s),l=Pe.now(),f=c.reduce((y,C)=>y.add(C.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=er(),N=se();return u.Ns.getEntries(y,f).next(A=>{C=A,C.forEach((k,z)=>{z.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(A=>{p=A;let k=[];for(let z of c){let te=qU(z,p.get(z.key).overlayedDocument);te!=null&&k.push(new tr(z.key,te,DR(te.value.mapValue),Si.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,c)}).next(A=>{m=A;let k=A.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,A.batchId,k)})}).then(()=>({batchId:m.batchId,changes:LR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Te(oe)),l=l.insert(c,u),s.Vu[s.currentUser.toKey()]=l}(r,i.batchId,n),await Vc(r,i.changes),await ef(r.remoteStore)}catch(i){let o=pI(i,"Failed to persist write");n.reject(o)}}async function dN(t,e){let n=K(t);try{let r=await y2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?pe(s.hu,14607):i.removedDocuments.size>0&&(pe(s.hu,42227),s.hu=!1))}),await Vc(n,r,e)}catch(r){await ys(r)}}function KA(t,e,n){let r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=K(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(c)&&(l=!0)}),l&&gI(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function H2(t,e,n){let r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Te(U.comparator);s=s.insert(o,Xt.newNoDocument(o,Z.min()));let c=se().add(o),u=new Eh(Z.min(),new Map,new Te(oe),s,c);await dN(r,u),r.du=r.du.remove(o),r.Au.delete(e),yI(r)}else await E_(r.localStore,e,!1).then(()=>H_(r,e,n)).catch(ys)}async function $2(t,e){let n=K(t),r=e.batch.batchId;try{let i=await m2(n.localStore,e);fN(n,r,null),hN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vc(n,i)}catch(i){await ys(i)}}async function q2(t,e,n){let r=K(t);try{let i=await function(s,c){let u=K(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(pe(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);fN(r,e,n),hN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vc(r,i)}catch(i){await ys(i)}}function hN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function fN(t,e,n){let r=K(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function H_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||pN(t,r)})}function pN(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(lI(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),yI(t))}function QA(t,e,n){for(let r of n)r instanceof Vh?(t.Ru.addReference(r.key,e),z2(t,r)):r instanceof Fh?(L(mI,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||pN(t,r.key)):B(19791,{wu:r})}function z2(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(L(mI,"New document in limbo: "+n),t.Eu.add(r),yI(t))}function yI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new U(Ie.fromString(e)),r=t.fu.next();t.Au.set(r,new U_(n)),t.du=t.du.insert(n,r),nN(t.remoteStore,new Mc(In(Qh(n.path)),r,"TargetPurposeLimboResolution",X_.ce))}}async function Vc(t,e,n){let r=K(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=y_.As(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(u,l){let f=K(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!vs(p))throw p;L(uI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);f.Ms=f.Ms.insert(m,N)}}}(r.localStore,o))}async function G2(t,e){let n=K(t);if(!n.currentUser.isEqual(e)){L(mI,"User change. New user:",e.toKey());let r=await eN(n.localStore,e);n.currentUser=e,function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new V(M.CANCELLED,s))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vc(n,r.Ls)}}function W2(t,e){let n=K(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function gN(t){let e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H2.bind(null,e),e.Pu.H_=O2.bind(null,e.eventManager),e.Pu.yu=k2.bind(null,e.eventManager),e}function K2(t){let e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q2.bind(null,e),e}var mN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Zh(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return g2(this.persistence,new __,n.initialUser,this.serializer)}Cu(n){return new Dh(m_.mi,this.serializer)}Du(n){return new w_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),$_=class extends mN{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pe(this.persistence.referenceDelegate instanceof Ah,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new r_(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Ft.withCacheSize(this.cacheSizeBytes):Ft.DEFAULT;return new Dh(r=>Ah.mi(r,n),this.serializer)}};var Q2=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>KA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=G2.bind(null,this.syncEngine),await x2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return function(){return new L_}()}createDatastore(n){let r=Zh(n.databaseInfo.databaseId),i=function(s){return new D_(s)}(n.databaseInfo);return function(s,c,u,l){return new M_(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new x_(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>KA(this.syncEngine,r,0),function(){return Nh.v()?new Nh:new T_}())}createSyncEngine(n,r){return function(o,s,c,u,l,f,p){let m=new B_(o,s,c,u,l,f);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await async function(r){let i=K(r);L(xi,"RemoteStore shutting down."),i.Ea.add(5),await Lc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var jh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Fr="FirestoreClient",q_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$e.UNAUTHENTICATED,this.clientId=Cc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{L(Fr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(L(Fr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=pI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function mv(t,e){t.asyncQueue.verifyOperationInProgress(),L(Fr,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function YA(t,e){t.asyncQueue.verifyOperationInProgress();let n=await Y2(t);L(Fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zA(e.remoteStore,i)),t._onlineComponents=e}async function Y2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L(Fr,"Using user provided OfflineComponentProvider");try{await mv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ns("Error using user provided cache. Falling back to memory cache: "+n),await mv(t,new mN)}}else L(Fr,"Using default OfflineComponentProvider"),await mv(t,new $_(void 0));return t._offlineComponents}async function yN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L(Fr,"Using user provided OnlineComponentProvider"),await YA(t,t._uninitializedComponentsProvider._online)):(L(Fr,"Using default OnlineComponentProvider"),await YA(t,new Q2))),t._onlineComponents}function J2(t){return yN(t).then(e=>e.syncEngine)}async function z_(t){let e=await yN(t),n=e.eventManager;return n.onListen=L2.bind(null,e.syncEngine),n.onUnlisten=j2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=V2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=U2.bind(null,e.syncEngine),n}function Z2(t,e,n={}){let r=new vn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,c,u,l){let f=new jh({next:m=>{f.Nu(),s.enqueueAndForget(()=>uN(o,p));let y=m.docs.has(c);!y&&m.fromCache?l.reject(new V(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new V(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Lh(Qh(c.path),f,{includeMetadataChanges:!0,qa:!0});return cN(o,p)}(await z_(t),t.asyncQueue,e,n,r)),r.promise}function vN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var JA=new Map;var _N="firestore.googleapis.com",ZA=!0,Uh=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_N,this.ssl=ZA}else this.host=e.host,this.ssl=e.ssl??ZA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h2)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},gs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yv;switch(r.type){case"firstParty":return new Ev(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=JA.get(n);r&&(L("ComponentProvider","Removing Datastore"),JA.delete(n),r.terminate())}(this),Promise.resolve()}};function X2(t,e,n,r={}){t=Mr(t,gs);let i=Tr(e),o=t._getSettings(),s=H(R({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Pd(`https://${c}`),xd("Firestore",!0)),o.host!==_N&&o.host!==c&&ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=H(R({},o),{host:c,ssl:i,emulatorOptions:r});if(!fn(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=$e.MOCK_USER;else{l=WS(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new $e(p)}t._authCredentials=new vv(new hh(l,f))}}var Bh=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Je=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(kc(n,t._jsonSchema))return new t(e,r||null,new U(Ie.fromString(n.referencePath)))}};Je._jsonSchemaVersion="firestore/documentReference/1.0",Je._jsonSchema={type:Me("string",Je._jsonSchemaVersion),referencePath:Me("string")};var Pr=class t extends Bh{constructor(e,n,r){super(e,n,Qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function IN(t,e,...n){if(t=ot(t),rR("collection","path",e),t instanceof gs){let r=Ie.fromString(e,...n);return vA(r),new Pr(t,null,r)}{if(!(t instanceof Je||t instanceof Pr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ie.fromString(e,...n));return vA(r),new Pr(t.firestore,null,r)}}function tf(t,e,...n){if(t=ot(t),arguments.length===1&&(e=Cc.newId()),rR("doc","path",e),t instanceof gs){let r=Ie.fromString(e,...n);return yA(r),new Je(t,null,new U(r))}{if(!(t instanceof Je||t instanceof Pr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ie.fromString(e,...n));return yA(r),new Je(t.firestore,t instanceof Pr?t.converter:null,new U(r))}}var XA="AsyncQueue",Hh=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mh(this,"async_queue_retry"),this._c=()=>{let r=gv();r&&L(XA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=gv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=gv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new vn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vs(e))throw e;L(XA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Yn("INTERNAL UNHANDLED ERROR: ",eR(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=O_.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&B(47125,{Pc:eR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function eR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function tR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Oi=class extends gs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Hh,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Hh(e),this._firestoreClient=void 0,await e}}};function EN(t,e){let n=typeof t=="object"?t:Vd(),r=typeof t=="string"?t:e||yh,i=dc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=GS("firestore");o&&X2(i,...o)}return i}function vI(t){if(t._terminated)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eB(t),t._firestoreClient}function eB(t){let e=t._freezeSettings(),n=function(i,o,s,c){return new Sv(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,vN(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new q_(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(t._componentsProvider))}var xr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(at.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};xr._jsonSchemaVersion="firestore/bytes/1.0",xr._jsonSchema={type:Me("string",xr._jsonSchemaVersion),bytes:Me("string")};var Oc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $h=class{constructor(e){this._methodName=e}};var Or=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(kc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:Me("string",Or._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};var kr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new V(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:Me("string",kr._jsonSchemaVersion),vectorValues:Me("object")};var tB=/^__.*__$/,G_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pi(e,this.data,n,this.fieldTransforms)}};function wN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ac:t})}}var W_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(R(R({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wN(this.Ac)&&tB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},K_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zh(e)}Cc(e,n,r,i=!1){return new W_({Ac:e,methodName:n,Dc:r,path:Dt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function nB(t){let e=t._freezeSettings(),n=Zh(t._databaseId);return new K_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rB(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);SN("Data must be an object, but it was:",s,r);let c=bN(r,s),u,l;if(o.merge)u=new yn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=iB(e,p,n);if(!s.contains(m))throw new V(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);sB(f,m)||f.push(m)}u=new yn(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new G_(new Zt(c),u,l)}function TN(t,e){if(CN(t=ot(t)))return SN("Unsupported field value:",e,t),bN(t,e);if(t instanceof $h)return function(r,i){if(!wN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=TN(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Pe.fromDate(r);return{timestampValue:Ch(i.serializer,o)}}if(r instanceof Pe){let o=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ch(i.serializer,o)}}if(r instanceof Or)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xr)return{bytesValue:GR(i.serializer,r._byteString)};if(r instanceof Je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:cI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kr)return function(s,c){return{mapValue:{fields:{[nI]:{stringValue:rI},[is]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return aI(c.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Z_(r)}`)}(t,e)}function bN(t,e){let n={};return _R(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(t,(r,i)=>{let o=TN(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function CN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof Or||t instanceof xr||t instanceof Je||t instanceof $h||t instanceof kr)}function SN(t,e,n){if(!CN(n)||!iR(n)){let r=Z_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function iB(t,e,n){if((e=ot(e))instanceof Oc)return e._internalPath;if(typeof e=="string")return DN(t,e);throw qh("Field path arguments must be of type string or ",t,!1,void 0,n)}var oB=new RegExp("[~\\*/\\[\\]]");function DN(t,e,n){if(e.search(oB)>=0)throw qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oc(...e.split("."))._internalPath}catch{throw qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(M.INVALID_ARGUMENT,c+t+u)}function sB(t,e){return t.some(n=>n.isEqual(e))}var zh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(AN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Q_=class extends zh{data(){return super.data()}};function AN(t,e){return typeof e=="string"?DN(t,e):e instanceof Oc?e._internalPath:e._delegate._internalPath}function aB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Y_=class{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ki(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[is].arrayValue?.values?.map(r=>_e(r.doubleValue));return new kr(n)}convertGeoPoint(e){return new Or(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Kh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){let n=Jn(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ie.fromString(e);pe(ZR(r),9688,{name:e});let i=new vh(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(n)||Yn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function cB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ci=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Di=class t extends zh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new es(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(AN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:Me("string",Di._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};var es=class extends Di{data(e={}){return super.data(e)}},ts=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ci(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new es(this._firestore,this._userDataWriter,r.key,r,new Ci(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new es(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ci(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new es(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ci(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:uB(c.type),doc:u,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function uB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:t})}}function RN(t){t=Mr(t,Je);let e=Mr(t.firestore,Oi);return Z2(vI(e),t._key).then(n=>MN(e,t,n))}ts._jsonSchemaVersion="firestore/querySnapshot/1.0",ts._jsonSchema={type:Me("string",ts._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};var Gh=class extends Y_{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}};function _I(t,e,n){t=Mr(t,Je);let r=Mr(t.firestore,Oi),i=cB(t.converter,e,n);return lB(r,[rB(nB(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Si.none())])}function NN(t,...e){t=ot(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tR(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tR(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(t instanceof Je)s=Mr(t.firestore,Oi),c=Qh(t._key.path),o={next:u=>{e[r]&&e[r](MN(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=Mr(t,Bh);s=Mr(u.firestore,Oi),c=u._query;let l=new Gh(s);o={next:f=>{e[r]&&e[r](new ts(s,l,u,f))},error:e[r+1],complete:e[r+2]},aB(t._query)}return function(l,f,p,m){let y=new jh(m),C=new Lh(f,y,p);return l.asyncQueue.enqueueAndForget(async()=>cN(await z_(l),C)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>uN(await z_(l),C))}}(vI(s),c,i,o)}function lB(t,e){return function(r,i){let o=new vn;return r.asyncQueue.enqueueAndForget(async()=>B2(await J2(r),i,o)),o.promise}(vI(t),e)}function MN(t,e,n){let r=n.docs.get(e._key),i=new Gh(t);return new Di(t,i,e._key,r,new Ci(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ms=i})(Dr),Sr(new Vt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Oi(new _v(r.getProvider("auth-internal")),new wv(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vh(l.options.projectId,f)}(s,i),s);return o=R({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Yt(pA,gA,e),Yt(pA,gA,"esm2020")})();var PN=0,Fc=[];function xN(){let t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";var e=new Date().getTime(),n=e===PN;PN=e;for(var r=new Array(8),i=7;i>=0;i--)r[i]=t.charAt(e%64),e=Math.floor(e/64);if(e!==0)throw new Error("We should have converted the entire timestamp.");var o=r.join("");if(n){for(i=11;i>=0&&Fc[i]===63;i--)Fc[i]=0;Fc[i]++}else for(i=0;i<12;i++)Fc[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=t.charAt(Fc[i]);if(o.length!=20)throw new Error("Length should be 20.");return o}var dB={apiKey:"AIzaSyBHoXHWqQok9WDrHTiGFLoHtUGAU6e6gSc",authDomain:"mutter-7f726.firebaseapp.com",projectId:"mutter-7f726",storageBucket:"mutter-7f726.firebasestorage.app",messagingSenderId:"380389097164",appId:"1:380389097164:web:910553448fc761f3814c69"},kN=Dy(dB),ht=ov(kN),nf=EN(kN);iv(ht).catch(t=>{alert(t)});var EI=class{author;text;id;constructor(e,n,r){this.id=e,this.author=n,this.text=r}},ON=new Jy;async function LN(){if(!ht.currentUser)try{await nv(ht,ON)}catch(t){console.error(t),rv(ht,ON)}}function VN(){Zy(ht)}function FN(t){nh(ht,e=>{if(e){let n=e.displayName??`User-${e.uid}`;t(n)}else t("")})}function jN(){return IN(nf,"conversations","shared","messages")}function UN(t){let e=jN();NN(e,async n=>{let r=[],i=n.docChanges();for(let o of i)if(o.type=="added"){let s=o.doc.get("author"),c=await pB(s),u=o.doc.get("text"),l=new EI(o.doc.id,c,u);r.push(l)}t(r)})}async function BN(t){if(!ht.currentUser)return;let e=jN(),n=gB(e),r=ht.currentUser.uid;await _I(n,{author:r,text:t})}nh(ht,t=>hB());async function hB(){if(!ht.currentUser)return;let t=ht.currentUser.uid,e=ht.currentUser.displayName??`user-${ht.currentUser.uid}`,r=tf(nf,"profiles",t);await _I(r,{displayName:e})}async function fB(t){let n=tf(nf,"profiles",t);return(await RN(n)).get("displayName")}var II=new Map;async function pB(t){let e=`User-${t}`;if(ht.currentUser?.uid==t)return ht.currentUser.displayName??e;if(II.has(t))return II.get(t)??e;try{let n=await fB(t);if(n)return II.set(t,n),n}catch{}return e}function gB(t){let e=xN();return tf(nf,t.path,e)}var mB=(t,e)=>e.id;function yB(t,e){if(t&1&&(Wt(0,"li")(1,"p"),fi(2),Kt()()),t&2){let n=e.$implicit;wo(2),Fl("",n.author,": ",n.text)}}var rf=class t{username=zt("");messages=zt([]);textToSend="";constructor(){FN(e=>{this.username.set(e)}),UN(e=>{this.addMessages(e)})}addMessages(e){this.messages.update(n=>{var r=[...n,...e];return r.sort((i,o)=>i.id<o.id?-1:1),r})}async sendMessage(){let e=this.textToSend;this.textToSend="",await BN(e)}signIn(){LN()}signOut(){VN()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ba({type:t,selectors:[["app-root"]],decls:16,vars:2,consts:[[1,"main"],[1,"content"],[3,"click"],["type","text","name","textToSend",3,"ngModelChange","ngModel"]],template:function(n,r){n&1&&(Wt(0,"main",0)(1,"div",1)(2,"button",2),jn("click",function(){return r.signIn()}),fi(3,"Sign In"),Kt(),Wt(4,"button",2),jn("click",function(){return r.signOut()}),fi(5,"Sign Out"),Kt(),Wt(6,"p"),fi(7),Kt(),Wt(8,"form")(9,"input",3),Ul("ngModelChange",function(o){return cm(r.textToSend,o)||(r.textToSend=o),o}),Kt(),Wt(10,"button",2),jn("click",function(){return r.sendMessage()}),fi(11,">"),Kt()(),Wt(12,"ul"),sm(13,yB,3,2,"li",null,mB),Kt()()(),bo(15,"router-outlet")),n&2&&(wo(7),Vl("Signed in as ",r.username()),wo(2),jl("ngModel",r.textToSend),wo(4),am(r.messages()))},dependencies:[Za,jS,FS,Dd,MS,PS,oy,iy],encapsulation:2})};Sm(rf,pS).catch(t=>console.error(t));
